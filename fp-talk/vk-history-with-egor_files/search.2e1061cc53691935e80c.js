/*! For license information please see search.2e1061cc53691935e80c.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={884200:(e,t,r)=>{r.d(t,{Icon12Lock:()=>o});var o=(0,r(825028).makeIcon)("Icon12Lock","lock_12","0 0 12 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 12 12" id="lock_12"><path d="M6 .5c1.657 0 3 1.337 3 2.992v1.507L9.748 5c.415 0 .752.34.752.76v4.48a.76.76 0 0 1-.752.76H2.252a.756.756 0 0 1-.752-.76V5.76c0-.42.342-.76.752-.76L3 4.999V3.501A3.003 3.003 0 0 1 5.824.505L6 .5ZM6 2l-.145.007A1.496 1.496 0 0 0 4.5 3.5V5h3V3.5C7.5 2.666 6.828 2 6 2Z" /></symbol>',12,12,!1,void 0)},358493:(e,t,r)=>{r.d(t,{Icon16Add:()=>o});var o=(0,r(825028).makeIcon)("Icon16Add","add_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="add_16"><path fill="currentColor" d="M9 9v4a1 1 0 1 1-2 0V9H3a1 1 0 1 1 0-2h4V3a1 1 0 1 1 2 0v4h4a1 1 0 1 1 0 2H9Z" /></symbol>',16,16,!1,void 0)},360646:(e,t,r)=>{r.d(t,{Icon16HistoryBackwardOutline:()=>o});var o=(0,r(825028).makeIcon)("Icon16HistoryBackwardOutline","history_backward_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="history_backward_outline_16"><path d="M9.828 2.812a5.496 5.496 0 0 0-5.313.935h.735a.75.75 0 1 1 0 1.5H3.137c-.058 0-.139 0-.212-.006a1.003 1.003 0 0 1-.379-.103 1 1 0 0 1-.437-.437 1.003 1.003 0 0 1-.103-.378C2 4.248 2 4.167 2 4.11V2a.75.75 0 0 1 1.5 0v.64a6.997 6.997 0 0 1 10.255 9.345 6.998 6.998 0 0 1-7.553 2.78 7.07 7.07 0 0 1-2.96-1.615.75.75 0 1 1 1.016-1.103 5.571 5.571 0 0 0 2.33 1.268A5.496 5.496 0 0 0 13.5 7.962a5.5 5.5 0 0 0-3.672-5.15ZM7.75 5a.75.75 0 0 1 .75.75v2.473l1.32 1.539a.75.75 0 0 1-1.14.976l-1.5-1.75A.75.75 0 0 1 7 8.5V5.75A.75.75 0 0 1 7.75 5Z" /></symbol>',16,16,!1,void 0)},455321:(e,t,r)=>{r.d(t,{Icon16ListPlayOutline:()=>o});var o=(0,r(825028).makeIcon)("Icon16ListPlayOutline","list_play_outline_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16" id="list_play_outline_16"><path fill="currentColor" fill-rule="evenodd" d="M2 3.75A.75.75 0 0 1 2.75 3h10.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 3.75Zm0 8.5a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75ZM2 8a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5A.75.75 0 0 1 2 8Zm12.684 3.036a.625.625 0 0 0 0-1.086L9.947 7.085A.632.632 0 0 0 9 7.626v5.748c0 .481.526.782.947.541l4.737-2.879Z" /></symbol>',16,16,!1,void 0)},309078:(e,t,r)=>{r.d(t,{Icon28ListPlayOutline:()=>o});var o=(0,r(825028).makeIcon)("Icon28ListPlayOutline","list_play_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="list_play_outline_28"><g fill="currentColor"><path d="M12.998 18a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zm0-6a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zM22 6a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zM24.994 18.131a1 1 0 0 1 0 1.738l-6.48 3.995c-.675.386-1.518-.097-1.518-.869v-7.99c0-.773.843-1.255 1.517-.87z" /></g></symbol>',28,28,!1,void 0)},108679:(e,t,r)=>{var o=r(121296),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function l(e){return o.isMemo(e)?s:i[e.$$typeof]||a}i[o.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[o.Memo]=s;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,g=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,o){if("string"!=typeof r){if(p){var a=g(r);a&&a!==p&&e(t,a,o)}var s=d(r);u&&(s=s.concat(u(r)));for(var i=l(t),S=l(r),h=0;h<s.length;++h){var v=s[h];if(!(n[v]||o&&o[v]||S&&S[v]||i&&i[v])){var m=_(r,v);try{c(t,v,m)}catch(e){}}}}return t}},396103:(e,t)=>{var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,i=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,_=r?Symbol.for("react.forward_ref"):60112,g=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,S=r?Symbol.for("react.memo"):60115,h=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,m=r?Symbol.for("react.fundamental"):60117,f=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function C(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case d:case u:case n:case i:case s:case g:return e;default:switch(e=e&&e.$$typeof){case c:case _:case h:case S:case l:return e;default:return t}}case a:return t}}}function y(e){return C(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=l,t.Element=o,t.ForwardRef=_,t.Fragment=n,t.Lazy=h,t.Memo=S,t.Portal=a,t.Profiler=i,t.StrictMode=s,t.Suspense=g,t.isAsyncMode=function(e){return y(e)||C(e)===d},t.isConcurrentMode=y,t.isContextConsumer=function(e){return C(e)===c},t.isContextProvider=function(e){return C(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return C(e)===_},t.isFragment=function(e){return C(e)===n},t.isLazy=function(e){return C(e)===h},t.isMemo=function(e){return C(e)===S},t.isPortal=function(e){return C(e)===a},t.isProfiler=function(e){return C(e)===i},t.isStrictMode=function(e){return C(e)===s},t.isSuspense=function(e){return C(e)===g},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===u||e===i||e===s||e===g||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===S||e.$$typeof===l||e.$$typeof===c||e.$$typeof===_||e.$$typeof===m||e.$$typeof===f||e.$$typeof===E||e.$$typeof===v)},t.typeOf=C},121296:(e,t,r)=>{e.exports=r(396103)},441143:e=>{e.exports=function(e,t,r,o,a,n,s,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,o,a,n,s,i],d=0;(l=new Error(t.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},108830:()=>{},769353:(e,t,r)=>{r.d(t,{default:()=>o});const o={app:"App-module__app--eKZXI",searchContainer:"App-module__searchContainer--GQKpV",search:"App-module__search--LDipp"}},263758:(e,t,r)=>{r.d(t,{default:()=>o});const o={root:"SearchResults-module__root--Mwfk1",scroll:"SearchResults-module__scroll--bMqpg"}},126298:(e,t,r)=>{r.d(t,{default:()=>o});const o={spinner:"Spinner-module__spinner--dpWRC"}},594216:(e,t,r)=>{r.d(t,{default:()=>o});const o={controlIcon:"VideoCardControls-module__controlIcon--VnSlP"}},929804:(e,t,r)=>{var o=r(14890).compose;t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o:o.apply(null,arguments)}},180833:(e,t,r)=>{var o=r(210929),a=r(774462);a.$selectedIndex.reset(a.fireResetSelectionIndex),a.$itemsIndex.reset(a.fireResetItemsIndex),(0,o.sample)({clock:[a.fireUpSelectionIndex,a.fireDownSelectionIndex],fn:()=>!1,target:a.$isMouseActive}),(0,o.sample)({clock:a.fireSetSelectionIndexByItem,fn:()=>!0,target:a.$isMouseActive}),(0,o.sample)({clock:a.fireSetSelectionIndexByItem,source:a.$itemsIndex,fn:(e,t)=>e.findIndex((e=>e.id===t))||-1,target:a.$selectedIndex}),(0,o.sample)({clock:a.fireDownSelectionIndex,source:{itemsIndex:a.$itemsIndex,selectedIndex:a.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?(t+1)%e.length:-1,target:a.$selectedIndex}),(0,o.sample)({clock:a.fireUpSelectionIndex,source:{itemsIndex:a.$itemsIndex,selectedIndex:a.$selectedIndex},fn:({itemsIndex:e,selectedIndex:t})=>e.length?t-1<0?e.length-1:t-1:-1,target:a.$selectedIndex}),(0,o.sample)({clock:a.fireSetItemIndex,source:a.$itemsIndex,fn:(e,t)=>{if(null===t)return[];const r=[...e],o=r.findIndex((e=>e.id===t.id));return-1!==o&&(r[o]=t),r.push(t),r},target:a.$itemsIndex}),(0,o.sample)({clock:a.$selectedIndex,source:{selectedItemIndex:a.$selectedItemIndex,itemsIndex:a.$itemsIndex},filter:({selectedItemIndex:e,itemsIndex:t},r)=>{var o,a;return(null==(o=t[r]||0===(null==t||null==(a=t[r])?void 0:a.id)?t[r]:null)?void 0:o.id)!==(null==e?void 0:e.id)},fn:({itemsIndex:e},t)=>{var r;return e[t]||0===(null==e||null==(r=e[t])?void 0:r.id)?e[t]:null},target:a.$selectedItemIndex})},237421:(e,t,r)=>{var o,a,n,s=r(434788),i=r(785893),l=r(973935),c=r(54413),d=r(421553),u=r(293579),_=r(426848),g=r(824346),p=r(192220),S=r(127822);(null==(o=window.vk)||null==(a=o.pe)?void 0:a.static_manager_dynamic_imports)&&(null==(n=window.vk)?void 0:n.stDomain)&&(r.p=window.vk.stDomain+"/dist/"),window.searcher=c.searcher,window.iSearch=c.iSearch,window.searchActions=d.searchActions,window.slideShow=d.slideShow,window.slideHide=d.slideHide,(0,u.registerReactApplication)("SearchCatalogSuggester",(e=>{const t=e?(0,s._)({},e):null;t&&!t.triggers&&(t.triggers=(0,S.getTriggersMap)(t.type));const r=(0,u.getReactRootEl)("SearchCatalogSuggester");r&&l.render((0,i.jsx)(_.SearchCatalogSuggesterRoot,{initOptions:t}),r)})),(0,u.registerReactApplication)("SearchVideoCatalog",(()=>{const e=(0,u.getReactRootEl)("SearchVideoCatalog");e&&l.render((0,i.jsx)(g.SearchVideoCatalog,{}),e)})),(0,u.registerReactApplication)("TopSearch",(()=>{const e=(0,u.getReactRootEl)("TopSearch");e&&l.render((0,i.jsx)(p.SearchTopRoot,{}),e)}));try{window.stManager.done(window.jsc("web/search.js"))}catch(e){}},896177:(e,t,r)=>{r.d(t,{Catalog:()=>c});var o=r(434788),a=r(785893),n=r(488220),s=r(869036),i=r(193452),l=r(539791);const c=({sections:e})=>(0,a.jsx)(l.CatalogLogProvider,{collectClick:i.searchStatsCollector.logEvent,collectView:i.searchViewStatCollector.logEvent,children:e.map((({blocks:e})=>{if(!e)return null;const t=[];let r=[];for(let d=0;d<(null==e?void 0:e.length);++d){const u=e[d],_=e[d+1];if(_&&u.layout.name===_.layout.name&&_.data_type===s.ECatalogBlockDataType.VIDEOS){var i,l,c;r=r.length?[...r,...null!=(i=_.videos_ids)?i:[]]:[...null!=(l=u.videos_ids)?l:[],...null!=(c=_.videos_ids)?c:[]];continue}const g=(0,n.getBlockByLayout)(u.layout);t.push((0,a.jsx)(g,(0,o._)({},u,{videos_ids:r.length?r:u.videos_ids}),u.id)),r=[]}return t}))})},395941:(e,t,r)=>{r.d(t,{HeaderCompact:()=>a});var o=r(785893);const a=e=>{const{layout:t}=e;return(0,o.jsxs)("div",{className:"VideoSubheader ",children:[(0,o.jsx)("div",{className:"VideoSubheader__title",children:(0,o.jsx)("div",{className:"VideoSubheader__titleText js-video-subtitle",children:t.title})}),(0,o.jsx)("div",{className:"VideoSubheader__actions"})]})}},817890:(e,t,r)=>{r.d(t,{HeaderCompact:()=>o.HeaderCompact});var o=r(395941)},601546:(e,t,r)=>{r.d(t,{LargeList:()=>n});var o=r(785893),a=r(488220);const n=e=>{const t=(0,a.extractItemsIds)(e),r=(0,a.getBlockComponentByDataType)(e.data_type);return(0,o.jsx)("div",{className:"video_items_list _video_search_global_videos_list VideoGrid",children:t.map((e=>(0,o.jsx)(r,{id:e},e)))})}},360451:(e,t,r)=>{r.d(t,{LargeList:()=>o.LargeList});var o=r(601546)},109920:(e,t,r)=>{r.d(t,{Placeholder:()=>i});var o=r(785893),a=r(667294),n=r(77392),s=r(573414);const i=({placeholder_ids:e})=>{const{placeholders:t}=(0,a.useContext)(s.CatalogContext);return(0,o.jsx)(o.Fragment,{children:null==e?void 0:e.map((e=>{const r=t.find((({id:t})=>t===e));if(void 0===r)return null;const{title:a,text:s}=r;return(0,o.jsx)(n.VideoPlaceholder,{text:s,title:a},e)}))})}},92863:(e,t,r)=>{r.d(t,{Placeholder:()=>o.Placeholder});var o=r(109920)},283781:(e,t,r)=>{r.d(t,{Playlist:()=>E});var o=r(434788),a=r(785893),n=r(139654),s=r(667294),i=r(573414),l=r(999128),c=r(659397),d=r(485114),u=r(552248),_=r(309078),g=r(884200),p=r(650004),S=r(373838),h=r(931917),v=r(607714),m=r(494385),f=r(140157);const E=({id:e})=>{const[t,r]=e.split("_"),{albums:E,groups:C,profiles:y}=(0,s.useContext)(i.CatalogContext),w=h.Ranges.isGroupId(+t)?C.find((({id:e})=>e===-t)):y.find((({id:e})=>e===+t)),b=(0,v.getOwnerAvatar)(w),T=E.find((({id:e,owner_id:o})=>e===+r&&o===+t)),I=(0,d.useWindowWidth)(),k=(0,s.useMemo)((()=>(0,c.getPhotoSize)((null==T?void 0:T.image)||[],(0,u.getImageMinWidth)(I))),[I]);if(!T)return null;const A={attrs:T.is_system?{nodrag:"1"}:{}};console.log("album",T),console.log("thumbImage",k);const R=(0,n.getPlaylistURL)(+t,+r);return(0,a.jsxs)("div",(0,o._)({className:"VideoCard VideoCard--playlist js-video_playlist_item ui_gallery_item",id:`video_playlist_item_${r}`,"data-id":r,"data-name":e},A.attrs,{children:[(0,a.jsx)("a",{className:"VideoCard__thumbLink video_item__thumb_link",href:R,"data-playlist-id":T.id,"data-id":"todo_video_raw_id","data-task-click":"Video/show_video",onClick:e=>l.Video.checkClickEvent(e),children:(0,a.jsxs)("div",{className:"VideoCard__thumbWrapper video_item_thumb_wrap",children:[(0,a.jsx)("div",{className:"VideoCard__thumb",children:k?(0,a.jsx)("img",{src:k.url,loading:"lazy",className:"VideoCard__thumbImg",alt:T.title}):(0,a.jsx)(_.Icon28ListPlayOutline,{})}),(0,a.jsxs)("div",{className:"VideoCard__controls video_item_controls",children:[(0,a.jsx)(p.OverlayWithControls,{}),(0,a.jsx)("div",{className:"VideoCard__private",children:(0,a.jsx)(g.Icon12Lock,{})}),(0,a.jsx)("div",{className:"VideoCard__label",children:(0,a.jsx)("span",{className:"VideoCard__labelItem",children:T.count})})]}),(0,a.jsx)(S.Placeholder,{})]})}),(0,a.jsxs)("div",{className:"VideoCard__info",children:[(0,a.jsx)(m.OwnerIcon,{ownerIcon:b}),(0,a.jsxs)("div",{className:"VideoCard__infoContent",children:[(0,a.jsx)("a",{className:"VideoCard__title",href:R,"data-task-mouseover":"Video/check_title",children:T.title}),(0,a.jsx)("div",{className:"VideoCard__additionalInfo",children:(0,f.formatDateTime)(T.updated_time)})]})]})]}))}},347181:(e,t,r)=>{r.d(t,{OverlayWithControls:()=>s});var o=r(785893),a=r(300993),n=r(29271);const s=()=>(0,o.jsxs)("div",{className:"VideoCard__controlsOverlay",children:[(0,o.jsx)("div",{className:"VideoCard__controlsOverlayIcon",children:(0,o.jsx)(a.Icon24Play,{})}),(0,o.jsx)("div",{className:"VideoCard__controlsOverlayText",children:n.getLang("video_play_all")})]})},650004:(e,t,r)=>{r.d(t,{OverlayWithControls:()=>o.OverlayWithControls});var o=r(347181)},92929:(e,t,r)=>{r.d(t,{OwnerIcon:()=>n});var o=r(785893),a=r(455321);const n=({ownerIcon:e})=>(0,o.jsx)("div",{className:"VideoCard__icon",children:e?(0,o.jsx)("img",{src:e,loading:"lazy",className:"VideoCard__iconImg"}):(0,o.jsx)(a.Icon16ListPlayOutline,{})})},494385:(e,t,r)=>{r.d(t,{OwnerIcon:()=>o.OwnerIcon});var o=r(92929)},162763:(e,t,r)=>{r.d(t,{Playlist:()=>o.Playlist});var o=r(283781)},492315:(e,t,r)=>{r.d(t,{Slider:()=>n});var o=r(785893),a=r(488220);const n=e=>{const t=(0,a.extractItemsIds)(e),r=(0,a.getBlockComponentByDataType)(e.data_type);return(0,o.jsx)("div",{className:"video_items_list _video_search_promo_albums_list VideoGrid VideoGrid--oneRow",id:"video_search_promo_albums_list",children:t.map((e=>(0,o.jsx)(r,{id:e},e)))})}},787408:(e,t,r)=>{r.d(t,{Slider:()=>o.Slider});var o=r(492315)},55254:(e,t,r)=>{r.d(t,{Video:()=>D});var o=r(434788),a=r(785893),n=r(667294),s=r(573414),i=r(466570),l=r(659397),c=r(485114),d=r(552248),u=r(999128),_=r(973417),g=r(928584),p=r(81570),S=r(364913),h=r(913047),v=r(874185),m=r(540190),f=r(688007),E=r(29271),C=r(243031),y=r(519979),w=r(358493),b=r(775701),T=r(931917),I=r(539791),k=r(957973),A=r(168365),R=r(667346),O=r(839470),x=r(584356),V=r(327038);const D=({id:e})=>{var t,r;const[D,P]=e.split("_"),L=(0,I.useCollectClick)(),{videos:N,groups:j,profiles:M}=(0,n.useContext)(s.CatalogContext),[H,q]=(0,n.useState)((()=>N.find((({id:e,owner_id:t})=>e===Number(P)&&t===Number(D))))),F=(0,A.getVideoUrl)(Number(D),Number(P)),[B,G]=(0,n.useState)(!1),U=T.Ranges.isGroupId(Number(D))?j.find((({id:e})=>e===-1*Number(D))):M.find((({id:e})=>e===Number(D))),$=(0,c.useWindowWidth)(),W=(0,n.useMemo)((()=>{var e;const t=null!=(e=null==H?void 0:H.image)?e:[];let r=t.filter((e=>!e.with_padding));return r.length||(r=t),(0,l.getPhotoSize)(r,(0,d.getImageMinWidth)($))}),[$]),[Q,K]=(0,n.useState)(!0),Y=()=>{const e=null==H?void 0:H.added;e?(q((0,o._)({},H,{added:0})),(0,f.deleteVideo)({target_id:window.vk.id,owner_id:Number(D)||0,video_id:Number(P)||0}).catch((()=>{q((0,o._)({},H,{added:1}))}))):(q((0,o._)({},H,{added:1})),(0,f.addVideo)({owner_id:Number(D),video_id:Number(P),target_id:window.vk.id}).catch((()=>{q((0,o._)({},H,{added:0}))})).finally((()=>{window.tooltips&&window.tooltips.destroyAll()}))),L({action:e?k.SearchClickActionMap.REMOVE_FROM_ME:k.SearchClickActionMap.ADD_TO_ME,track_code:null==H?void 0:H.track_code,type:k.EventItemType.VIDEO})},z=(0,R.useRefLogView)(k.EventItemType.VIDEO,null==H?void 0:H.track_code),Z=()=>{if(!D)return;const e=null==H?void 0:H.is_favorite;if(e)q((0,o._)({},H,{is_favorite:!1})),(0,f.removeVideoFromFave)({owner_id:Number(D),id:Number(P)}).catch((()=>{q((0,o._)({},H,{is_favorite:!0}))}));else{q((0,o._)({},H,{is_favorite:!0}));const e=(0,E.langLink)("/video/bookmarks",E.getLang("fave_video_added"));(0,x.showSnackbar)({text:e}),(0,f.addVideoToFave)({owner_id:Number(D),id:Number(P)}).catch((()=>{q((0,o._)({},H,{is_favorite:!1}))}))}L({action:e?k.SearchClickActionMap.UNFAVE:k.SearchClickActionMap.FAVE,track_code:null==H?void 0:H.track_code,type:k.EventItemType.VIDEO})};if(void 0===H)return null;var J;const X=null!=(J=null==(t=H.trailer)?void 0:t.mp4_360)?J:"",ee=(0,i.getVideoClasses)(H,e),te=H.restriction;let re=0;H.viewed_duration&&H.duration&&(re=100*H.viewed_duration/H.duration);const oe=H.duration?(0,l.formatDuration)(H.duration):"";var ae,ne;const se=(0,E.langReplace)(E.getLang("video_aria_preview"),{duration:oe,restriction:null!=(ae=null==(r=H.restriction)?void 0:r.title)?ae:"",title:null!=(ne=H.title)?ne:""}),ie=H.viewed_duration?(0,i.getPlayFromByDuration)(H.viewed_duration):"",le=t=>{if(u.Video.checkClickEvent(t))return!0;if(t.preventDefault(),window.cur.cancelClick)return void(window.cur.cancelClick=!1);if(window.cur.chooseVideoMedia)return window.cur.chooseVideoMedia(t.target,e);let r;!r&&window.Video&&window.Video.isGlobalSearchMode()&&window.Video.shouldShowSearchInPlaylistWithSearch()&&(r=window.Video.VIDEO_GLOBAL_SEARCH_TYPE),L({action:k.SearchClickActionMap.TAP,track_code:H.track_code,type:k.EventItemType.VIDEO}),u.Video.show(t,e,{autoplay:1,queue:0,playlistId:r,playFrom:ie,addParams:{track_code:H.track_code}},t.target)};if((0,O.partConfigEnabled)("video_showcase_search_vkcomkit_videocards")){const e=[];H.can_add_to_faves&&e.push({onClick:Z,children:H.is_favorite?E.getLang("global_remove_from_bookmarks"):E.getLang("global_add_to_bookmarks"),component:C.Icon20FavoriteOutline});const t=[{component:H.added?y.Icon16Done:w.Icon16Add,text:H.added?E.getLang("video_remove_from_my_playlist"):E.getLang("video_add_to_my_playlist"),onClick:Y}];return(0,a.jsx)(V.VideoCardWrapper,{video:H,owner:U,controls:t,actions:e,onVideoOpen:le})}return(0,a.jsxs)("div",{ref:z,className:ee,id:`video_item_${e}`,"data-id":e,"data-owner-id":D,"data-video-id":P,"data-thumb":null==W?void 0:W.url,"data-trailer":X,"data-task-mouseenter":"VideoShowcase/play_trailer","data-task-mouseleave":"VideoShowcase/stop_trailer",children:[(0,a.jsx)("a",{className:"VideoCard__thumbLink video_item__thumb_link",href:F,"aria-label":se,onClick:le,children:(0,a.jsxs)("div",{className:"VideoCard__thumbWrapper video_item_thumb_wrap",children:[te?(0,a.jsx)(_.VideoRestriction,{icon:te.icon_name,title:te.title}):null,(0,a.jsxs)("div",{className:"VideoCard__thumb",children:[W&&!B&&(0,a.jsx)("img",{className:(0,l.classNames)("VideoCard__thumbImg","js-video-item-thumb","VideoRestriction__thumb",{VideoRestriction__thumb:Boolean(te)}),"data-thumb":W.url,src:W.url,loading:"lazy",onError:()=>G(!0),alt:H.title}),B&&(0,a.jsx)(b.Icon56VideoOutline,{})]}),(0,a.jsx)("div",{className:"video_thumb_play VideoCard__play"}),X?(0,a.jsx)("video",{className:(0,l.classNames)("VideoCard__trailer",{"VideoCard__trailer--loading":Q}),onLoadedData:()=>K(!1),crossOrigin:"anonymous",src:X,muted:!0,loop:!0}):null,(0,a.jsxs)("div",{className:"VideoCard__controls video_item_controls",children:[(0,a.jsx)("div",{className:"VideoCard__privacyIconWrapper"}),(0,a.jsxs)("div",{className:"VideoCard__label ",children:[H.platform?(0,a.jsx)("span",{className:"VideoCard__labelItem",children:H.platform}):null,H.duration?(0,a.jsx)("span",{className:"VideoCard__labelItem",children:oe}):null]}),(0,a.jsx)("div",{className:"VideoCard__actions video_thumb_actions",children:(0,a.jsx)(g.VideoActions,{video:H,onToggleAdd:Y})}),(0,a.jsx)(m.MediaCheckButton,{videoId:e}),re?(0,a.jsx)("div",{className:"VideoCard__viewedDurationWrapper",children:(0,a.jsx)("div",{className:"VideoCard__viewedDuration",style:{width:`${re}%`}})}):null]})]})}),(0,a.jsxs)("div",{className:"VideoCard__info",children:[(0,a.jsx)(p.Avatar,{owner:U}),(0,a.jsxs)("div",{className:"VideoCard__infoContent",children:[(0,a.jsxs)("div",{className:"VideoCard__titleWrapper",id:`video_card_title_wrapper_${P}`,children:[(0,a.jsx)("a",{className:"VideoCard__title",href:F,"data-queue":"0","data-id":e,"data-task-mouseover":"Video/check_title",onClick:le,children:null==H?void 0:H.title}),(0,a.jsx)(S.MenuToggle,{videoRawId:e})]}),(0,a.jsx)("div",{className:"VideoCard__additionalInfo",children:(0,a.jsx)(h.VideoOwner,{owner:U,ownerId:H.owner_id,trackCode:H.track_code})}),(0,a.jsx)("div",{className:"VideoCard__additionalInfo VideoCard__extendedInfo",children:(0,a.jsx)(v.SubTitle,{video:H})})]})]})]})}},395452:(e,t,r)=>{r.d(t,{Avatar:()=>n});var o=r(785893),a=r(607714);const n=({owner:e})=>{const t=(0,a.getOwnerAvatar)(e);return t.length>0?(0,o.jsx)("div",{className:"VideoCard__avatar VideoCard__avatar--base",style:{backgroundImage:`url(${t})`}}):null}},81570:(e,t,r)=>{r.d(t,{Avatar:()=>o.Avatar});var o=r(395452)},145004:(e,t,r)=>{r.d(t,{MediaCheckButton:()=>n});var o=r(785893),a=r(667294);const n=({videoId:e})=>{const t=(0,a.useRef)(null);return(0,o.jsx)("div",{ref:t,className:"media_check_btn_wrap",onClick:()=>{if(window.cur.chooseVideoMedia&&t.current)return window.cur.chooseVideoMedia(t.current,e,!0)},children:(0,o.jsx)("div",{className:"media_check_btn"})})}},540190:(e,t,r)=>{r.d(t,{MediaCheckButton:()=>o.MediaCheckButton});var o=r(145004)},132602:(e,t,r)=>{r.d(t,{MenuToggle:()=>i});var o=r(785893),a=r(29271),n=r(667294),s=r(432483);const i=({videoRawId:e})=>{const t=(0,n.useRef)(null),r=()=>{var r;null==(r=window.VideoShowcase)||r.showVideoMenu(t.current,e)};return(0,o.jsx)("button",{ref:t,className:"VideoCard__menuToggle",onMouseOver:r,onClick:r,"aria-label":a.getLang("video_additional_options"),children:(0,o.jsx)("div",{className:"VideoCard__menuToggleIcon",children:(0,o.jsx)(s.Icon24MoreHorizontal,{})})})}},364913:(e,t,r)=>{r.d(t,{MenuToggle:()=>o.MenuToggle});var o=r(132602)},316816:(e,t,r)=>{r.d(t,{SubTitle:()=>n});var o=r(785893),a=r(362246);const n=({video:e})=>(0,o.jsxs)(o.Fragment,{children:[e.views&&(0,o.jsx)("span",{className:"VideoCard__extendedInfoView",children:(0,a.getFormattedBigViewsToShortCase)(e.views)}),(0,o.jsxs)("span",{className:"VideoCard__extendedInfoDate",children:[(0,o.jsx)("span",{className:"divider VideoCard__extendedInfoDateDivider"}),e.date&&(0,o.jsx)("span",{className:"VideoCard__extendedInfoUpdated",children:(0,a.getFormattedUpdatedTime)(e.date,!0)})]})]})},874185:(e,t,r)=>{r.d(t,{SubTitle:()=>o.SubTitle});var o=r(316816)},699159:(e,t,r)=>{r.d(t,{VideoActions:()=>l});var o=r(785893),a=r(304680),n=r(519979),s=r(358493),i=r(29271);const l=({video:e,onToggleAdd:t})=>(0,o.jsxs)(o.Fragment,{children:[e.can_edit?(0,o.jsx)("button",{className:"VideoCard__action VideoCard__action--edit","data-task-click":"VideoShowcase/video_edit","data-task-mouseover":"VideoShowcase/show_tooltip","data-task-mouseout":"VideoShowcase/hide_tooltip","data-text":i.getLang("video_edit"),"aria-label":i.getLang("video_edit"),children:(0,o.jsx)("div",{className:"VideoCard__actionIcon",children:(0,o.jsx)(a.Icon16PenOutline,{})})}):null,e.can_add?(0,o.jsxs)("button",{className:"VideoCard__action VideoCard__action--add",onClick:e=>{e.stopPropagation(),e.preventDefault(),t()},"data-task-mouseover":"VideoShowcase/show_add_tooltip","data-task-mouseout":"VideoShowcase/hide_tooltip","data-text-add":i.getLang("video_add_to_my_playlist"),"data-text-added":i.getLang("video_remove_from_my_playlist"),"aria-label":i.getLang("video_add_to_my_playlist"),children:[(0,o.jsx)("div",{className:"VideoCard__actionIcon VideoCard__actionIcon--added",children:(0,o.jsx)(n.Icon16Done,{})}),(0,o.jsx)("div",{className:"VideoCard__actionIcon VideoCard__actionIcon--add",children:(0,o.jsx)(s.Icon16Add,{})})]}):null]})},928584:(e,t,r)=>{r.d(t,{VideoActions:()=>o.VideoActions});var o=r(699159)},753900:(e,t,r)=>{r.d(t,{VideoOwner:()=>c});var o=r(785893),a=r(765069),n=r(295273),s=r(539791),i=r(957973),l=r(508249);const c=({owner:e,trackCode:t,ownerId:r})=>{const c=(0,s.useCollectClick)(),d=e?(0,a.getOwnerUrl)(e):void 0,u=(0,n.getOwnerName)(e);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("a",{onClick:()=>{c({action:i.SearchClickActionMap.OPEN_OWNER,track_code:t,type:i.EventItemType.VIDEO})},href:d,className:"VideoCard__ownerLink",children:u}),Boolean(null==e?void 0:e.verified)&&(0,o.jsx)("a",{href:"/verify",className:"page_verified ",onMouseOver:e=>{(0,l.pageVerifiedTip)(e.currentTarget,{type:1,oid:r})}})]})}},913047:(e,t,r)=>{r.d(t,{VideoOwner:()=>o.VideoOwner});var o=r(753900)},220591:(e,t,r)=>{r.d(t,{VideoRestriction:()=>n});var o=r(785893);const a=e=>"hide_outline"===e?"age":e,n=({icon:e,title:t})=>(0,o.jsx)("div",{className:"VideoRestriction__boxWrap",children:(0,o.jsxs)("div",{className:"VideoRestriction__box",children:[(0,o.jsx)("div",{className:`VideoRestriction__icon VideoRestriction__icon--${a(e)}`}),(0,o.jsx)("div",{className:"VideoRestriction__title",children:t})]})})},973417:(e,t,r)=>{r.d(t,{VideoRestriction:()=>o.VideoRestriction});var o=r(220591)},19445:(e,t,r)=>{r.d(t,{Video:()=>o.Video});var o=r(55254)},466570:(e,t,r)=>{r.d(t,{getPlayFromByDuration:()=>s,getVideoClasses:()=>n});var o=r(659397);const a=e=>["waiting","started"].some((t=>t===e.live_status)),n=(e,t)=>{var r,n;const s=Boolean(e.live_status),i=Boolean(e.platform)&&!s,l=Boolean(e.can_edit),c=Boolean(e.can_add),d=!l,u=!c,_=Boolean(e.content_restricted);return(0,o.classNames)("_video_item",`ge_video_item_${t}`,{video_ext:i,video_active_live:s,video_can_edit:l,video_can_add:c,video_can_delete:!1,video_nap:Boolean(e.no_autoplay),video_added:Boolean(e.added),"VideoCard--private":Boolean(e.is_private),video_no_duration:!Boolean(e.platform)&&!Boolean(e.duration)&&!a(e),video_no_actions:d&&(u||_),video_blocked:_,VideoRestriction:Boolean(e.restriction),"VideoRestriction--small":Boolean(e.restriction),"VideoRestriction--canPreview":Boolean(null==(r=e.restriction)?void 0:r.can_preview),"VideoRestriction--blur":Boolean(null==(n=e.restriction)?void 0:n.blur),"VideoCard--videoAdded":Boolean(e.added)},"VideoCard")},s=e=>{let t="";const r=Math.floor(e/3600);r&&(t+=`${r}h`);const o=Math.floor(e%3600/60);o&&(t+=`${o}m`);const a=e%60;return a&&(t+=`${a}s`),t}},473674:(e,t,r)=>{r.d(t,{VideoPlaceholder:()=>n});var o=r(785893),a=r(775701);const n=({title:e,text:t})=>(0,o.jsxs)("div",{className:"VideoEmptyStub",children:[(0,o.jsx)("div",{className:"VideoEmptyStub__icon",children:(0,o.jsx)(a.Icon56VideoOutline,{})}),(0,o.jsx)("div",{className:"VideoEmptyStub__title",children:e}),(0,o.jsx)("div",{className:"VideoEmptyStub__text",children:t})]})},77392:(e,t,r)=>{r.d(t,{VideoPlaceholder:()=>o.VideoPlaceholder});var o=r(473674)},869036:(e,t,r)=>{r.d(t,{CatalogBlockLayoutName:()=>o,ECatalogBlockDataType:()=>a});const o={HEADER_COMPACT:"header_compact",LARGE_LIST:"large_list",LIST:"list",SLIDER:"slider",PLACEHOLDER_SMALL:"placeholder_small"},a={VIDEOS:"videos",ALBUMS:"albums"}},488220:(e,t,r)=>{r.d(t,{extractItemsIds:()=>u,getBlockByLayout:()=>d,getBlockComponentByDataType:()=>_});var o=r(869036),a=r(817890),n=r(360451),s=r(787408),i=r(19445),l=r(92863),c=r(162763);const d=e=>{switch(e.name){case o.CatalogBlockLayoutName.HEADER_COMPACT:return a.HeaderCompact;case o.CatalogBlockLayoutName.LARGE_LIST:case o.CatalogBlockLayoutName.LIST:return n.LargeList;case o.CatalogBlockLayoutName.SLIDER:return s.Slider;case o.CatalogBlockLayoutName.PLACEHOLDER_SMALL:return l.Placeholder}return()=>null},u=e=>{const{data_type:t}=e;switch(t){case o.ECatalogBlockDataType.VIDEOS:return(null==e?void 0:e.videos_ids)||[];case o.ECatalogBlockDataType.ALBUMS:return(null==e?void 0:e.albums_ids)||[]}return[]},_=e=>{switch(e){case o.ECatalogBlockDataType.VIDEOS:return i.Video;case o.ECatalogBlockDataType.ALBUMS:return c.Playlist}return()=>null}},552311:(e,t,r)=>{r.d(t,{SearchInput:()=>i});var o=r(785893),a=r(667294),n=r(86894),s=r(29271);const i=({onClick:e,onFocus:t,onBlur:r,onInput:i,onKeyDown:l,className:c,inputRef:d,searchQuery:u="",placeholder:_})=>{const[g,p]=(0,a.useState)("");return(0,a.useEffect)((()=>{p(u)}),[u]),(0,o.jsx)(n.Search,{className:c,placeholder:_||s.getLang("global_search"),onClick:t=>{null==e||e(t)},onFocus:e=>{null==t||t(e)},onBlur:e=>{null==r||r(e)},onInput:e=>{const t=e.currentTarget.value||"";p(t),null==i||i(e)},onKeyDown:e=>{null==l||l(e)},getRef:d,value:g})}},690743:(e,t,r)=>{r.d(t,{SearchInput:()=>o.SearchInput});var o=r(552311)},426848:(e,t,r)=>{r.d(t,{SearchCatalogSuggesterRoot:()=>i});var o=r(785893),a=r(50533),n=r(281858),s=r(391345);const i=({initOptions:e})=>(0,o.jsx)(a.Provider,{store:n.suggesterStore,children:(0,o.jsx)(s.SearchForm,{options:e})})},356571:(e,t,r)=>{r.d(t,{Catalog:()=>i});var o=r(434788),a=r(785893),n=r(667294),s=r(166455);const i=({catalog:e})=>{var t;const r=null==e||null==(t=e.sections)?void 0:t.find((({id:t})=>t===(null==e?void 0:e.default_section))),i=(0,s.extractBlocks)(r);return(0,a.jsx)(a.Fragment,{children:i.map((e=>{const t=(0,s.getBlockByLayout)(e);return(0,n.createElement)(t,(0,o._)({},e,{key:e.id}))}))})}},912826:(e,t,r)=>{r.d(t,{HeaderCompact:()=>a});var o=r(785893);const a=e=>(0,o.jsx)("div",{children:(0,o.jsx)("h3",{className:"SuggestionItemsTitle",children:e.layout.title})},e.id)},912562:(e,t,r)=>{r.d(t,{HeaderCompact:()=>o.HeaderCompact});var o=r(912826)},721600:(e,t,r)=>{r.d(t,{SuggesterBlock:()=>i});var o=r(785893),a=r(667294),n=r(596535),s=r(652427);const i=e=>{const{searchQuery:t,recentSuggestions:r,otherSuggestions:i,selectedSuggestion:l,triggerSearch:c,lastQuery:d}=(0,n.useTypedSelector)((e=>{var t;return{searchQuery:e.searchInput.query,catalog:e.catalog.catalog,recentSuggestions:e.suggester.recentSuggests,otherSuggestions:e.suggester.otherSuggests,selectedSuggestion:e.suggester.selectedSuggest,helpSuggest:e.suggester.helpSuggest,triggerSearch:null==(t=e.initOptions.triggers)?void 0:t.triggerSearch,lastQuery:e.catalog.lastQuery}})),u=(0,a.useMemo)((()=>{let t=[...r,...i];return e.suggestions_ids&&(t=t.filter((({id:t=""})=>{var r;return null==e||null==(r=e.suggestions_ids)?void 0:r.includes(t)}))),e.search_suggestions_ids&&(t=t.filter((({id:t=""})=>{var r;return null==e||null==(r=e.search_suggestions_ids)?void 0:r.includes(t)}))),t}),[r,i,t,d,l]);return(0,o.jsx)("div",{className:"SuggesterBlock",children:(0,o.jsx)(s.SuggestionItems,{suggestions:u,selectedId:l,triggerSearch:c})})}},652427:(e,t,r)=>{r.d(t,{SuggestionItems:()=>g});var o=r(785893),a=r(667294),n=r(360646),s=r(195192),i=r(29271),l=r(254362),c=r(331251),d=r(659397),u=r(193452),_=r(957973);const g=({suggestions:e,selectedId:t,triggerSearch:r})=>{const{setSearchQuery:g,hideSuggest:p,deleteRecent:S,search:h,deleteRecentBlock:v}=(0,l.useAction)(),m=(0,a.useCallback)(((e,t="")=>{const o=(0,c.getMainInput)(),a=window.uiSearch.getWrapEl(o);g(t),h(o,a,t,r),p(a),u.searchStatsCollector.logEvent({action:_.SearchClickActionMap.TAP,track_code:e,type:_.EventItemType.SEARCH_SUGGESTION})}),[]),f=(0,a.useCallback)(((t,r,o)=>{t.stopPropagation(),S(o||""),u.searchStatsCollector.logEvent({action:_.SearchClickActionMap.REMOVE_RECENT,track_code:r,type:_.EventItemType.SEARCH_SUGGESTION});1===e.length&&v()}),[e]);return(0,o.jsx)(o.Fragment,{children:e.map((e=>(0,o.jsxs)("div",{className:(0,d.classNames)("SuggestionItemsItem",{"SuggestionItemsItem--selected":t===e.id}),onClick:()=>m((null==e?void 0:e.track_code)||"",e.title),children:[(0,o.jsx)("div",{className:"SuggestionItemsItemIcon",children:"recent"===e.type?(0,o.jsx)(n.Icon16HistoryBackwardOutline,{}):(0,o.jsx)(s.Icon16SearchOutline,{})}),(0,o.jsx)("p",{className:"SuggestionItemsText",children:e.title}),"recent"===e.type?(0,o.jsx)("button",{className:"SuggestionItemsDelete",onClick:t=>f(t,(null==e?void 0:e.track_code)||"",e.id),children:i.getLang("search_web_video_suggester_delete_action")}):null]},e.id)))})}},670446:(e,t,r)=>{r.d(t,{SuggesterBlock:()=>o.SuggesterBlock});var o=r(721600)},118330:(e,t,r)=>{r.d(t,{HeaderCompact:()=>a.HeaderCompact,SuggesterBlock:()=>o.SuggesterBlock});var o=r(670446),a=r(912562)},491434:(e,t,r)=>{r.d(t,{Catalog:()=>o.Catalog,HeaderCompact:()=>a.HeaderCompact,SuggesterBlock:()=>a.SuggesterBlock});var o=r(356571),a=r(118330)},166455:(e,t,r)=>{r.d(t,{extractBlocks:()=>n,getBlockByLayout:()=>s});var o=r(906019),a=r(732292);const n=e=>{var t;return(null==e||null==(t=e.blocks)?void 0:t.length)?e.blocks:[]},s=e=>{const t=e.layout.name,r=e.data_type;switch(t){case o.ESearchCatalogBlockLayoutName.LIST:return r===o.ESearchCatalogBlockDataType.CATALOG_SEARCH_SUGGESTION||r===o.ESearchCatalogBlockDataType.SEARCH_SUGGESTION?a.SuggesterBlock:()=>null;case o.ESearchCatalogBlockLayoutName.HEADER_COMPACT:return a.HeaderCompact;default:return()=>null}}},49593:(e,t,r)=>{r.d(t,{InputHelpSuggest:()=>s});var o=r(785893),a=r(973935),n=r(906019);const s=({helpSuggestStart:e="",helpSuggestEnd:t=""})=>{var r;const s=null==(r=document.querySelector(n.SEARCH_INPUT_ELEMENT_ID))?void 0:r.parentElement;return a.createPortal((0,o.jsxs)("div",{className:"InputHelpSuggest",children:[(0,o.jsx)("span",{className:"InputHelpSuggest__hidden",children:e}),t]}),s)}},947139:(e,t,r)=>{r.d(t,{SearchInput:()=>g});var o=r(785893),a=r(667294),n=r(331251),s=r(254362),i=r(82161),l=r(953908),c=r(906019),d=r(596535),u=r(49593),_=r(858431);const g=({options:e})=>{const{query:t,isWaitingForShow:r,allSuggests:g,selectedSuggestId:p,helpSuggest:S,helpSuggestStart:h,helpSuggestEnd:v,helpTrigger:m,shouldBeClosed:f}=(0,d.useTypedSelector)((e=>({query:e.searchInput.query,isWaitingForShow:e.suggester.isWaitingForShow,allSuggests:e.suggester.allSuggests,selectedSuggestId:e.suggester.selectedSuggest,helpSuggestStart:e.suggester.helpSuggestStart,helpSuggestEnd:e.suggester.helpSuggestEnd,helpSuggest:e.suggester.helpSuggest,helpTrigger:e.suggester.helpTrigger,shouldBeClosed:e.suggester.shouldBeClosed}))),{initOptions:E,setSearchQuery:C,startShowingSuggest:y,showSuggest:w,hideSuggest:b,chooseAbove:T,chooseBelow:I,search:k,resetSelectedSuggest:A,resetHelpSuggest:R,triggerHelpSuggest:O,resetTempSuggesterData:x,resetClosedSuggesterStatus:V}=(0,s.useAction)(),[D,P]=(0,a.useState)((0,n.getQueryFromNav)()),L=(0,_.useDebounce)(D,c.DEBOUNCE_TIME);(0,a.useEffect)((()=>{A(),C(L)}),[L]);const N=(0,a.useCallback)((t=>{const r=t.target,o=window.uiSearch.getWrapEl(r),a=(0,i.trim)(r.value)?r.value:"";var n;if(a||((null==e?void 0:e.allowFiltersForEmpty)||window.uiSearch.removeAllFilters(r),window.uiSearch.hideProgress(r)),null==e?void 0:e.useInstantSearch)return x(),void k(r,o,a,null==e||null==(n=e.triggers)?void 0:n.triggerSearch);const s=t;[l.KEY.UP,l.KEY.DOWN,l.KEY.RIGHT,l.KEY.LEFT,l.KEY.SPACE].includes(s.keyCode)||P(a)}),[t,S,e]),j=(0,a.useCallback)((t=>{const r=(0,n.getMainInput)(),o=window.uiSearch.getWrapEl(r),a=(0,i.trim)(r.value)?r.value:"";switch(t.keyCode){case l.KEY.ENTER:var s;k(r,o,a,null==e||null==(s=e.triggers)?void 0:s.triggerSearch),b(o),x();break;case l.KEY.ESC:r.blur(),b(o),x();break;case l.KEY.UP:T(),r.setSelectionRange(r.value.length,r.value.length);break;case l.KEY.DOWN:I();break;case l.KEY.RIGHT:O();break;case l.KEY.TAB:case l.KEY.SHIFT:case l.KEY.CTRL:case l.KEY.ALT:case l.KEY.META_LEFT:case l.KEY.META_RIGHT:break;default:R()}}),[]),M=(0,a.useCallback)((()=>{var t;const r=document.querySelector(c.SEARCH_INPUT_ELEMENT_ID),o=window.uiSearch.getWrapEl(r),a=(0,i.trim)(r.value)?(0,i.trim)(r.value):"";x(),k(r,o,a,null==e||null==(t=e.triggers)?void 0:t.triggerSearch),b(o)}),[t]),H=(0,a.useCallback)((e=>{var t;const r=e.target,o=window.uiSearch.getWrapEl(document.querySelector(c.SEARCH_INPUT_ELEMENT_ID));(null==o||null==(t=o.classList)?void 0:t.contains(c.SEARCH_SUGGESTER_OPEN_CLASS))&&(r.closest(c.SEARCH_INPUT_ELEMENT_ID)||r.closest(".SearchCatalogSuggester")||r.closest(".ui_search_reset_button")||(x(),b(o)))}),[]),q=(0,a.useCallback)((e=>{const t=e,r=(null==t?void 0:t.ctrlKey)||(null==t?void 0:t.metaKey);if([l.KEY.ENTER,l.KEY.ESC].includes(t.keyCode)||r)return;switch(t.keyCode){case l.KEY.TAB:case l.KEY.SHIFT:case l.KEY.CTRL:case l.KEY.ALT:case l.KEY.META_LEFT:case l.KEY.META_RIGHT:return}const o=e.target,a=window.uiSearch.getWrapEl(o);!f||g.length||(null==o?void 0:o.value)?(V(),w(a)):y()}),[f,g]),F=(0,a.useCallback)((()=>{S&&C(S)}),[S]),B=(0,a.useCallback)((e=>{x();const t=e.target,r=window.uiSearch.getWrapEl(t);!f||g.length||(null==t?void 0:t.value)?(V(),w(r)):y(),C(""),y()}),[e,f,g]),G=(0,a.useCallback)((()=>{x(),C("")}),[]);return(0,a.useEffect)((()=>{e&&E(e);const t=(0,n.getMainInput)(),r=window.uiSearch.getWrapEl(t).querySelector(".ui_search_button_search"),o=[...document.querySelectorAll(".MenuList__item")];return(null==t?void 0:t.value)&&C(t.value),(0,l.addEvent)(t,"input change keyup valueChanged refresh",N),(0,l.addEvent)(t,"keydown",j),(0,l.addEvent)(r,"click",M),(0,l.addEvent)(window,"mousedown",H),(null==o?void 0:o.length)&&o.map((e=>(0,l.addEvent)(e,"click",G))),()=>{(0,l.removeEvent)(t,"input change keyup valueChanged refresh",N),(0,l.removeEvent)(t,"keydown",j),(0,l.removeEvent)(r,"click",M),(0,l.removeEvent)(window,"mousedown",H),(null==o?void 0:o.length)&&o.map((e=>(0,l.removeEvent)(e,"click",G)))}}),[]),(0,a.useEffect)((()=>{e&&E(e);const t=(0,n.getMainInput)(),r=window.uiSearch.getWrapEl(t).querySelector(".ui_search_reset_button");return(null==t?void 0:t.value)&&C(t.value),(0,l.addEvent)(t,"click keyup keydown",q),(0,l.addEvent)(r,"click",B),()=>{(0,l.removeEvent)(t,"click keyup keydown",q),(0,l.removeEvent)(r,"click",B)}}),[e,f]),(0,a.useEffect)((()=>{const e=(0,n.getMainInput)(),t=window.uiSearch.getWrapEl(e);r&&(g.length||(null==e?void 0:e.value))&&w(t)}),[e,g,t,r]),(0,a.useEffect)((()=>{const e=(0,n.getMainInput)();e&&t!==e.value&&(e.value=t,e.setSelectionRange(e.value.length,e.value.length))}),[t]),(0,a.useEffect)((()=>{const e=g.find((({id:e})=>e===p));(null==e?void 0:e.title)&&C(e.title)}),[p]),(0,a.useEffect)((()=>{F()}),[m]),(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.InputHelpSuggest,{helpSuggestStart:h||"",helpSuggestEnd:v||""})})}},174078:(e,t,r)=>{r.d(t,{SearchInput:()=>o.SearchInput});var o=r(947139)},133815:(e,t,r)=>{r.d(t,{Suggester:()=>u});var o=r(785893),a=r(667294),n=r(254362),s=r(732292),i=r(596535),l=r(795558),c=r(331251),d=r(906019);const u=({options:e})=>{const{catalog:t,searchQuery:r,isOpen:u,canFetch:_,allSuggests:g,lastQuery:p,shouldBeClosed:S,isWaitingForShow:h}=(0,i.useTypedSelector)((e=>({catalog:null==e?void 0:e.catalog.catalog,searchQuery:null==e?void 0:e.searchInput.query,isOpen:null==e?void 0:e.suggester.isOpen,isWaitingForShow:null==e?void 0:e.suggester.isWaitingForShow,allSuggests:e.suggester.allSuggests,canFetch:!e.suggester.selectedSuggest,lastQuery:e.catalog.lastQuery,shouldBeClosed:e.suggester.shouldBeClosed}))),{fetchCatalog:v,setSuggestions:m,setHelpSuggest:f,resetDeletedSuggest:E,hideSuggest:C}=(0,n.useAction)();return(0,a.useEffect)((()=>{t&&m(t)}),[t]),(0,a.useEffect)((()=>{_&&(u||h)&&r!==p&&(E(),v({q:r}))}),[e,r,u,h,p,_]),(0,a.useEffect)((()=>{f(r)}),[r,g]),(0,a.useEffect)((()=>{if(r){const e=(0,c.getMainInput)(),t=window.uiSearch.getWrapEl(e);(0,l.toggleClass)(t,d.SEARCH_EMPTY_FIELD_CLASS,!r)}}),[]),(0,a.useEffect)((()=>{if(S){const e=(0,c.getMainInput)(),t=window.uiSearch.getWrapEl(e);(null==e?void 0:e.value)||C(t)}}),[e,S]),u?(0,o.jsx)("div",{className:"SearchCatalogSuggester",children:(0,o.jsx)(s.Catalog,{catalog:null==t?void 0:t.catalog})}):null}},485211:(e,t,r)=>{r.d(t,{Suggester:()=>o.Suggester});var o=r(133815)},732292:(e,t,r)=>{r.d(t,{Catalog:()=>a.Catalog,HeaderCompact:()=>a.HeaderCompact,SearchInput:()=>n.SearchInput,Suggester:()=>o.Suggester,SuggesterBlock:()=>a.SuggesterBlock});var o=r(485211),a=r(491434),n=r(174078)},906019:(e,t,r)=>{r.d(t,{API_GET_VIDEO_SEARCH:()=>d,API_REMOVE_RESENT_QUERY:()=>c,DEBOUNCE_TIME:()=>l,ESearchCatalogBlockDataType:()=>_,ESearchCatalogBlockLayoutName:()=>u,IMMEDIATELY_TIMER:()=>i,LAT:()=>g,RUS:()=>p,SEARCH_EMPTY_FIELD_CLASS:()=>n,SEARCH_INPUT_ELEMENT_ID:()=>a,SEARCH_SUGGESTER_OPEN_CLASS:()=>s,SEARCH_WRAPPER_ELEMENT_ID:()=>o});const o="video_search_input_wrapper",a="#video_search_input",n="ui_search_field_empty",s="VideoSearchInput__withNewSuggester--open",i=0,l=200,c="search.removeVideoSearchRecentQuery",d="catalog.getVideoSearch";var u,_;!function(e){e.LIST="list",e.HEADER_COMPACT="header_compact"}(u||(u={})),function(e){e.CATALOG_SEARCH_SUGGESTION="catalog_search_suggestion",e.SEARCH_SUGGESTION="search_suggestions"}(_||(_={}));const g="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ ",p="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ "},301789:(e,t,r)=>{r.d(t,{SearchForm:()=>n});var o=r(785893),a=r(732292);const n=({options:e})=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.SearchInput,{options:e}),(0,o.jsx)(a.Suggester,{options:e})]})},391345:(e,t,r)=>{r.d(t,{SearchForm:()=>o.SearchForm});var o=r(301789)},254362:(e,t,r)=>{r.d(t,{useAction:()=>s});var o=r(50533),a=r(14890),n=r(302644);const s=()=>{const e=(0,o.useDispatch)();return(0,a.bindActionCreators)(n.ActionCreators,e)}},858431:(e,t,r)=>{r.d(t,{useDebounce:()=>a});var o=r(667294);const a=(e="",t=0)=>{const[r,a]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const r=setTimeout((()=>{a(e)}),t);return()=>{clearTimeout(r)}}),[e]),r}},596535:(e,t,r)=>{r.d(t,{useTypedSelector:()=>o});const o=r(50533).useSelector},596654:(e,t,r)=>{r.r(t),r.d(t,{deleteRecentBlock:()=>c,fetchCatalog:()=>l});var o=r(11010),a=r(434788),n=r(599809),s=r(861928),i=r(906019);const l=e=>(0,o._)((function*(t){var r;t({type:s.CatalogActions.START_LOADING,payload:e.q||""});const o=yield(0,n.api)(i.API_GET_VIDEO_SEARCH,(0,a._)({},e,{need_blocks:1,show_suggests:1}));(null==(r=o.suggestions)?void 0:r.length)&&o.suggestions[0]&&(window.cur.videoSearchTrackCodeForQID=o.suggestions[0].track_code||""),t({type:s.CatalogActions.FETCH,payload:o}),t({type:s.CatalogActions.STOP_LOADING})})),c=()=>e=>{e({type:s.CatalogActions.REMOVE_RECENT})}},302644:(e,t,r)=>{r.d(t,{ActionCreators:()=>l});var o=r(434788),a=r(217192),n=r(596654),s=r(129324),i=r(366853);const l=(0,o._)({},a,n,s,i)},217192:(e,t,r)=>{r.r(t),r.d(t,{initOptions:()=>a});var o=r(861928);const a=e=>t=>{t({type:o.InitOptionsActionType.INIT,payload:e})}},129324:(e,t,r)=>{r.r(t),r.d(t,{search:()=>i,setSearchQuery:()=>l});var o=r(326646),a=r(82161),n=r(795558),s=r(906019);const i=(e,t,r="",i)=>l=>{if(i){const c=(0,a.trim)(r)?(0,a.trim)(r):"";(0,n.toggleClass)(t,s.SEARCH_EMPTY_FIELD_CLASS,!c),null==i||i.call(e,c),l({type:o.SearchInputActions.SEARCH,payload:c})}},l=e=>t=>{t({type:o.SearchInputActions.SET_QUERY,payload:e})}},366853:(e,t,r)=>{r.r(t),r.d(t,{chooseAbove:()=>_,chooseBelow:()=>g,deleteRecent:()=>u,hideSuggest:()=>l,resetClosedSuggesterStatus:()=>c,resetDeletedSuggest:()=>S,resetHelpSuggest:()=>m,resetSelectedSuggest:()=>p,resetTempSuggesterData:()=>f,setHelpSuggest:()=>h,setSuggestions:()=>d,showSuggest:()=>i,startShowingSuggest:()=>s,triggerHelpSuggest:()=>v});var o=r(861928),a=r(599809),n=r(906019);const s=()=>e=>{e({type:o.SuggesterActions.START_SHOW})},i=e=>t=>{(null==e?void 0:e.classList.contains(n.SEARCH_SUGGESTER_OPEN_CLASS))||(e.classList.add(n.SEARCH_SUGGESTER_OPEN_CLASS),t({type:o.SuggesterActions.SHOW,payload:e}))},l=e=>t=>{var r;null==e||null==(r=e.classList)||r.remove(n.SEARCH_SUGGESTER_OPEN_CLASS),t({type:o.SuggesterActions.HIDE})},c=()=>e=>{e({type:o.SuggesterActions.RESET_CLOSED_STATUS})},d=e=>t=>{t({type:o.SuggesterActions.SET_SUGGESTS,payload:{suggests:(null==e?void 0:e.suggestions)||[]}})},u=e=>t=>{e&&((0,a.api)(n.API_REMOVE_RESENT_QUERY,{query_id:e}),t({type:o.SuggesterActions.DELETE_RECENT,payload:e}))},_=()=>e=>{e({type:o.SuggesterActions.CHOOSE_ABOVE})},g=()=>e=>{e({type:o.SuggesterActions.CHOOSE_BELOW})},p=()=>e=>{e({type:o.SuggesterActions.RESET_SELECTED})},S=()=>e=>{e({type:o.SuggesterActions.RESET_DELETED})},h=(e="")=>t=>{t({type:o.SuggesterActions.SET_HELP_SUGGEST,payload:e})},v=()=>e=>{e({type:o.SuggesterActions.TRIGGER_HELP_SUGGEST})},m=()=>e=>{e({type:o.SuggesterActions.RESET_HELP_SUGGEST})},f=()=>e=>{e({type:o.SuggesterActions.RESET_TEMP_SUGGESTER_DATA})}},281858:(e,t,r)=>{r.d(t,{suggesterStore:()=>i});var o=r(14890),a=r(753894),n=r(213435);const s=r(929804).composeWithDevTools((0,o.applyMiddleware)(a.default)),i=(0,o.createStore)(n.rootReducer,s)},619780:(e,t,r)=>{r.d(t,{catalogReducer:()=>i});var o=r(434788),a=r(861928),n=r(906019);const s={catalog:{},lastQuery:null,loading:!1},i=(e=s,t)=>{switch(t.type){case a.CatalogActions.START_LOADING:return(0,o._)({},e,{loading:!0,lastQuery:t.payload});case a.CatalogActions.STOP_LOADING:return(0,o._)({},e,{loading:!1});case a.CatalogActions.FETCH:return(0,o._)({},e,{catalog:t.payload});case a.CatalogActions.REMOVE_RECENT:{var r,i,l;const t=(0,o._)({},e.catalog);if((null==(r=t.catalog)||null==(i=r.sections)?void 0:i.length)&&(null==(l=t.catalog)?void 0:l.sections[0])){var c,d;const r=t.catalog.sections[0];if((null==(c=r.blocks)?void 0:c.length)&&(null==(d=r.blocks)?void 0:d.length)>2){var u;const a=[...r.blocks],s=r.blocks[0],i=r.blocks[1];if((null==s||null==(u=s.layout)?void 0:u.name)===n.ESearchCatalogBlockLayoutName.HEADER_COMPACT&&i.data_type===n.ESearchCatalogBlockDataType.CATALOG_SEARCH_SUGGESTION)return a.splice(0,2),r.blocks=a,(0,o._)({},e,{catalog:t})}}return(0,o._)({},e)}default:return e}}},213435:(e,t,r)=>{r.d(t,{rootReducer:()=>l});var o=r(14890),a=r(350158),n=r(619780),s=r(531855),i=r(397195);const l=(0,o.combineReducers)({initOptions:a.initOptionsReducer,catalog:n.catalogReducer,searchInput:s.searchInputReducer,suggester:i.suggesterReducer})},350158:(e,t,r)=>{r.d(t,{initOptionsReducer:()=>s});var o=r(434788),a=r(861928);const n={useInstantSearch:!0,type:"video"},s=(e=n,t)=>t.type===a.InitOptionsActionType.INIT?(0,o._)({},e,t.payload):e},531855:(e,t,r)=>{r.d(t,{searchInputReducer:()=>i});var o=r(434788),a=r(331251),n=r(861928);const s={query:(0,a.getQueryFromNav)(),lastSearchRequest:""},i=(e=s,t)=>{switch(t.type){case n.SearchInputActions.SET_QUERY:return(0,o._)({},e,{query:t.payload});case n.SearchInputActions.SEARCH:return(0,o._)({},e,{lastSearchRequest:t.payload});default:return e}}},397195:(e,t,r)=>{r.d(t,{suggesterReducer:()=>i});var o=r(434788),a=r(861928),n=r(906019);const s={isOpen:!1,isWaitingForShow:!1,shouldBeClosed:!1,suggestsOrderIds:[],allSuggests:[],recentSuggests:[],otherSuggests:[],deletedSuggests:[],selectedSuggest:null,helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null,helpTrigger:!1},i=(e=s,t)=>{switch(t.type){case a.SuggesterActions.START_SHOW:return(0,o._)({},e,{isWaitingForShow:!(null==e?void 0:e.isOpen)});case a.SuggesterActions.SHOW:return(0,o._)({},e,{isOpen:!0,isWaitingForShow:!1});case a.SuggesterActions.HIDE:return(0,o._)({},e,{isOpen:!1});case a.SuggesterActions.RESET_CLOSED_STATUS:return(0,o._)({},e,{shouldBeClosed:!1});case a.SuggesterActions.SET_SUGGESTS:{const r=t.payload.suggests||[],a=r.filter((({id:t="",type:r=""})=>"recent"===r&&!e.deletedSuggests.includes(t))),n=r.filter((e=>"recent"!==(null==e?void 0:e.type))),s=[...a,...n].map((e=>(null==e?void 0:e.id)||"")),i=[...a,...n];return(0,o._)({},e,{recentSuggests:a,otherSuggests:n,suggestsOrderIds:s,allSuggests:i,shouldBeClosed:!i.length})}case a.SuggesterActions.DELETE_RECENT:{const r=[...e.deletedSuggests,t.payload];return(0,o._)({},e,{deletedSuggests:r,recentSuggests:e.recentSuggests.filter((({id:e=""})=>!r.includes(e))),suggestsOrderIds:e.suggestsOrderIds.filter(((e="")=>!r.includes(e)))})}case a.SuggesterActions.CHOOSE_ABOVE:{if(!e.selectedSuggest)return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[-1],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});const t=e.suggestsOrderIds.findIndex((t=>t===e.selectedSuggest)),r=(t-1==-1?e.suggestsOrderIds.length-1:t-1)%e.suggestsOrderIds.length;return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[r],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null})}case a.SuggesterActions.CHOOSE_BELOW:{if(!e.selectedSuggest)return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[0],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});const t=(e.suggestsOrderIds.findIndex((t=>t===e.selectedSuggest))+1)%e.suggestsOrderIds.length;return(0,o._)({},e,{selectedSuggest:e.suggestsOrderIds[t],helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null})}case a.SuggesterActions.RESET_SELECTED:return(0,o._)({},e,{selectedSuggest:null});case a.SuggesterActions.RESET_DELETED:return(0,o._)({},e,{deletedSuggests:[]});case a.SuggesterActions.SET_HELP_SUGGEST:{if(e.selectedSuggest)return(0,o._)({},e);const r=t.payload.length-1,a=e.allSuggests.length&&e.allSuggests[0].title||"";if(t.payload[r]===a[r]){if(n.RUS.includes(t.payload[r])&&n.RUS.includes(a[r]))return(0,o._)({},e,{helpSuggest:a,helpSuggestStart:t.payload,helpSuggestEnd:a.slice(t.payload.length,a.length)});if(n.LAT.includes(t.payload[r])&&n.LAT.includes(a[r]))return(0,o._)({},e,{helpSuggest:a,helpSuggestStart:t.payload,helpSuggestEnd:a.slice(t.payload.length,a.length)})}return(0,o._)({},e,{helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null})}case a.SuggesterActions.TRIGGER_HELP_SUGGEST:return(0,o._)({},e,{helpTrigger:!e.helpTrigger});case a.SuggesterActions.RESET_HELP_SUGGEST:return(0,o._)({},e,{helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});case a.SuggesterActions.RESET_TEMP_SUGGESTER_DATA:return(0,o._)({},e,{selectedSuggest:null,helpSuggest:null,helpSuggestStart:null,helpSuggestEnd:null});default:return e}}},861928:(e,t,r)=>{r.d(t,{CatalogActions:()=>o.CatalogActions,InitOptionsActionType:()=>o.InitOptionsActionType,SearchInputActions:()=>o.SearchInputActions,SuggesterActions:()=>o.SuggesterActions});var o=r(995090)},575838:(e,t,r)=>{var o;r.d(t,{CatalogActions:()=>o}),function(e){e.FETCH="FETCH",e.START_LOADING="START_LOADING",e.STOP_LOADING="STOP_LOADING",e.REMOVE_RECENT="REMOVE_RECENT"}(o||(o={}))},995090:(e,t,r)=>{r.d(t,{CatalogActions:()=>a.CatalogActions,InitOptionsActionType:()=>o.InitOptionsActionType,SearchInputActions:()=>n.SearchInputActions,SuggesterActions:()=>s.SuggesterActions});var o=r(572797),a=r(575838),n=r(326646),s=r(686501)},572797:(e,t,r)=>{var o;r.d(t,{InitOptionsActionType:()=>o}),function(e){e.INIT="INIT"}(o||(o={}))},326646:(e,t,r)=>{var o;r.d(t,{SearchInputActions:()=>o}),function(e){e.SEARCH="SEARCH",e.SET_QUERY="SET_QUERY"}(o||(o={}))},686501:(e,t,r)=>{var o;r.d(t,{SuggesterActions:()=>o}),function(e){e.SET_SUGGESTS="SET_SUGGESTS",e.CHOOSE_BELOW="CHOOSE_BELOW",e.CHOOSE_ABOVE="CHOOSE_ABOVE",e.DELETE_RECENT="DELETE_RECENT",e.SET_HELP_SUGGEST="SET_HELP_SUGGEST",e.TRIGGER_HELP_SUGGEST="TRIGGER_HELP_SUGGEST",e.RESET_SELECTED="RESET_SELECTED",e.RESET_DELETED="RESET_DELETED",e.RESET_HELP_SUGGEST="RESET_HELP_SUGGEST",e.RESET_TEMP_SUGGESTER_DATA="RESET_TEMP_SUGGESTER_DATA",e.START_SHOW="START_SHOW",e.SHOW="SHOW",e.HIDE="HIDE",e.RESET_CLOSED_STATUS="RESET_CLOSED_STATUS"}(o||(o={}))},331251:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{getMainInput:()=>getMainInput,getQueryFromNav:()=>getQueryFromNav});var _swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11010),_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(795558),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(643897),_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(906019);const getMainInput=()=>{const e=document.getElementById(_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__.SEARCH_WRAPPER_ELEMENT_ID);if(!e)return null;const t=null==e?void 0:e.querySelector(_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__.SEARCH_INPUT_ELEMENT_ID);return t||null},getInitOptionsFromDom=(0,_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_3__._)((function*(){return new Promise((resolve=>{setTimeout((()=>{const mainInput=getMainInput(),wrapEl=window.uiSearch.getWrapEl(mainInput),delayedInitOptions=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options");let result=null;if(delayedInitOptions){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null);const evalScript=`(function() { return ${delayedInitOptions} })()`;try{result=eval(evalScript)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logEvalError)(e,evalScript),resolve(result)}}resolve(result)}),_web_search_SearchForm_constants__WEBPACK_IMPORTED_MODULE_2__.IMMEDIATELY_TIMER)}))})),getQueryFromNav=()=>{var e,t,r;return(null==(e=window.nav)||null==(t=e.objLoc)?void 0:t.q)||(null==(r=window.nav)?void 0:r.objLoc["c[q]"])||""}},192220:(e,t,r)=>{r.d(t,{SearchTopRoot:()=>i});var o=r(785893),a=r(338661),n=r(86894),s=r(869048);r(803205),r(108830);const i=()=>(0,o.jsx)(s.AppRootProvider,{sizeX:n.SizeType.REGULAR,sizeY:n.SizeType.COMPACT,viewWidth:n.ViewWidth.DESKTOP,children:(0,o.jsx)(a.App,{})})},896621:(e,t,r)=>{r.d(t,{getSearchTop:()=>n});r(434788);var o=r(599809),a=r(148652);function n(e,t){return(0,o.api)(a.CATALOG_API_METHODS.GET_SEARCH_TOP,e,void 0,t)}},109291:(e,t,r)=>{r.d(t,{App:()=>h});var o=r(785893),a=r(667294),n=r(842571),s=r(690743),i=r(209660),l=r(108824),c=r(774462),d=r(953908),u=r(501461),_=r(836245),g=r(538310),p=r(148652),S=(r(180833),r(769353));const h=()=>{const e=(0,n.useStore)(l.$displayResults),t=(0,n.useStore)(l.$currentQuery),r=(0,n.useStore)(c.$selectedItemIndex),h=(0,a.useRef)(null),v=(0,a.useRef)(),m=(0,a.useCallback)((()=>{var t;e||(null==(t=h.current)||t.focus())}),[h,e]),f=(0,a.useCallback)((o=>{switch(o.keyCode){case d.KEY.DOWN:(0,d.cancelEvent)(o.nativeEvent),(0,c.fireDownSelectionIndex)();break;case d.KEY.UP:(0,d.cancelEvent)(o.nativeEvent),(0,c.fireUpSelectionIndex)();break;case d.KEY.ENTER:if((0,d.cancelEvent)(o.nativeEvent),clearTimeout(v.current),o.ctrlKey||o.metaKey){if(null==r?void 0:r.callback)return void r.callback(void 0,!0);if(t)return void window.open(`/search?c[section]=auto&c[q]=${encodeURIComponent(t)}`)}return(null==r?void 0:r.callback)?(r.callback(),(0,l.fireSetCatalog)(null),void(0,l.fireAbortRequest)()):void(t&&((0,l.fireSetCurrentQuery)(""),(0,l.fireSetResultsDisplay)(!1),(0,l.fireSetCatalog)(null),(0,l.fireAbortRequest)(),setTimeout((()=>{var e;null==(e=h.current)||e.blur()}),p.SEARCH_INPUT_BLUR_TIMEOUT),(0,g.navGo)("/search?c[section]=auto&c[q]="+encodeURIComponent(t),null)));case d.KEY.TAB:return clearTimeout(v.current),(0,l.fireSetCurrentQuery)(""),void(0,l.fireSetResultsDisplay)(!1)}e||(0,l.fireSetResultsDisplay)(!0)}),[t,r,h,v,e]),E=(0,a.useCallback)((e=>{const t=e.currentTarget.value||"";(0,l.fireSetCurrentQuery)(t),clearTimeout(v.current),v.current=setTimeout((()=>{(0,l.fireSearch)({q:t})}),250)}),[v]);return(0,a.useEffect)((()=>{const e=e=>{const t=e.target;t.closest('[data-search-top-target="true"]')||t.closest(`#${p.SEARCH_INPUT_ID}`)||t.closest(".vkuiSearch__icon")||!(0,u.isMainClick)(e)||(0,l.fireSetResultsDisplay)(!1)};return(0,_.topHeaderListener)(),document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),(0,a.useEffect)((()=>()=>clearTimeout(v.current)),[]),(0,a.useEffect)((()=>{const e=(0,g.subscribeModuleEvaluated)((()=>{(0,l.fireSetCatalog)(null),(0,l.fireAbortRequest)(),(0,l.fireSetCurrentQuery)(""),(0,l.fireSetResultsDisplay)(!1)}));return()=>{e()}}),[]),(0,o.jsxs)("div",{className:S.default.app,id:"ts_wrap",children:[(0,o.jsx)("div",{className:S.default.searchContainer,"data-search-top-target":"true",children:(0,o.jsx)(s.SearchInput,{onClick:m,onFocus:()=>{e||(0,l.fireSetResultsDisplay)(!0)},onInput:E,onKeyDown:f,inputRef:h,searchQuery:t,className:S.default.search})}),e&&(0,o.jsx)(i.SearchResults,{})]})}},338661:(e,t,r)=>{r.d(t,{App:()=>o.App});var o=r(109291)},450589:(e,t,r)=>{r.d(t,{Placeholder:()=>s});var o=r(785893),a=r(86894),n=r(29271);const s=()=>(0,o.jsx)(a.Placeholder,{children:n.getLang("search_search_top_has_no_results")})},373838:(e,t,r)=>{r.d(t,{Placeholder:()=>o.Placeholder});var o=r(450589)},486072:(e,t,r)=>{r.d(t,{SearchResults:()=>h});var o=r(785893),a=r(667294),n=r(842571),s=r(86894),i=r(539791),l=r(848504),c=r(108824),d=r(373838),u=r(193452),_=r(538310),g=r(508249),p=r(836245),S=r(263758);const h=()=>{var e,t;const r=(0,n.useStore)(c.$catalog),h=(0,n.useStore)(c.$extendedData),v=(0,n.useStore)(c.$pending),m=(0,n.useStore)(c.$currentQuery),f=(0,n.useStore)(c.$fetchError),E={pageId:"top_search",cacheId:window.location.href,catalogType:i.CatalogType.SEARCH,componentsType:i.ComponentsType.MODAL},C={navGo:_.navGo,userId:null==window||null==(e=window.vk)?void 0:e.id,pageVerifiedTip:g.pageVerifiedTip,openChat:null==(t=window.reforgedME)?void 0:t.selectPeer};return(0,a.useEffect)((()=>{r||v||(0,c.fireSearch)({q:""})}),[]),f?(0,o.jsx)("div",{className:S.default.root,children:(0,o.jsx)(d.Placeholder,{})}):(0,o.jsx)("div",{className:S.default.root,"data-search-top-target":"true",children:(0,o.jsx)(s.CustomScrollView,{autoHideScrollbar:!0,className:S.default.scroll,children:v?(0,o.jsx)(l.Spinner,{}):(0,o.jsx)(i.CatalogSearchProvider,{currentQuery:m,search:e=>(0,c.fireSearch)(e),displayTopSearch:c.fireSetResultsDisplay,setCurrentQuery:(e="")=>(0,c.fireSetCurrentQuery)(e),showVideo:p.showVideo,children:(0,o.jsx)(i.Catalog,{catalog:r,extendedData:h,nextFromSections:[],onCatalogUpdate:e=>{(0,c.fireSetCatalogCatalog)(e.updatedCatalog)},collectClick:u.searchStatsCollector.logEvent,collectView:u.searchViewStatCollector.logEvent,catalogVars:E,platformVars:C})})})})}},209660:(e,t,r)=>{r.d(t,{SearchResults:()=>o.SearchResults});var o=r(486072)},212809:(e,t,r)=>{r.d(t,{Spinner:()=>s});var o=r(785893),a=r(86894),n=r(126298);const s=()=>(0,o.jsx)("div",{className:n.default.spinner,children:(0,o.jsx)(a.Spinner,{size:"small"})})},848504:(e,t,r)=>{r.d(t,{Spinner:()=>o.Spinner});var o=r(212809)},148652:(e,t,r)=>{r.d(t,{CATALOG_API_METHODS:()=>o,SEARCH_INPUT_BLUR_TIMEOUT:()=>s,SEARCH_INPUT_ID:()=>a,SEARCH_TOP_MODAL_NON_CLOSING_ATTR:()=>n});const o={GET_SEARCH_TOP:"catalog.getSearchTop",GET_SECTION:"catalog.getSection",GET_STORIES:"stories.get",JOIN_GROUP:"groups.join",LEAVE_GROUP:"groups.leave",ADD_FRIEND:"friends.add",DELETE_FRIEND:"friends.delete",ADD_RECENT:"search.addRecents",CLEAR_RECENT:"search.clearRecents"},a="SearchTopInput",n="data-search-top-target",s=150},447936:(e,t,r)=>{r.d(t,{$currentQuery:()=>a,appDomain:()=>o,fireClearApp:()=>s,fireSetCurrentQuery:()=>n});const o=(0,r(210929).createDomain)("SEARCH_TOP/APP"),a=o.createStore("",{name:"currentQuery"}),n=o.createEvent("fire/SetCurrentQuery"),s=o.createEvent("fire/ClearApp")},896081:(e,t,r)=>{var o=r(434788),a=r(210929),n=r(108824),s=r(631859);n.appDomain.onCreateStore((e=>{e.reset(n.fireClearApp)})),(0,a.sample)({clock:n.fireSetCurrentQuery,target:n.$currentQuery}),(0,a.sample)({clock:n.fireSendRequest,target:[s.fireResetSelectionIndex,s.fireResetItemsIndex]}),(0,a.sample)({clock:n.fireSetResultsDisplay,target:[s.fireResetSelectionIndex]}),(0,a.sample)({clock:n.fireSendRequest,fn:()=>null,target:n.fireSetCatalog}),(0,a.sample)({clock:n.SearchTopEffectFx.doneData,fn:({request:e})=>e,target:n.fireSetCatalog}),(0,a.sample)({clock:n.fireSetCatalog,fn:e=>(null==e?void 0:e.catalog)||null,target:n.$catalog}),(0,a.sample)({clock:n.fireSetCatalog,fn:e=>{if(!e)return null;const t=(0,o._)({},e);return delete t.catalog,t||null},target:n.$extendedData})},735753:(e,t,r)=>{r.d(t,{$catalog:()=>s,$extendedData:()=>i,fireSetCatalog:()=>a,fireSetCatalogCatalog:()=>n});const o=r(447936).appDomain.createDomain("SEARCH_TOP/CATALOG"),a=o.createEvent("fire/SetCatalog"),n=o.createEvent("fire/SetCatalog"),s=o.createStore(null,{name:"catalog"}),i=o.createStore(null,{name:"extendedData"})},426675:(e,t,r)=>{var o=r(210929),a=r(108824);(0,o.sample)({clock:a.fireSetCatalogCatalog,target:a.$catalog})},108824:(e,t,r)=>{r.d(t,{$catalog:()=>s.$catalog,$currentQuery:()=>o.$currentQuery,$displayResults:()=>a.$displayResults,$extendedData:()=>s.$extendedData,$fetchError:()=>n.$fetchError,$pending:()=>n.$pending,$requestsQueue:()=>n.$requestsQueue,AbortEffectFx:()=>n.AbortEffectFx,CancelStackFilterFx:()=>a.CancelStackFilterFx,CancelStackPushFx:()=>a.CancelStackPushFx,SearchTopEffectFx:()=>n.SearchTopEffectFx,appDomain:()=>o.appDomain,fireAbortRequest:()=>n.fireAbortRequest,fireCancelStackPush:()=>a.fireCancelStackPush,fireClearApp:()=>o.fireClearApp,fireCreateRequest:()=>n.fireCreateRequest,fireRemoveRequestFromQueue:()=>n.fireRemoveRequestFromQueue,fireSearch:()=>n.fireSearch,fireSendRequest:()=>n.fireSendRequest,fireSetCatalog:()=>s.fireSetCatalog,fireSetCatalogCatalog:()=>s.fireSetCatalogCatalog,fireSetCurrentQuery:()=>o.fireSetCurrentQuery,fireSetRequestToQueue:()=>n.fireSetRequestToQueue,fireSetResultsDisplay:()=>a.fireSetResultsDisplay,fireSetUpRequest:()=>n.fireSetUpRequest});var o=r(447936),a=r(340083),n=r(264299),s=r(735753)},803205:(e,t,r)=>{r(896081),r(666138),r(353199),r(426675)},264299:(e,t,r)=>{r.d(t,{$fetchError:()=>h,$pending:()=>p,$requestsQueue:()=>S,AbortEffectFx:()=>v,SearchTopEffectFx:()=>m,fireAbortRequest:()=>g,fireCreateRequest:()=>l,fireRemoveRequestFromQueue:()=>u,fireSearch:()=>i,fireSendRequest:()=>_,fireSetRequestToQueue:()=>d,fireSetUpRequest:()=>c});var o=r(11010),a=r(447936),n=r(896621);const s=a.appDomain.createDomain("SEARCH_TOP/SEARCH"),i=s.createEvent("fire/Search"),l=s.createEvent("fire/CreateRequest"),c=s.createEvent("fire/SetUpRequest"),d=s.createEvent("fire/SetRequestToQueue"),u=s.createEvent("fire/RemoveRequestToQueue"),_=s.createEvent("fire/SendRequest"),g=s.createEvent("fire/AbortRequest"),p=s.createStore(!1,{name:"pending"}),S=s.createStore([],{name:"requestsQueue"}),h=s.createStore(!1,{name:"fetchError"}),v=s.createEffect({name:"get/AbortEffectFx",handler:(0,o._)((function*(e){e.forEach((e=>{var t,r;null==(t=e.fetchOptions)||null==(r=t.controller)||null==r.abort||r.abort()}))}))}),m=s.createEffect({name:"get/SearchTopEffectFx",handler:(0,o._)((function*(e){var t,r;const o=null==(t=e.fetchOptions)||null==(r=t.controller)?void 0:r.signal;return{request:yield(0,n.getSearchTop)(e.data,{signal:o}),requestData:e}}))})},353199:(e,t,r)=>{var o=r(434788),a=r(210929),n=r(108824),s=r(836245);(0,a.sample)({clock:n.fireSearch,fn:e=>({id:(0,s.createCacheId)(e),data:e}),target:n.fireCreateRequest}),(0,a.sample)({clock:n.fireAbortRequest,source:n.$requestsQueue,target:n.AbortEffectFx}),(0,a.sample)({clock:n.fireCreateRequest,source:n.$requestsQueue,fn:(e,t)=>{e.forEach((e=>{var t,r;null==(t=e.fetchOptions)||null==(r=t.controller)||null==r.abort||r.abort()}));const r=new AbortController;return(0,o._)({},t,{fetchOptions:{controller:r}})},target:n.fireSetUpRequest}),(0,a.sample)({clock:n.fireSetUpRequest,target:[n.fireSendRequest,n.fireSetRequestToQueue]}),(0,a.sample)({clock:n.fireSetRequestToQueue,source:n.$requestsQueue,fn:(e,t)=>[...e,t],target:n.$requestsQueue}),(0,a.sample)({clock:n.fireSendRequest,target:n.SearchTopEffectFx}),(0,a.sample)({clock:n.SearchTopEffectFx.pending,target:n.$pending}),(0,a.sample)({clock:n.SearchTopEffectFx.finally,fn:({params:e})=>e,target:n.fireRemoveRequestFromQueue}),(0,a.sample)({clock:n.SearchTopEffectFx.pending,fn:()=>!1,target:n.$fetchError}),(0,a.sample)({clock:n.SearchTopEffectFx.failData,source:n.$pending,filter:e=>!e,fn:()=>!0,target:n.$fetchError})},340083:(e,t,r)=>{r.d(t,{$displayResults:()=>i,CancelStackFilterFx:()=>d,CancelStackPushFx:()=>u,fireCancelStackPush:()=>c,fireSetResultsDisplay:()=>l});var o=r(447936),a=r(196026),n=r(148652);const s=o.appDomain.createDomain("SEARCH_TOP/MODAL"),i=s.createStore(!1,{name:"displayResults"}),l=s.createEvent("fire/SetResultsDisplay"),c=s.createEvent("fire/CancelStackPush"),d=s.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,a.cancelStackFilter)("top_search",!0)}}),u=s.createEffect({name:"remove/CancelStackFilter",handler:()=>{(0,a.cancelStackPush)("top_search",((e=!0)=>{if(e){const e=document.querySelector(`#${n.SEARCH_INPUT_ID}`);l(!1),null==e||e.blur()}else c()}),!0)}})},666138:(e,t,r)=>{var o=r(210929),a=r(108824);(0,o.sample)({clock:a.fireSetResultsDisplay,source:a.$displayResults,filter:(e,t)=>e!==t,fn:(e,t)=>t,target:a.$displayResults}),(0,o.sample)({clock:a.$displayResults,filter:e=>e,target:a.CancelStackPushFx}),(0,o.sample)({clock:a.$displayResults,filter:e=>!e,target:a.CancelStackFilterFx}),(0,o.sample)({clock:a.fireCancelStackPush,target:a.CancelStackPushFx})},836245:(e,t,r)=>{r.d(t,{createCacheId:()=>d,showVideo:()=>u,topHeaderListener:()=>c});var o=r(434788),a=r(953908),n=r(795558),s=r(611290),i=r(148652),l=r(466570);const c=()=>{(0,a.addEvent)(document,"mousedown",(e=>{const t=e.target,r=!((0,a.checkKeyboardEvent)(e)||(0,n.domClosest)("top_audio_layer_place",t)||(0,n.domClosest)("_ap_layer__close",t)||(0,n.domClosest)("layer_wrap",t)||(0,n.domClosest)("PortalNavigation",t)||(0,n.domClosest)("PortalNavigationDropdown",t)||(0,n.domClosest)("ObsceneTextAlertBox",t)||(null==t?void 0:t.closest('[data-search-top-target="true"]'))),o=!(null==t?void 0:t.closest(`#${i.SEARCH_INPUT_ID}`));r&&(0,s.topHeaderClose)((()=>!1),o)}))},d=e=>((e,t="",r)=>{const o=Object.entries(e).filter((([,e])=>!!e||0===e)).map((([e,t])=>r?`${r}[${encodeURIComponent(e)}]=${encodeURIComponent(t)}`:`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&");return o?`${t}${o}`:""})(Object.keys(e).sort(((e,t)=>e.localeCompare(t))).reduce(((t,r)=>(0,o._)({},t,{[r]:e[r]})),{})),u=({event:e,id:t,video:o})=>{const a=()=>{if(window.Video.checkClickEvent(e))return!0;if(e.preventDefault(),window.cur.cancelClick)return void(window.cur.cancelClick=!1);if(window.cur.chooseVideoMedia)return window.cur.chooseVideoMedia(e.target,t);let r;!r&&window.Video&&window.Video.isGlobalSearchMode()&&window.Video.shouldShowSearchInPlaylistWithSearch()&&(r=window.Video.VIDEO_SEARCH_TOP_TYPE),window.Video.show(e,t,{autoplay:1,queue:0,playlistId:r,playFrom:o.viewed_duration?(0,l.getPlayFromByDuration)(o.viewed_duration):"",addParams:{track_code:o.track_code}},e.target)};window.Video?a():Promise.all([r.e(75514),r.e(98066),r.e(56990),r.e(76429),r.e(24509),r.e(76400),r.e(40885),r.e(68592),r.e(44544),r.e(74923),r.e(46791)]).then(r.bind(r,818790)).then(a)}},573414:(e,t,r)=>{r.d(t,{CatalogContext:()=>o});const o=(0,r(667294).createContext)({videos:[],groups:[],profiles:[],albums:[],placeholders:[]})},824346:(e,t,r)=>{r.d(t,{SearchVideoCatalog:()=>p});var o=r(434788),a=r(785893),n=r(667294),s=r(999128),i=r(688007),l=r(896177),c=r(12531),d=r(249899),u=r(869048),_=r(845847),g=r(573414);const p=()=>{var e;const[t,r]=(0,n.useState)(),p=(0,c.useSearchParams)(),S=null==t?void 0:t.catalog,h=null==S||null==(e=S.sections)?void 0:e.find((e=>(null==e?void 0:e.id)===(null==S?void 0:S.default_section))),v=(null==t?void 0:t.videos)?t.videos:[];var m;const f=null!=(m=null==t?void 0:t.groups)?m:[];var E;const C=null!=(E=null==t?void 0:t.profiles)?E:[];var y;const w=null!=(y=null==t?void 0:t.albums)?y:[];var b;const T=null!=(b=null==t?void 0:t.placeholders)?b:[],I=null==S?void 0:S.sections[(null==S?void 0:S.sections.length)-1];(0,n.useEffect)((()=>{if(!window.cur.is_section)return;const e=new AbortController;return p.has("q")||"upload"===p.get("section")?(s.Video.toggleSearchProgress(!0),(0,i.getVideoSearchBySearchParams)(p,e).then((e=>{r(e)})).finally((()=>{s.Video.setVisibilityShowcaseContent(!1),s.Video.toggleSearchProgress(!1)})),()=>{e.abort()}):(r(void 0),void s.Video.setVisibilityShowcaseContent(!0))}),[p]);const[k,A]=(0,n.useState)(!1),R=()=>{I&&h&&(A(!0),(0,i.getSection)({start_from:I.next_from,section_id:h.id}).then((e=>{r((t=>{if((null==t?void 0:t.catalog)&&e.section){let u;var r,a,n,s,i,l,c,d;return u=h.id===e.section.id?(0,_.getMutatedCatalogSections)(t.catalog.sections,h,e.section):[...t.catalog.sections,e.section],(0,o._)({},t,{catalog:(0,o._)({},t.catalog,{sections:u}),videos:(0,_.filterArrayOfUniqueByKey)([...null!=(r=t.videos)?r:[],...null!=(a=e.videos)?a:[]],"id"),groups:(0,_.filterArrayOfUniqueByKey)([...null!=(n=t.groups)?n:[],...null!=(s=e.groups)?s:[]],"id"),profiles:(0,_.filterArrayOfUniqueByKey)([...null!=(i=t.profiles)?i:[],...null!=(l=e.profiles)?l:[]],"id"),albums:(0,_.filterArrayOfUniqueByKey)([...null!=(c=t.albums)?c:[],...null!=(d=e.albums)?d:[]],"id")})}return t})),A(!1)})).catch((()=>{A(!1)})))};return(null==S?void 0:S.sections)?(0,a.jsx)(u.AppRootProvider,{children:(0,a.jsx)("div",{className:"VideoLayout__contentsWrapper",style:{overflowAnchor:"none"},children:(0,a.jsx)("div",{className:"VideoLayout__search",style:{display:"block"},children:(0,a.jsxs)(g.CatalogContext.Provider,{value:{videos:v,groups:f,profiles:C,albums:w,placeholders:T},children:[(0,a.jsx)(l.Catalog,{sections:S.sections}),I&&I.next_from&&(0,a.jsx)(d.DynamicPagination,{isLoading:k,fetchData:R,nextFrom:I.next_from})]})})})}):null}},688007:(e,t,r)=>{r.d(t,{addVideo:()=>c,addVideoToFave:()=>u,deleteVideo:()=>d,getSection:()=>g,getVideoSearchBySearchParams:()=>l,removeVideoFromFave:()=>_});var o=r(434788),a=r(599809),n=r(964886),s=r(845847);const i=(e,t={})=>(0,a.api)(n.CATALOG_API_METHODS.GET_VIDEO_SEARCH,(0,o._)({},e),void 0,t);function l(e,t=null){let r={};return t&&(r={signal:t.signal}),i((0,s.getParamsForVideoSearchCatalog)(e),r)}function c(e){return(0,a.api)(n.CATALOG_API_METHODS.ADD_VIDEO,e)}function d(e){return(0,a.api)(n.CATALOG_API_METHODS.DELETE_VIDEO,e)}function u(e){return(0,a.api)(n.CATALOG_API_METHODS.ADD_VIDEO_TO_FAVE,e)}function _(e){return(0,a.api)(n.CATALOG_API_METHODS.REMOVE_VIDEO_FROM_FAVE,e)}function g(e,t){return(0,a.api)(n.CATALOG_API_METHODS.GET_SECTION,(0,o._)({},e),void 0,t)}},964886:(e,t,r)=>{r.d(t,{CATALOG_API_METHODS:()=>o,LONGER_FILTER_DURATION:()=>n,SHORTER_FILTER_DURATION:()=>a});const o={ADD_VIDEO:"video.add",GET_VIDEO_SEARCH:"catalog.getVideoSearchWeb2",DELETE_VIDEO:"video.delete",GET_SECTION:"catalog.getSection",ADD_VIDEO_TO_FAVE:"fave.addVideo",REMOVE_VIDEO_FROM_FAVE:"fave.removeVideo"},a=300,n=1200},12531:(e,t,r)=>{r.d(t,{useSearchParams:()=>a});var o=r(667294);const a=()=>{const[e,t]=(0,o.useState)((()=>new URLSearchParams(document.location.search)));return(0,o.useEffect)((()=>{let e="";const r=new MutationObserver((function(){const r=new URLSearchParams(document.location.search);r.delete("z");const o=r.toString();o!==e&&(e=o,t(new URLSearchParams(o)))}));return r.observe(document,{subtree:!0,childList:!0}),()=>{r.disconnect()}}),[]),e}},845847:(e,t,r)=>{r.d(t,{filterArrayOfUniqueByKey:()=>n,getMutatedCatalogSections:()=>s,getParamsForVideoSearchCatalog:()=>i});var o=r(434788),a=r(964886);function n(e,t){return[...new Map(e.map((e=>[e[t],e]))).values()]}function s(e,t,r){const a=e.findIndex((({id:e})=>e===t.id));if(-1===a||!t.blocks||!r.blocks)return e;const n=(0,o._)({},t,{blocks:[...t.blocks,...r.blocks],next_from:r.next_from});return[...e.slice(0,a-1),n,...e.slice(a+1)]}function i(e){const t={},r={order:"sort",notsafe:"adult"};for(const[n,s]of e)if("len"===n){const e="1"===s?"shorter":"longer";t[e]="shorter"===e?`${a.SHORTER_FILTER_DURATION}`:`${a.LONGER_FILTER_DURATION}`}else{var o;t[null!=(o=r[n])?o:n]=s}return t}},194969:(e,t,r)=>{r.d(t,{VideoCardWrapper:()=>d});var o=r(434788),a=r(820224),n=r(785893),s=r(392594),i=r(393223),l=r(40565),c=r(586917);const d=e=>{var{controls:t,actions:r,owner:d,video:u,onVideoOpen:_}=e,g=(0,a._)(e,["controls","actions","owner","video","onVideoOpen"]);const p=(0,c.useMenuActions)(u,r),S=(0,c.useControls)(u,t);return(0,n.jsx)(s.VideoCard,(0,o._)({controlItems:(0,n.jsx)(l.VideoCardControls,{controls:S}),menuItems:p,video:(0,i.mapVideoFullToVideoCardItem)(u,d),onVideoOpen:_},g))}},996842:(e,t,r)=>{r.d(t,{VideoCardControls:()=>s});var o=r(785893),a=r(619141),n=r(594216);const s=({controls:e})=>(null==e?void 0:e.length)?(0,o.jsx)(o.Fragment,{children:e.map((({component:e,text:t,onClick:r})=>(0,o.jsx)(a.TextTooltip,{text:t,offsetDistance:8,offsetSkidding:24,appearance:"black",placement:"bottom-end",children:(0,o.jsx)(e,{onClick:r,className:n.default.controlIcon})},t)))}):null},399588:(e,t,r)=>{r.d(t,{VideoCardControls:()=>o.VideoCardControls});var o=r(996842)},665570:(e,t,r)=>{r(785893),r(881310)},40565:(e,t,r)=>{r.d(t,{VideoCardControls:()=>o.VideoCardControls});var o=r(399588);r(665570)},845134:(e,t,r)=>{r.d(t,{downloadVideo:()=>n});var o=r(504867),a=r(108705);const n=({oid:e,vid:t,title:r,type:n})=>{const s=Number(e),i=Number(t);window.ajax.post("al_video.php?act=get_download_url",{video_raw_id:(0,a.joinFullId)(s,i)},{onDone:e=>{((e,t,r)=>{if(!e)return!1;const a=document.createElement("a");a.href=e,a.download=`${t}.mp4`,document.body.appendChild(a),a.click(),document.body.removeChild(a),(0,o.statlogsValueEvent)("video_downloads","",r)})(e,r,n)}})}},60819:(e,t,r)=>{r.d(t,{showEditVideoForm:()=>a});var o=r(514986);const a=({oid:e,vid:t})=>{const r={vid:t,oid:e};(0,o.showBox)("al_video.php?act=edit_box",r,{containerClass:"video_edit"})}},753472:(e,t,r)=>{r.d(t,{downloadVideo:()=>o.downloadVideo,reportHandler:()=>a.reportHandler,showEditVideoForm:()=>n.showEditVideoForm});var o=r(845134),a=r(590439),n=r(60819)},590439:(e,t,r)=>{r.d(t,{reportHandler:()=>n});var o=r(11010),a=r(29271);const n=(0,o._)((function*(e,t){e&&t&&(window.Videoview||(yield Promise.all([r.e(68592),r.e(39262),r.e(45723)]).then(r.bind(r,826124))),window.Videoview.showReportVideoForm(t,e,(()=>{var r;null==(r=window.VideoShowcase)||r.showCardFeedback(t,e,a.getLang("global_report_spam"))})))}))},586917:(e,t,r)=>{r.d(t,{useControls:()=>o.useControls,useMenuActions:()=>a.useMenuActions});var o=r(157863),a=r(909748)},157863:(e,t,r)=>{r.d(t,{useControls:()=>l});var o=r(667294),a=r(304680),n=r(293079),s=r(29271),i=r(327038);const l=(e,t)=>(0,o.useMemo)((()=>{const{id:r,owner_id:o,can_edit:l,can_download:c,title:d,type:u}=e,_=Array.isArray(t)?t:[];return l&&r&&o&&_.push({component:a.Icon16PenOutline,text:s.getLang("video_edit"),onClick:()=>(0,i.showEditVideoForm)({oid:String(o),vid:String(r)})}),3===c&&r&&o&&d&&u&&_.push({component:n.Icon16DownloadOutline,text:s.getLang("video_download_short"),onClick:()=>(0,i.downloadVideo)({oid:String(o),title:d,type:u,vid:String(r)})}),_}),[e,t])},909748:(e,t,r)=>{r.d(t,{useMenuActions:()=>i});var o=r(667294),a=r(17117),n=r(29271),s=r(327038);const i=(e,t)=>(0,o.useMemo)((()=>{const r=Array.isArray(t)?t:[];if(e.owner_id!==window.vk.id&&e.owner_id&&e.id&&r.push({component:a.Icon20ReportOutline,children:n.getLang("global_report_spam"),onClick:()=>(0,s.reportHandler)(String(e.id),String(e.owner_id))}),r.length)return r}),[e])},327038:(e,t,r)=>{r.d(t,{VideoCardWrapper:()=>o.VideoCardWrapper,downloadVideo:()=>a.downloadVideo,reportHandler:()=>a.reportHandler,showEditVideoForm:()=>a.showEditVideoForm});var o=r(194969),a=(r(40565),r(586917),r(753472))},127822:(e,t,r)=>{r.d(t,{getTriggersMap:()=>s});var o,a=r(999128),n=r(958927);!function(e){e.VIDEO="video"}(o||(o={}));const s=e=>"video"===e?{triggerSearch:a.Video.onSearchInputChange,onBlur:a.Video.onSearchInputBlur,onFilterRemoved:a.Video.onFilterRemoved,onFiltersChanged:n.VideoShowcase.onSearchFiltersChanged}:null},393223:(e,t,r)=>{r.d(t,{mapVideoFullToVideoCardItem:()=>h});var o=r(434788),a=r(659397),n=r(295273),s=r(765069),i=r(552248),l=r(139654),c=r(362246),d=r(517890);const u=e=>{var t;const{image:r=[]}=e;let o=r.filter((e=>!e.with_padding));return o.length||(o=r),null==(t=(0,a.getPhotoSize)(o,(0,i.getImageMinWidth)(240)))?void 0:t.url},_=e=>{if(!e)return;return{delete_outline:"deleteOutline",hide_outline:"hideOutline",recent_outline:"recentOutline",info_outline:"infoOutline",lock_outline:"lockOutline"}[e]},g=e=>{if(!e)return null;return{title:e.title,mode:1===e.blur?"blurred":"hidden",iconType:_(e.icon_name)}},p=e=>{const t=e.title||"",r=e.subtitle||"";return"music_video"===e.type?`${t} ${r}`:t},S=(e,t)=>{if("music_video"===e.type&&(null==e?void 0:e.main_artists)){const t=e.main_artists[0];return(0,o._)({name:t.name||"",href:(0,s.getOwnerUrl)(t)},(0,l.getArtistPhotos)(t))}return t?(0,o._)({},t,{name:(0,n.getOwnerName)(t),href:(0,s.getOwnerUrl)(t,"/video/@"),verified:!!t.verified&&1===t.verified,is_nft:(0,d.checkOwnerIsNFT)(t)}):{name:"",href:""}},h=(e,t)=>{var r,o,a,n,s,i,l,d,_,h,v;return{title:p(e),owner:S(e,t),isPrivacyLocked:(o=e.privacy_view,!!o&&Boolean((e=>e.category&&!["all","any"].includes(e.category))(o)||(null==(a=o.excluded_category)?void 0:a.length)||(null==(n=o.lists)||null==(s=n.allowed)?void 0:s.length)||(null==(i=o.lists)||null==(l=i.excluded)?void 0:l.length)||(null==(d=o.owners)||null==(_=d.allowed)?void 0:_.length)||(null==(h=o.owners)||null==(v=h.excluded)?void 0:v.length))),isLive:!!e.live_status,duration:e.duration,viewedDuration:e.viewed_duration,platform:e.platform,trailerSrc:null==(r=e.trailer)?void 0:r.mp4_360,thumbSrc:u(e),restriction:g(e.restriction),additionalInfo:(0,c.getAdditionalInfo)(e)}}},427164:(e,t,r)=>{r.d(t,{default:()=>n});var o,a=r(310396);e=r.hmd(e),o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e;const n=(0,a.default)(o)},310396:(e,t,r)=>{function o(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}r.d(t,{default:()=>o})}},__webpack_module_cache__={},deferred,leafPrototypes,getProto,inProgress,loadStylesheet,installedCssChunks,chunkToChildrenMap;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,t,r,o)=>{if(!t){var a=1/0;for(l=0;l<deferred.length;l++){for(var[t,r,o]=deferred[l],n=!0,s=0;s<t.length;s++)(!1&o||a>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](t[s])))?t.splice(s--,1):(n=!1,o<a&&(a=o));if(n){deferred.splice(l--,1);var i=r();void 0!==i&&(e=i)}}return e}o=o||0;for(var l=deferred.length;l>0&&deferred[l-1][2]>o;l--)deferred[l]=deferred[l-1];deferred[l]=[t,r,o]},__webpack_require__.H={},__webpack_require__.G=e=>{Object.keys(__webpack_require__.H).map((t=>{__webpack_require__.H[t](e)}))},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var r=Object.create(null);__webpack_require__.r(r);var o={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var a=2&t&&e;"object"==typeof a&&!~leafPrototypes.indexOf(a);a=getProto(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,__webpack_require__.d(r,o),r},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>75980===e?"menu_settings.fe841ee6e9d1770c7df7.js":9375===e?"voice_message_player.050d74b181d5db2642f0.js":28762===e?"speech.5c7a8bafaa4c80a92840.js":57468===e?"SilentModeForms.8425705394906aebc7de.js":96248===e?"feed-skeleton.6830e5b139046f63a92d.js":60593===e?"ui_scroll.fdabe164938cdbab4c2a.js":55489===e?"lottie-light.48f1a65d83e7d0217b60.js":36315===e?"indexer.764855ed06744ef55bf1.js":90927===e?"grid_sorter.2cad0549212c98e5b619.js":89658===e?"video_groups_redesign.e7eae66f808ce723c463.js":23650===e?"upload.f7a68533a5d2f38c2561.js":45723===e?"videoview.e1dbd317aebb5e7ae31e.js":67604===e?"likes.faeeb1bf7994cb293446.js":16957===e?"video_showcase_onboarding.10f5220a13c2f1ceba42.js":63161===e?"video_showcase_nps.76c85b2fea1e5322e3e7.js":62795===e?"video_tabs.a3d19b9c415980d4237e.js":52974===e?"videoplayer_v2.75473b1a56582843ae52.js":46791===e?"video.36756251ff29b3cbdf6a.js":59240===e?"performance-stats.d89fb0a11246583657a4.js":29019===e?"ReportForm.bca17ba3f106ecbaeea6.js":74212===e?e+".8ab2308ed43f76bd008b.js":24817===e?"hls.246b4a9412668aa7fe2c.js":38288===e?"lottie.2751896e25440664468a.js":72709===e?"0bceef6ad055b21676eba8b130f26dc1.67606c2f9096583e6731.js":34998===e?"b1e6b52a78c88a3ccb7a919375f59748.19acda38b73ae240e451.js":65401===e?"edb23b5a688004c0bd3cdad4a7949c7a.f35a429d1b798a8bdff2.js":52984===e?"257bd91f5bc0bc3e52dea75aebab5a62.5c59ca8bbae0288c2089.js":39262===e?"28e4257a346db314c3cfa2c0afc1285f.09120add93dc8bf6ff47.js":72809===e?"70b318539525aae4f37779c8dacf0473.deb135de08144aaa1549.js":92605===e?"1fee924d5ab315d8eb64fd1472ddf436.32e1cbde4635a62d4c21.js":void 0,__webpack_require__.miniCssF=e=>e+"."+{16957:"db54f60443b8b7f8af59",29019:"673778676fc8f6a95111",45723:"14799473a64909f6eaa3",46791:"3cdaffc678d2294fd419",57468:"e8a9b5d3b4a38f45d2ec",62795:"8bbef1d5b8ed35d16577",63161:"2e9374a12b48832e1deb",75980:"519f671449550110bbb1",89658:"b2b90512cd2606e29f4c"}[e]+".css",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},__webpack_require__.l=(e,t,r,o)=>{if(inProgress[e])inProgress[e].push(t);else{var a,n;if(void 0!==r)for(var s=document.getElementsByTagName("script"),i=0;i<s.length;i++){var l=s[i];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")=="vk:"+r){a=l;break}}a||(n=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,__webpack_require__.nc&&a.setAttribute("nonce",__webpack_require__.nc),a.setAttribute("data-webpack","vk:"+r),a.src=e),inProgress[e]=[t];var c=(t,r)=>{a.onerror=a.onload=null,clearTimeout(d);var o=inProgress[e];if(delete inProgress[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(r))),t)return t(r)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),n&&document.head.appendChild(a)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/dist/",loadStylesheet=e=>new Promise(((t,r)=>{var o=__webpack_require__.miniCssF(e),a=__webpack_require__.p+o;if(((e,t)=>{for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var a=(s=r[o]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===e||a===t))return s}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){var s;if((a=(s=n[o]).getAttribute("data-href"))===e||a===t)return s}})(o,a))return t();((e,t,r,o)=>{var a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.onerror=a.onload=n=>{if(a.onerror=a.onload=null,"load"===n.type)r();else{var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=i,a.parentNode.removeChild(a),o(l)}},a.href=t,document.head.appendChild(a)})(e,a,t,r)})),installedCssChunks={45973:0},__webpack_require__.f.miniCss=(e,t)=>{installedCssChunks[e]?t.push(installedCssChunks[e]):0!==installedCssChunks[e]&&{16957:1,29019:1,45723:1,46791:1,57468:1,62795:1,63161:1,75980:1,89658:1}[e]&&t.push(installedCssChunks[e]=loadStylesheet(e).then((()=>{installedCssChunks[e]=0}),(t=>{throw delete installedCssChunks[e],t})))},(()=>{var e={45973:0};__webpack_require__.f.j=(t,r)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else if(75980!=t){var a=new Promise(((r,a)=>o=e[t]=[r,a]));r.push(o[2]=a);var n=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(n,(r=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",s.name="ChunkLoadError",s.type=a,s.request=n,o[1](s)}}),"chunk-"+t,t)}else e[t]=0},__webpack_require__.H.j=t=>{if((!__webpack_require__.o(e,t)||void 0===e[t])&&75980!=t){e[t]=null;var r=document.createElement("link");r.charset="utf-8",__webpack_require__.nc&&r.setAttribute("nonce",__webpack_require__.nc),r.rel="preload",r.as="script",r.href=__webpack_require__.p+__webpack_require__.u(t),document.head.appendChild(r)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[n,s,i]=r,l=0;if(n.some((t=>0!==e[t]))){for(o in s)__webpack_require__.o(s,o)&&(__webpack_require__.m[o]=s[o]);if(i)var c=i(__webpack_require__)}for(t&&t(r);l<n.length;l++)a=n[l],__webpack_require__.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return __webpack_require__.O(c)},r=self.webpackChunkvk=self.webpackChunkvk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),chunkToChildrenMap={46791:[96248],72709:[96248]},__webpack_require__.f.preload=e=>{var t=chunkToChildrenMap[e];Array.isArray(t)&&t.map(__webpack_require__.G)};var __webpack_exports__=__webpack_require__.O(void 0,[75514,98066,56990,76429,24509,76400,40885,68592,44544,33223,74923,61317,35612],(()=>__webpack_require__(237421)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();