(self.webpackChunkvk=self.webpackChunkvk||[]).push([[87454],{931807:e=>{var t=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=t},58255:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(111132);function r(e,t){e.classList?e.classList.add(t):(0,n.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},111132:(e,t,o)=>{"use strict";function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}o.d(t,{default:()=>n})},374277:(e,t,o)=>{"use strict";function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function r(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}o.d(t,{default:()=>r})},891047:(e,t,o)=>{"use strict";function n(e){return new Promise(((t,o)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>o(e.error)}))}function r(e,t){const o=indexedDB.open(e);o.onupgradeneeded=()=>o.result.createObjectStore(t);const r=n(o);return(e,o)=>r.then((n=>o(n.transaction(t,e).objectStore(t))))}let s;function i(){return s||(s=r("keyval-store","keyval")),s}function a(e,t=i()){return t("readonly",(t=>n(t.get(e))))}function l(e,t,o=i()){return o("readwrite",(o=>(o.put(t,e),n(o.transaction))))}function c(e,t,o=i()){return o("readwrite",(o=>new Promise(((r,s)=>{o.get(e).onsuccess=function(){try{o.put(t(this.result),e),r(n(o.transaction))}catch(e){s(e)}}}))))}function u(e,t=i()){return t("readwrite",(t=>(t.delete(e),n(t.transaction))))}function d(e=i()){return e("readwrite",(e=>(e.clear(),n(e.transaction))))}o.d(t,{clear:()=>d,createStore:()=>r,del:()=>u,get:()=>a,set:()=>l,update:()=>c})},759244:()=>{},963328:()=>{},403658:()=>{},861848:()=>{},458327:()=>{},814106:()=>{},170490:()=>{},895593:()=>{},351667:()=>{},974580:()=>{},936021:()=>{},97839:()=>{},628392:()=>{},241676:()=>{},848056:()=>{},833249:()=>{},126449:()=>{},635800:function(e,t,o){!function(e,t){"use strict";function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(o){if("default"!==o){var n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,n.get?n:{enumerable:!0,get:function(){return e[o]}})}})),t.default=e,Object.freeze(t)}var n=o(t);function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}var i=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,o){return!Object.is(e,t[o])}))},a={error:null},l=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state=a,t.resetErrorBoundary=function(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];null==t.props.onReset||(e=t.props).onReset.apply(e,n),t.reset()},t}s(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var o=t.prototype;return o.reset=function(){this.setState(a)},o.componentDidCatch=function(e,t){var o,n;null==(o=(n=this.props).onError)||o.call(n,e,t)},o.componentDidUpdate=function(e,t){var o,n,r=this.state.error,s=this.props.resetKeys;null!==r&&null!==t.error&&i(e.resetKeys,s)&&(null==(o=(n=this.props).onResetKeysChange)||o.call(n,e.resetKeys,s),this.reset())},o.render=function(){var e=this.state.error,t=this.props,o=t.fallbackRender,r=t.FallbackComponent,s=t.fallback;if(null!==e){var i={error:e,resetErrorBoundary:this.resetErrorBoundary};if(n.isValidElement(s))return s;if("function"==typeof o)return o(i);if(r)return n.createElement(r,i);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(n.Component);function c(e,t){var o=function(o){return n.createElement(l,t,n.createElement(e,o))},r=e.displayName||e.name||"Unknown";return o.displayName="withErrorBoundary("+r+")",o}function u(e){var t=n.useState(null),o=t[0],r=t[1];if(null!=e)throw e;if(null!=o)throw o;return r}e.ErrorBoundary=l,e.useErrorHandler=u,e.withErrorBoundary=c,Object.defineProperty(e,"__esModule",{value:!0})}(t,o(667294))},429697:(e,t,o)=>{"use strict";o.d(t,{default:()=>p});var n=o(487462),r=o(263366),s=o(894578),i=o(58255),a=o(374277),l=o(667294),c=o(696630),u=o(559391),d=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))},h=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,o){var n=t.resolveArguments(e,o),r=n[0],s=n[1];t.removeClasses(r,"exit"),t.addClass(r,s?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,o)},t.onEntering=function(e,o){var n=t.resolveArguments(e,o),r=n[0],s=n[1]?"appear":"enter";t.addClass(r,s,"active"),t.props.onEntering&&t.props.onEntering(e,o)},t.onEntered=function(e,o){var n=t.resolveArguments(e,o),r=n[0],s=n[1]?"appear":"enter";t.removeClasses(r,s),t.addClass(r,s,"done"),t.props.onEntered&&t.props.onEntered(e,o)},t.onExit=function(e){var o=t.resolveArguments(e)[0];t.removeClasses(o,"appear"),t.removeClasses(o,"enter"),t.addClass(o,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var o=t.resolveArguments(e)[0];t.addClass(o,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var o=t.resolveArguments(e)[0];t.removeClasses(o,"exit"),t.addClass(o,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,o){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,o]},t.getClassNames=function(e){var o=t.props.classNames,n="string"==typeof o,r=n?""+(n&&o?o+"-":"")+e:o[e];return{baseClassName:r,activeClassName:n?r+"-active":o[e+"Active"],doneClassName:n?r+"-done":o[e+"Done"]}},t}(0,s.default)(t,e);var o=t.prototype;return o.addClass=function(e,t,o){var n=this.getClassNames(t)[o+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===o&&r&&(n+=" "+r),"active"===o&&e&&(0,u.forceReflow)(e),n&&(this.appliedClasses[t][o]=n,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))}(e,n))},o.removeClasses=function(e,t){var o=this.appliedClasses[t],n=o.base,r=o.active,s=o.done;this.appliedClasses[t]={},n&&d(e,n),r&&d(e,r),s&&d(e,s)},o.render=function(){var e=this.props,t=(e.classNames,(0,r.default)(e,["classNames"]));return l.createElement(c.default,(0,n.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.Component);h.defaultProps={classNames:""},h.propTypes={};const p=h},696630:(e,t,o)=>{"use strict";o.d(t,{default:()=>g});var n=o(263366),r=o(894578),s=o(667294),i=o(973935),a=o(806035),l=o(500220),c=o(559391),u="unmounted",d="exited",h="entering",p="entered",f="exiting",m=function(e){function t(t,o){var n;n=e.call(this,t,o)||this;var r,s=o&&!o.isMounting?t.enter:t.appear;return n.appearStatus=null,t.in?s?(r=d,n.appearStatus=h):r=p:r=t.unmountOnExit||t.mountOnEnter?u:d,n.state={status:r},n.nextCallback=null,n}(0,r.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:d}:null};var o=t.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var o=this.state.status;this.props.in?o!==h&&o!==p&&(t=h):o!==h&&o!==p||(t=f)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,o,n=this.props.timeout;return e=t=o=n,null!=n&&"number"!=typeof n&&(e=n.exit,t=n.enter,o=void 0!==n.appear?n.appear:t),{exit:e,enter:t,appear:o}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===h){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);o&&(0,c.forceReflow)(o)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===d&&this.setState({status:u})},o.performEnter=function(e){var t=this,o=this.props.enter,n=this.context?this.context.isMounting:e,r=this.props.nodeRef?[n]:[i.findDOMNode(this),n],s=r[0],l=r[1],c=this.getTimeouts(),u=n?c.appear:c.enter;!e&&!o||a.default.disabled?this.safeSetState({status:p},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,l),this.safeSetState({status:h},(function(){t.props.onEntering(s,l),t.onTransitionEnd(u,(function(){t.safeSetState({status:p},(function(){t.props.onEntered(s,l)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,o=this.getTimeouts(),n=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!a.default.disabled?(this.props.onExit(n),this.safeSetState({status:f},(function(){e.props.onExiting(n),e.onTransitionEnd(o.exit,(function(){e.safeSetState({status:d},(function(){e.props.onExited(n)}))}))}))):this.safeSetState({status:d},(function(){e.props.onExited(n)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,o=!0;return this.nextCallback=function(n){o&&(o=!1,t.nextCallback=null,e(n))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var o=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),n=null==e&&!this.props.addEndListener;if(o&&!n){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],s=r[0],a=r[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,o=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,n.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return s.createElement(l.default.Provider,{value:null},"function"==typeof o?o(e,r):s.cloneElement(s.Children.only(o),r))},t}(s.Component);function v(){}m.contextType=l.default,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},m.UNMOUNTED=u,m.EXITED=d,m.ENTERING=h,m.ENTERED=p,m.EXITING=f;const g=m},500220:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(667294).createContext(null)},806035:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={disabled:!1}},559391:(e,t,o)=>{"use strict";o.d(t,{forceReflow:()=>n});var n=function(e){return e.scrollTop}},460554:(e,t,o)=>{"use strict";o.d(t,{ConvoAudiosPlaylist:()=>i,isConvoAudioTrack:()=>u,isRestoredConvoAudiosPlaylist:()=>d,mapConvoToConvoAudioTrackList:()=>c,toConvoAudioTrack:()=>a});var n=o(185327),r=o(9452),s=o(89131);class i{getNext(e,t,o){const n=t?this.shuffledList:this.list;return(0,r.getNextTrackFromPlaylist)(e,n,o)}getPrev(e,t,o){const n=t?this.shuffledList:this.list;return(0,r.getPrevTrackFromPlaylist)(e,n,o)}getConvoAudiosList(){return this.list}getPlaylistMeta(){return this.meta}constructor(e){this.list=e.list,this.shuffledList=(0,s.shuffleArray)(this.list),this.meta=e.meta}}function a(e,t,o){let n;"Foreign"===(null==o?void 0:o.kind)&&"rootCmid"in o&&o.rootCmid?n={cmid:o.rootCmid,peerId:o.rootPeerId}:(null==o?void 0:o.peerId)&&(null==o?void 0:o.cmid)&&(n={peerId:o.peerId,cmid:o.cmid});const r=t.thumb,s=(null==r?void 0:r.photo_34)||(null==r?void 0:r.photo_68)||(null==r?void 0:r.photo_135)||(null==r?void 0:r.photo_270)||(null==r?void 0:r.photo_300)||(null==r?void 0:r.photo_600)||(null==r?void 0:r.photo_1200);return{title:t.title,artist:t.artist,trackCode:t.trackCode,fromMessage:n,thumb:s,audioTrack:{id:`${t.ownerId}_${t.id}`,url:t.url,progress:e,duration:t.duration}}}function l(e){var t,o;const n=[];if("Normal"!==e.kind&&"Queued"!==e.kind&&"Foreign"!==e.kind)return n;if(Array.isArray(e.attaches.audios)){const t=[...e.attaches.audios];n.push(...t)}const r=null==(t=e.attaches.wall)?void 0:t.attaches.audios;if(Array.isArray(r)){const e=[...r];n.push(...e)}const s=e.forwardedMessages;Array.isArray(s)&&s.reduce(((e,t)=>(e.push(...l(t)),e)),n);const i="ForeignExpired"===(null==(o=e.replyMessage)?void 0:o.kind)?void 0:e.replyMessage;return i&&n.push(...l(i)),n}function c(e){const t=[],o=n.allHistoryNodes(e).map((e=>({message:e.item})));for(const{message:e}of o){const o="Normal"===e.kind,n="Queued"===e.kind;if(o||n){l(e).filter((e=>!!e.url)).forEach((o=>{const n="Normal"===e.kind?e:void 0;t.push(a(0,o,n))}))}}return(0,r.excludeTracksDoubling)(t)}function u(e){if(!e||"object"!=typeof e)return!1;const{title:t,artist:o,audioTrack:n,trackCode:r,fromMessage:s,thumb:i}=e;if("string"!=typeof t||"string"!=typeof o||!n||"object"!=typeof n||"string"!=typeof r||!s||"object"!=typeof s||"string"!=typeof i)return!1;const{url:a,id:l,duration:c,progress:u}=n;return"string"==typeof a&&"string"==typeof l&&"number"==typeof c&&"number"==typeof u&&("number"==typeof s.cmid&&"number"==typeof s.peerId)}function d(e){if(e&&"object"==typeof e){const{meta:t,list:o}=e;let n=!1,r=!1;if(t&&"object"==typeof t){const{convoPeerId:e,type:o}=t;n="number"==typeof e&&"temp"===o}return o&&Array.isArray(o)&&o.length&&(r=!!o.filter((e=>u(e))).length),n&&r}return!1}},9452:(e,t,o)=>{"use strict";o.d(t,{excludeTracksDoubling:()=>i,getNextTrackFromPlaylist:()=>r,getPrevTrackFromPlaylist:()=>s});var n=o(434788);function r(e,t,o){const r=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),s=r>=0?t[r+1]:void 0;if(s)return(0,n._)({},s,{audioTrack:(0,n._)({},s.audioTrack,{progress:0})});if(!s&&"all"===o){const e=t[0];return e?(0,n._)({},e,{audioTrack:(0,n._)({},e.audioTrack,{progress:0})}):void 0}}function s(e,t,o){const r=t.findIndex((t=>t.audioTrack.id===e.audioTrack.id)),s=t[r-1];if(s)return(0,n._)({},s,{audioTrack:(0,n._)({},s.audioTrack,{progress:0})});if(!s&&"all"===o){const e=t[t.length-1];return e?(0,n._)({},e,{audioTrack:(0,n._)({},e.audioTrack,{progress:0})}):void 0}}function i(e){const t=new Set;return e.filter((e=>!t.has(e.audioTrack.id)&&(t.add(e.audioTrack.id),!0)))}},200028:(e,t,o)=>{"use strict";o.d(t,{ChannelComposerDraftsProvider:()=>d,ComposerDraftsProvider:()=>l,useChannelComposerDraft:()=>c,useComposerDraft:()=>i});var n=o(667294),r=o(400681),s=o(559360);function i(e){const t=(0,n.useContext)(a);if(!t)throw new Error("ComposerDraftsProvider не добавлен в дерево Реакта!");const o=(0,n.useMemo)((()=>r.empty()),[]);return t[e]||o}const a=n.createContext({}),l=a.Provider;function c(e){const t=(0,n.useContext)(u);if(!t)throw new Error("ChannelComposerDraftsProvider не добавлен в дерево Реакта!");const o=(0,n.useMemo)((()=>s.empty()),[]);return t[e]||o}const u=n.createContext({}),d=u.Provider},346006:(e,t,o)=>{"use strict";o.d(t,{Module:()=>i,useGlobalKeyBoardHandlers:()=>u,useModuleKeyBoardHandlers:()=>c});var n=o(89131),r=o(667294),s=o(65970);e=o.hmd(e);const i={PhotoViewer:"PhotoViewer",Modal:"Modal",SimpleComposer:"SimpleComposer",FCComposer:"FCComposer",FCWindow:"FCWindow",RightPanel:"RightPanel",Composer:"Composer",ConvoMain:"ConvoMain"},a={[i.PhotoViewer]:{priority:1001},[i.Modal]:{priority:1e3,blockGlobalHandlers:!0,blockOtherModules:!0},[i.SimpleComposer]:{priority:902},[i.FCComposer]:{priority:901},[i.FCWindow]:{priority:900},[i.RightPanel]:{priority:500},[i.Composer]:{priority:200},[i.ConvoMain]:{priority:100}};const l=new class{constructor(){this.isSubscribed=!1,this.isGlobalHandlersBlocked=!1,this.globalHandlers=new Map,this.moduleConfig=new Map(Object.entries(a)),this.moduleHandlers=new Map,this.subscribeModuleKeyDown=(t,o)=>{if(n.isDev&&!this.moduleConfig.has(t))throw new Error(`Module ${e} must be in moduleConfig.`);var r;const s=null!=(r=this.moduleHandlers.get(t))?r:new Set;return s.add(o),this.moduleHandlers.set(t,s),this.onModuleHandlersUpdated(),()=>{s.delete(o),0===s.size&&this.moduleHandlers.delete(t),this.onModuleHandlersUpdated()}},this.subscribeGlobalKeyDown=(e,t)=>{const o=this.globalHandlers.has(e);if(n.isDev&&o)throw new Error(`Global keyCombo ${e} is already subscribed. Unsubscribe it first`);return this.globalHandlers.set(e,t),this.updateSubscription(),()=>{this.globalHandlers.delete(e),this.updateSubscription()}},this.addModuleConfig=(e,t)=>{this.moduleConfig.set(e,t)},this.updateSubscription=()=>{const e=this.globalHandlers.size>0||this.moduleHandlers.size>0;e&&!this.isSubscribed&&(document.addEventListener("keydown",this.keyDownHandler),this.isSubscribed=!0),!e&&this.isSubscribed&&(document.removeEventListener("keydown",this.keyDownHandler),this.isSubscribed=!1)},this.onModuleHandlersUpdated=()=>{this.updateGlobalHandlersBlocked(),this.updateSubscription()},this.callModuleSubscription=(e,t)=>{const o=[...this.moduleConfig.entries()].sort(((e,t)=>t[1].priority-e[1].priority)).map((([e])=>e));for(let r=0;r<o.length;r++){var n;const s=o[r];if(void 0===s)continue;const i=this.moduleHandlers.get(s);if(!i)continue;let a=!1;const l=t=>{const o=t===e;return o&&(a=!0),o};for(let e of Array.from(i).reverse())if(e(l,t),a)break;if(a=a||!!(null==(n=this.moduleConfig.get(s))?void 0:n.blockOtherModules),a)break}},this.callGlobalSubscription=(e,t)=>{if(this.isGlobalHandlersBlocked)return void t();const o=this.globalHandlers.get(e);o&&(!1!==o.autoPreventDefault?(t(),o.handler()):o.handler(t))},this.updateGlobalHandlersBlocked=()=>{const e=[...this.moduleHandlers.keys()].some((e=>{var t;return null==(t=this.moduleConfig.get(e))?void 0:t.blockGlobalHandlers}));this.isGlobalHandlersBlocked=e},this.keyDownHandler=e=>{if(!(e instanceof KeyboardEvent))return;const t=(0,s.getKeyCombo)(e),o=e.preventDefault.bind(e);(0,s.isGlobalKeyCombo)(t)?this.callGlobalSubscription(t,o):(0,s.isModuleKeyCombo)(t)&&this.canCallModuleSubscription()&&this.callModuleSubscription(t,o)},this.canCallModuleSubscription=()=>{const e=document.activeElement;return null===e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName&&!(e instanceof HTMLElement&&!0===e.isContentEditable)}}};function c({moduleName:e,config:t}){void 0!==t&&l.addModuleConfig(e,t);return{subscribeKeyDown:(0,r.useCallback)((t=>l.subscribeModuleKeyDown(e,t)),[e])}}const u=()=>({subscribeGlobalKeyDown:l.subscribeGlobalKeyDown})},410519:(e,t,o)=>{"use strict";o.d(t,{useModal:()=>i,useModalGroup:()=>l,useSubModal:()=>a});var n=o(667294),r=o(883950),s=o(171656);const i=(e,t="popup")=>c({groupId:e,stackName:t}),a=e=>c({groupId:e,isSubModal:!0}),l=()=>{const{createGroup:e,closeGroup:t}=(0,s.useModalContext)(),o=(0,n.useRef)();o.current||(o.current=e());const{id:r}=o.current.data,i=(0,n.useCallback)((()=>t(r)),[t,r]);return(0,n.useEffect)((()=>()=>{var e;null==(e=o.current)||e.remove()}),[]),{id:r,closeGroup:i}},c=e=>{var t;const o=null!=(t=null==e?void 0:e.stackName)?t:"popup",{createModal:i,createGroup:a,getModalGroup:l,closeModalForced:c}=(0,s.useModalContext)(),d=(0,n.useRef)();d.current||(d.current=(null==e?void 0:e.groupId)?{data:l(e.groupId)}:a());const h=(0,n.useRef)();h.current||(h.current=i(d.current.data.id,null==e?void 0:e.isSubModal,(null==e?void 0:e.id)?r.resolveId(e.id):void 0));const p=h.current.id;return(0,n.useEffect)((()=>()=>{var e,t;c(p,o),null==(e=d.current)||null==e.remove||e.remove(),null==(t=h.current)||t.remove()}),[c,p,o]),u(p,o)},u=(e,t)=>{const{openedModals:o,openModal:r,closeModal:i,findIndexInStack:a}=(0,s.useModalContext)(),l=(0,n.useCallback)((()=>r(e,t)),[r,e,t]),c=(0,n.useCallback)((()=>i(e,t)),[i,e,t]),u=a(e,t);return(0,n.useMemo)((()=>({isActive:Boolean(o[t].find((t=>t===e))),indexInStack:u,isInStack:null!==u,open:l,close:c})),[c,e,l,o,u,t])}},599660:(e,t,o)=>{"use strict";o.d(t,{ActionsMenu:()=>d,ActionsMenuAction:()=>h,ActionsMenuDropdownAction:()=>p,ActionsMenuSeparator:()=>f});var n=o(434788),r=o(820224),s=(o(759244),o(667294)),i=o(294184),a=o.n(i),l=o(364548),c=o(163332),u=o(966933);const d=e=>{var{className:t,children:o}=e,i=(0,r._)(e,["className","children"]);return s.createElement("div",(0,n._)({},i,{className:a()("ActionsMenu",t)}),o)},h=e=>{var{leftIcon:t,rightIcon:o,title:i,subtitle:l,type:c="secondary",size:u="regular",isActive:d=!1,isLoading:h,className:p,onClick:f,titleClassName:m}=e,v=(0,r._)(e,["leftIcon","rightIcon","title","subtitle","type","size","isActive","isLoading","className","onClick","titleClassName"]);return s.createElement("button",(0,n._)({},v,{className:a()("ActionsMenuAction",c&&`ActionsMenuAction--${c}`,h&&"ActionsMenuAction--loading",d&&"ActionsMenuAction--active",`ActionsMenuAction--size-${u}`,p),onClick:f}),t&&s.createElement("i",{className:"ActionsMenuAction__icon"},t),s.createElement("span",{className:a()("ActionsMenuAction__title",m)},i,l&&s.createElement("span",{className:"ActionsMenuAction__subtitle"},l)),o&&s.createElement("i",{className:"ActionsMenuAction__icon"},o))},p=e=>{var{children:t,icon:o,openType:i,hideOnClick:p=!0,position:f,align:m,actionsMenuClassName:v}=e,g=(0,r._)(e,["children","icon","openType","hideOnClick","position","align","actionsMenuClassName"]);const[E,b]=(0,s.useState)(!1),{mode:y}=(0,u.useLayoutData)(),w=(0,s.useMemo)((()=>{const e="two-column"===y?{position:"right",align:"left"}:{position:"bottom",align:"right"};return f&&(e.position=f),m&&(e.align=m),e}),[y,f,m]);return s.createElement(c.Dropdown,(0,n._)({content:s.createElement(d,{className:a()(v,{"ActionsMenu--dropdown":"two-column"===y})},t)},"click"===i?{openType:"click"}:{openType:"hover",hideDelay:0},w,{classNames:{trigger:"ActionsMenu--dropdown-trigger"},adaptation:"vertical",onOpen:()=>b(!0),onClose:()=>b(!1),hideOnClick:p,canOpen:!g.disabled}),s.createElement(h,(0,n._)({},g,{isActive:E,leftIcon:o,rightIcon:s.createElement(l.Icon16Chevron,null)})))},f=({className:e})=>s.createElement("div",{role:"separator",className:a()("ActionsMenuAction__separator",e)})},202158:(e,t,o)=>{"use strict";o.d(t,{AttachAudio:()=>d});o(963328);var n=o(667294),r=o(294184),s=o.n(r),i=o(89131),a=o(696023),l=o(579957),c=o(460554),u=o(364705);const d=n.memo((function({audio:e,message:t}){return Boolean(e.contentRestricted)?n.createElement(f,{audio:e}):n.createElement(p,{audio:e,message:t})}));function h(e,t=!0){return(t?"-":"")+Math.floor(e/60).toString().split("").fill("0").join("")+":00"}const p=n.memo((function({audio:e,message:t}){const{player:o}=(0,a.useBrowserEnv)(),r=(0,n.useContext)(l.ConvoAudiosPlaylistContext),[s,i]=(0,n.useState)("stopped"),[u,d]=(0,n.useState)(0),h=(0,n.useRef)(`${e.ownerId}_${e.id}`),p=(0,n.useCallback)((e=>{const{currentTrackEntity:t,status:o}=e;if((null==t?void 0:t.audioTrack)&&t.audioTrack.id===h.current){const{progress:e}=t.audioTrack;i(o),d(e)}}),[]);(0,n.useEffect)((()=>(o.subscribe("stateupdated",p),()=>{o.unsubscribe("stateupdated",p)})),[e,p,o]),(0,n.useEffect)((()=>{p(o.getState())}),[]);const f=(0,n.useCallback)((n=>{if(e.url){if("playing"===s)o.pause();else{const n=r(),s="Foreign"===(null==t?void 0:t.kind)||"Normal"===(null==t?void 0:t.kind)?t:void 0;o.play((0,c.toConvoAudioTrack)(u,e,s),n)}n.preventDefault()}}),[e,s,o,r,u,t]);return n.createElement(m,{progress:u,artist:e.artist,title:e.title,duration:e.duration,status:s,onClick:f})}));function f({audio:e}){const{navigate:t}=(0,u.useRouter)();return n.createElement(m,{progress:0,artist:e.artist,title:e.title,duration:e.duration,status:"stopped",className:"AttachAudio__restricted",onClick:()=>{t({kind:"AudioRestrictionRuntimeRoute",audio:e})}})}const m=({progress:e,duration:t,artist:o,title:r,status:a,className:l,onClick:c})=>n.createElement("div",{className:s()("AttachAudio",l,{"AttachAudio--active":"playing"===a||"paused"===a,"AttachAudio--playing":"playing"===a})},n.createElement("button",{className:"AttachAudio__play",onClick:c},n.createElement("div",{className:s()("AttachAudio__playIcon","playing"===a&&"AttachAudio__playIcon--playing")},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:8,height:10,fill:"currentColor"},"playing"!==a&&n.createElement("path",{d:"M1.54 9.4A1 1 0 010 8.58V1.43A1 1 0 011.54.59l5.9 3.82a.7.7 0 010 1.18L1.54 9.4z"}),"playing"===a&&n.createElement("path",{d:"M.6 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H.6zm5 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H5.6z"})))),n.createElement("div",{className:"AttachAudio__title"},r),n.createElement("div",{className:"AttachAudio__artist"},o),n.createElement("div",{className:"AttachAudio__duration","data-filler":h(t)},n.createElement("div",{className:"AttachAudio__durationIn"},"playing"===a||"paused"===a?((e,t)=>{const o=Math.floor(t*(1-e));return"-"+(0,i.formatDuration)(o)})(e,t):(0,i.formatDuration)(t))))},76292:(e,t,o)=>{"use strict";o.d(t,{AttachDoc:()=>x});o(403658);var n=o(667294),r=o(197934),s=o(824283),i=o(597298),a=o(89131),l=o(294184),c=o.n(l),u=o(696023),d=o(15285),h=o(401208),p=o(410519),f=o(671324),m=o(874971),v=o(964929),g=o(798855),E=o(234325),b=o(506315),y=o(86894),w=o(388918);const x=({doc:e,variant:t="inline",isInBubble:o=!1,forwardLevel:l=0,isOut:f=!1,className:m})=>{const v=(0,u.usePixelDensity)(),[,g]=(0,d.getExpectedAttachWidth)(v,o,l,232),E=(0,p.useModal)(),b=(0,n.useCallback)((t=>{e.isUnsafe&&(0!==t.button&&1!==t.button||(t.preventDefault(),E.open()))}),[e.isUnsafe,E]),y=r.preview(e,g),w=e.ext.toUpperCase()+" · "+(0,a.formatFileSize)(e.size);return"preview"===t&&e.image?n.createElement(h.AttachDocPreview,{doc:e,meta:w,isInBubble:o,forwardLevel:l}):n.createElement(n.Fragment,null,n.createElement(i.ExternalLink,{onClick:b,onAuxClick:b,href:e.url,className:c()("AttachDoc",m),download:!e.image},n.createElement("figure",{className:c()("AttachDoc__icon",{"AttachDoc__icon--isOut":f})},y?n.createElement("img",{src:y.url,alt:e.title}):n.createElement(s.Icon24DocumentOutline,null)),n.createElement("div",{className:"AttachDoc__title"},e.title),n.createElement("div",{className:"AttachDoc__meta"},w)),E.isActive&&n.createElement(C,{onClose:E.close,title:e.title,url:e.url}))},C=({onClose:e,url:t,title:o})=>{const{lang:r}=(0,u.useBrowserEnv)();return n.createElement(f.ModalView,{onEscape:e,contextClass:"MEConfig"},n.createElement(m.ModalBackdrop,{onClick:e},n.createElement(v.ModalPanel,{className:"AttachDoc__unsafe-modal"},n.createElement(g.ModalHeader,{closeLabel:r.use("me_close"),onClose:e,title:r.use("me_download_unsafe_title")}),n.createElement(E.ModalBody,null,n.createElement(w.FormattedLangKey,{langkey:"me_download_unsafe_text",values:{filename:n.createElement("b",{className:"AttachDoc__unsafe-filename"},o)}})),n.createElement(b.ModalFooter,{buttons:[n.createElement(y.Button,{mode:"tertiary",key:"cancel",onClick:e},r.use("me_cancel")),n.createElement(y.Button,{href:t,download:!0,mode:"primary",onClick:e,key:"download"},r.use("me_download"))]}))))}},401208:(e,t,o)=>{"use strict";o.d(t,{AttachDocPreview:()=>u});o(861848);var n=o(667294),r=o(197934),s=o(597298),i=o(803524),a=o(996955),l=o(696023),c=o(15285);const u=({doc:e,meta:t,isInBubble:o=!1,forwardLevel:u=0})=>{const[d,h]=(0,n.useState)(!1),p=(0,l.usePixelDensity)(),f="gif"===e.ext,[m,v]=(0,c.getExpectedAttachWidth)(p,o,u,232),g=r.preview(e,v);if(!g)return null;const E=Math.min(g.width,m),b=Math.ceil(g.height/g.width*E);return n.createElement(s.ExternalLink,{href:e.url,className:"AttachDocPreview",style:{width:E,height:b},onClick:f?e=>{h((e=>!e)),e.preventDefault()}:void 0,target:f?"_self":"_blank"},f&&!d&&n.createElement("div",{className:"AttachDocPreview__play"},n.createElement(a.Icon32Play,null)),n.createElement("img",{src:d?e.url:g.url,alt:e.title}),n.createElement(i.ComposerAttachPreviewMeta,{rounded:!0,top:!0,left:!0},n.createElement("span",{className:"AttachDocPreview__meta"},t)))}},650938:(e,t,o)=>{"use strict";o.d(t,{AttachVideos:()=>m,getDuration:()=>v});var n=o(434788),r=(o(458327),o(667294)),s=o(197934),i=o(294184),a=o.n(i),l=o(996955),c=o(89131),u=o(597298),d=o(15285),h=o(704057),p=o(747578),f=o(293216);const m=({videos:e,forwardLevel:t=0,additionalLinkPayload:o,onWidthChange:i})=>{const c=(0,d.getAttachForwardIndent)(t),{width:m,minHeight:g,maxSingleHeight:E,preferredRatio:b}=(0,h.useImagesLayout)(),y=m-c,w=1===e.length,x=(0,r.useMemo)((()=>e.reduce(((e,t)=>e+"__"+t.id),`${y}__${g}__${b}`)),[e,y,g,b]),C=(0,r.useMemo)((()=>{const t=e.reduce(((e,t)=>{const o=s.preview(t,y);return o&&e.push((0,n._)({},o,{videoAttach:t})),e}),[]);return t.length?(0,p.computeAttachePhotosLayout)(b,y,{minHeight:g,maxSingleHeight:E},t):null}),[e,g,E,b,y]),k=(0,r.useMemo)((()=>{var e;return null==C||null==(e=C[0])?void 0:e.reduce(((e,t)=>e+t.width),0)}),[C]);return(0,r.useEffect)((()=>{null==i||i(k)}),[i,k]),C?r.createElement("div",{className:"AttachVideos AttachVideos--inBubble","data-width":k,style:{maxWidth:w?"max-content":y}},C.map(((t,n)=>r.createElement("div",{className:"AttachVideos__layoutRow",key:`${n}__${x}`},t.map((({width:t,height:n,url:s,videoAttach:i})=>{var c,d;const{id:h,duration:p,platform:m,files:g,restriction:E}=i,b=1===(null==E?void 0:E.blur),y=0===(null==E?void 0:E.can_play),w=v(p,!!(null==g?void 0:g.external))||m;return r.createElement(u.Link,{to:{kind:"AttachMediaProxyRoute",attach:i,source:o},className:"AttachVideos__link",key:h},r.createElement(f.PhotoItem,{width:Math.ceil(t),height:Math.ceil(n),src:s,alt:i.title,className:a()({AttachVideos__previewBackdrop:b||y})}),!b&&r.createElement(r.Fragment,null,e.length<=3&&r.createElement("div",{className:"AttachVideos__videoPlay"},r.createElement(l.Icon32Play,null)),w&&r.createElement("div",{className:"AttachVideos__videoInfo"},w)),(b||y)&&r.createElement("div",{className:"AttachVideos__videoRestrictionWrap"},r.createElement("div",{className:"AttachVideos__videoIconRestriction",style:{backgroundImage:`url('${null==(c=null==E||null==(d=E.card_icon)?void 0:d.slice(-1).pop())?void 0:c.url}')`,filter:"invert(100%)"}}),void 0!==(null==E?void 0:E.title)&&r.createElement("div",null,E.title)))})))))):null};function v(e,t){return void 0===e?"":!t||t&&e?(0,c.formatDuration)(e):""}},803524:(e,t,o)=>{"use strict";o.d(t,{ComposerAttachPreviewMeta:()=>a});var n=o(434788),r=(o(814106),o(667294)),s=o(294184),i=o.n(s);const a=({children:e,rounded:t,offsetLength:o=5,top:s,right:a,bottom:l,left:c})=>{const u=["ComposerAttachPreviewMeta",{"ComposerAttachPreviewMeta--rounded":t}],d=o+"px",h=(0,n._)({},s&&{top:d},a&&{right:d},l&&{bottom:d},c&&{left:d},{maxWidth:`calc(100% - ${2*o}px)`});return r.createElement("div",{className:i()(u),style:h},e)}},704057:(e,t,o)=>{"use strict";o.d(t,{ImagesLayoutProvider:()=>s,useImagesLayout:()=>i});var n=o(667294);const r=n.createContext(void 0),s=r.Provider,i=()=>{const e=(0,n.useContext)(r);if(!e)throw Error("Все аттачи фото должны сопровождаться контекстом размеров");return e}},163332:(e,t,o)=>{"use strict";o.d(t,{Dropdown:()=>m});var n=o(434788),r=o(820224),s=(o(170490),o(667294)),i=o(429697),a=o(837492),l=o(294184),c=o.n(l),u=o(89131),d=o(696023),h=o(966933);const p=150,f=(0,s.createContext)(void 0),m=e=>{var{openType:t="hover",delay:o,hideDelay:l=p,classNames:m={},content:g,children:E,hideOnClick:b,hideOnScroll:y,hideOnMouseLeave:w,canOpen:x=!0,open:C=!1,onOpen:k,onClose:M,forceUpdateContent:R}=e,S=(0,r._)(e,["openType","delay","hideDelay","classNames","content","children","hideOnClick","hideOnScroll","hideOnMouseLeave","canOpen","open","onOpen","onClose","forceUpdateContent"]);const[A,_]=(0,s.useState)(!1),N=(0,d.usePrevious)(A),O=(0,d.usePrevious)(C),[P,L]=(0,s.useState)(g),{isTouchOnly:T}=(0,h.useDeviceData)(),D=T&&"hover"===t?"click":t,{displayState:I,$content:H,$trigger:W,onClick:z,onHover:B,handleHide:F,handleOpened:V,handleClosed:j}=function({canOpen:e,open:t,openType:o,delay:n,hideDelay:r,hideOnMouseLeave:i,childOpen:a}){const[l,c]=(0,s.useState)("closed"),d=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useContext)(f),m=(0,s.useCallback)((e=>{c((t=>{let o;switch(o="function"==typeof e?e(t):e,o){case"opening":case"opened":null==p||p.setChildOpen(!0);break;case"closing":case"closed":null==p||p.setChildOpen(!1);break;default:(0,u.exhaustivenessCheck)(o)}return o}))}),[p]),{hideOnHover:g,onMouseOver:E}=function({open:e,canOpen:t,delay:o,hideDelay:n,hideOnMouseLeave:r,openType:i,displayState:a,setDisplayState:l,$content:c,$trigger:u,childOpen:d}){const h=(0,s.useRef)(null),p=(0,s.useRef)(null),f=(0,s.useRef)(null),m=(0,s.useRef)(a);m.current=a;const v=(0,s.useRef)(d);v.current=d;const g=(0,s.useCallback)((()=>{var e,t;return(null==(e=u.current)?void 0:e.matches(":hover"))||(null==(t=c.current)?void 0:t.matches(":hover"))}),[c,u]),E=(0,s.useCallback)((e=>{e.current&&(window.clearTimeout(e.current),e.current=null)}),[]),b=(0,s.useCallback)((()=>{f.current&&(window.cancelAnimationFrame(f.current),f.current=null)}),[]),y=(0,s.useRef)(void 0===e);y.current=void 0===e;const w=(0,s.useCallback)(((e=n,t=!0)=>{if("hover"!==i&&!r)return;E(h);const o="closed"===m.current||"closing"===m.current;if(p.current||o)return;y.current=t;const s=()=>{l((e=>"opened"===e?"closing":"closed")),E(p)};e&&"opened"===m.current?p.current=window.setTimeout((()=>{g()?E(p):s()}),e):s()}),[n,i,r,E,l,g]);(0,s.useLayoutEffect)((()=>{h.current&&(t||E(h))}),[E,h,t]);const x=(0,s.useCallback)((()=>{if("hover"!==i||!t)return;E(p);const e="opened"===m.current||"opening"===m.current;if(h.current||e)return;y.current=!0;const n=()=>{l((e=>"closed"===e?"opening":"opened")),E(h)};o&&"closed"===m.current?h.current=window.setTimeout(n,o):n()}),[o,t,i,l,E]),C=(0,s.useCallback)((()=>{const e=()=>{g()||v.current?("closing"!==m.current||y.current)&&x():(r&&"opened"===m.current&&w(500,!0),r||w())};b(),f.current=window.requestAnimationFrame(e)}),[b,g,w,r,x]);return(0,s.useEffect)((()=>("hover"!==i&&!r||"closed"===a||(C(),document.addEventListener("mousemove",C,{passive:!0}),document.addEventListener("wheel",C,{passive:!0})),()=>{document.removeEventListener("mousemove",C),document.removeEventListener("wheel",C)})),[r,a,C,i,b,d]),(0,s.useEffect)((()=>()=>{E(h),E(p),b()}),[]),(0,s.useEffect)((()=>{!1===e&&(document.removeEventListener("mousemove",C),document.removeEventListener("wheel",C))}),[e,C,E,b]),{onMouseOver:x,hideOnHover:w}}({open:t,canOpen:e,delay:n,hideDelay:r,hideOnMouseLeave:i,openType:o,displayState:l,setDisplayState:m,$content:d,$trigger:h,childOpen:a}),{onClick:b}=function({$content:e,$trigger:t,openType:o,setDisplayState:n,canOpen:r}){const i=(0,s.useCallback)((e=>{"click"!==o&&"contextmenu"!==o&&"longtouch"!==o||(null==e||e.stopPropagation(),"contextmenu"===o&&(null==e||e.preventDefault()),n((e=>{switch(e){case"opening":return"closed";case"closed":return r?"opening":"closed";case"opened":case"closing":return"closing";default:return(0,u.exhaustivenessCheck)(e)}})))}),[o,n,r]);return(0,s.useEffect)((()=>{if("longtouch"!==o)return;const e=t.current;if(!e)return;let n;const r=()=>{n&&(window.clearTimeout(n),n=void 0)},s=()=>{r();const t=o=>{e.removeEventListener("touchend",t,!0),o.preventDefault(),o.stopPropagation()};e.addEventListener("touchend",t,{capture:!0,once:!0}),i()},a=()=>{r(),n=window.setTimeout(s,v)};return e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("touchcancel",r,!0),e.addEventListener("touchend",r,!0),e.addEventListener("touchmove",r,{passive:!0}),()=>{r(),e.removeEventListener("touchstart",a),e.removeEventListener("touchcancel",r,!0),e.removeEventListener("touchend",r,!0),e.removeEventListener("touchmove",r)}}),[t,i,o]),(0,s.useEffect)((()=>{const t=t=>{t.stopPropagation(),("click"===o||"contextmenu"===o||"longtouch"===o)&&e.current&&t.target instanceof Node&&!e.current.contains(t.target)&&i()};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[e]),{onClick:i}}({$content:d,$trigger:h,openType:o,setDisplayState:m,canOpen:e});(0,s.useLayoutEffect)((()=>{m((o=>t&&e||"closed"===o?e&&t&&"opened"!==o?"opening":o:d.current?"closing":"closed"))}),[t,e,m]);const y=(0,s.useCallback)((()=>{m("opened")}),[m]),w=(0,s.useCallback)((()=>{m("closed")}),[m]),x=(0,s.useCallback)(((e,t)=>{b(),g(e,t)}),[g,b]);return{displayState:l,$content:d,$trigger:h,onClick:b,onHover:E,handleHide:x,handleOpened:y,handleClosed:w}}({canOpen:x,open:C,openType:D,delay:o,hideDelay:l,childOpen:A,hideOnMouseLeave:w}),U=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),b&&F(0,!1)}),[b,F]);(0,s.useEffect)((()=>{if(!y||"opened"!==I)return;const e=({target:e})=>{var t;e instanceof Node&&(null==(t=H.current)?void 0:t.contains(e))||F(0,!1)};return document.addEventListener("wheel",e),()=>{document.removeEventListener("wheel",e)}}),[H,I,F,y]);(0,s.useEffect)((()=>{"opened"===I&&(null==k||k()),"closed"===I&&(null==M||M())}),[I]),(0,s.useEffect)((()=>{const e=!A&&N,t=!C&&O;!R&&(["closing","opening"].includes(I)||e||t)||L(g)}),[A,g,I,N,R,C,O]);return s.createElement("div",{className:c()("DropdownReforged",m.wrapper,{[m.wrapperOpened||"DropdownReforged--opened"]:"opened"===I,[m.wrapperClosed||"DropdownReforged--closed"]:"closed"===I})},s.createElement(f.Provider,{value:(0,s.useMemo)((()=>({setChildOpen:_})),[_])},s.createElement(a.Popper,(0,n._)({ref:W},S,{mode:"side",portalClassName:m.portal,onMouseEnter:B,open:"closed"!==I,content:s.createElement(i.default,{nodeRef:H,in:"opening"===I||"opened"===I,addEndListener:e=>{var t;return null==(t=H.current)?void 0:t.addEventListener("transitionend",e,!1)},mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"DropdownReforged__contentWrapper-",onEntered:V,onExited:j},s.createElement("div",{ref:H,className:c()("DropdownReforged__contentWrapper",m.contentWrapper),onClickCapture:e=>{A||b&&"closing"===I&&(e.preventDefault(),e.stopPropagation())},onClick:U},P))}),s.createElement("div",{className:c()("DropdownReforged__trigger",m.trigger),onMouseOver:B,onMouseEnter:B,onClick:"click"===D?z:void 0,onContextMenu:"contextmenu"===D?z:e=>{e.preventDefault()}},E))))};const v=500},388918:(e,t,o)=>{"use strict";o.d(t,{FormattedLangKey:()=>l});var n=o(434788),r=o(820224),s=o(667294),i=o(696023),a=o(89131);const l=e=>{const{lang:t}=(0,i.useBrowserEnv)(),{className:o,langkey:l}=e,c=(0,r._)(e,["className","langkey"]);return t.fold(l,(e=>s.createElement(s.Fragment,null,e)),(e=>(a.isDev&&(e=e.map(((e,t)=>"string"==typeof e?s.createElement(s.Fragment,{key:t},e):s.cloneElement(e,(0,n._)({},e.props,{key:t}))))),s.createElement("span",{className:o},e))),c)}},576241:(e,t,o)=>{"use strict";o.d(t,{LayerProvider:()=>s,useLayer:()=>i});var n=o(667294);o(973935);const r=(0,n.createContext)({}),s=({layer:e,children:t})=>n.createElement(r.Provider,{value:(0,n.useMemo)((()=>({layer:e})),[e])},t),i=()=>{const{layer:e}=(0,n.useContext)(r);return e||void 0}},597298:(e,t,o)=>{"use strict";o.d(t,{ExternalLink:()=>u,Link:()=>c});var n=o(434788),r=o(820224),s=o(667294),i=o(696023),a=o(781982),l=o(80497);const c=(0,s.forwardRef)(((e,t)=>{var{to:o,children:l,onNavigate:c,stopPropagation:d=!0,disabled:h,options:p}=e,f=(0,r._)(e,["to","children","onNavigate","stopPropagation","disabled","options"]);const{router:m}=(0,i.useBrowserEnv)(),v="AttachMediaProxyRoute"===o.kind?(0,n._)({},o,{tab:m.currentRoute.tab}):o,g=m.toUrl(v),E=a.IRouter.isProxyRoute(o)?m.fromProxyRoute(o):o,b=e=>{d&&e.stopPropagation(),f.onClick?f.onClick(e):(m.openLink(e,o,p),null==c||c())};return!g||h?s.createElement("span",(0,n._)({},f,{ref:t}),l):E?s.createElement("a",(0,n._)({},f,{href:g,ref:t,onClick:b}),l):s.createElement(u,(0,n._)({},f,{href:g,ref:t,onClick:b}),l)})),u=(0,s.forwardRef)(((e,t)=>{var{children:o,href:a,target:c,disabled:u,onClick:d}=e,h=(0,r._)(e,["children","href","target","disabled","onClick"]);const{vkDomain:p}=(0,i.useBrowserEnv)(),f=(0,i.useCombinedRefs)(t);return u?s.createElement("span",(0,n._)({},h,{ref:f}),o):s.createElement("a",(0,n._)({},h,{ref:f,onClick:d,href:h.download?a:(0,l.prepareLink)(p,a),target:c||"_blank",rel:"noopener noreferrer"}),o)}))},874971:(e,t,o)=>{"use strict";o.d(t,{ModalBackdrop:()=>a});o(895593);var n=o(667294),r=o(294184),s=o.n(r),i=o(876620);const a=({isClear:e,isBodyScrollDisabled:t,onClick:o,children:r})=>{const a=s()("RE_ModalBackdrop",{"RE_ModalBackdrop--tinted":!e}),{isFullScreen:l}=(0,n.useContext)(i.ModalConfigContext),c=s()("RE_ModalBackdrop__container",l?"RE_ModalBackdrop__container--fullScreen":"RE_ModalBackdrop__container--window");var u;return u=Boolean(t),(0,n.useEffect)((()=>{const e=document.body;if(!u)return;const t=e.getBoundingClientRect(),o=window.innerWidth-(t.left+t.right);if(0===o)return;let n=document.createElement("style");return n.innerText="body { overflow-y: hidden !important; }",e.appendChild(n),e.style.borderRight=`${o}px solid transparent`,()=>{e.style.borderRight="",e.removeChild(n)}}),[u]),n.createElement("div",{className:a},o&&n.createElement("div",{className:"RE_ModalBackdrop__flesh",onClick:o}),n.createElement("div",{className:c},r))}},234325:(e,t,o)=>{"use strict";o.d(t,{ModalBody:()=>l});o(351667);var n=o(667294),r=o(294184),s=o.n(r),i=o(24087),a=o(876620);const l=({children:e,withCustomLayout:t,withScrollHandling:o})=>{const{isFullScreen:r}=(0,n.useContext)(a.ModalConfigContext),l=s()("RE_ModalBody",{"RE_ModalBody--standard":!t,"RE_ModalBody--scrollable":o,"RE_ModalBody--fullScreen":r}),c=o?i.default:"div";return n.createElement(c,{className:l},e)}},876620:(e,t,o)=>{"use strict";o.d(t,{ModalConfigContext:()=>s,ModalsConfigProvider:()=>i});var n=o(667294),r=o(966933);const s=(0,n.createContext)({isFullScreen:!1}),i=({children:e})=>{const t=(0,r.useLayoutData)(),o=(0,n.useMemo)((()=>({isFullScreen:"one-column"===t.mode})),[t.mode]);return n.createElement(s.Provider,{value:o},e)}},506315:(e,t,o)=>{"use strict";o.d(t,{ModalFooter:()=>r});o(974580);var n=o(667294);const r=({buttons:e,hint:t,children:o})=>n.createElement("footer",{className:"RE_ModalFooter"},t&&n.createElement("div",{className:"RE_ModalFooter__hint"},t),o&&n.createElement("div",{className:"RE_ModalFooter__content"},o),e&&n.createElement("div",{className:"RE_ModalFooter__actions"},e))},798855:(e,t,o)=>{"use strict";o.d(t,{ModalHeader:()=>l});o(936021);var n=o(667294),r=o(864032),s=o(315954),i=o(294184),a=o.n(i);const l=({onClose:e,closeLabel:t,backLabel:o,onBack:i,title:l,children:c,className:u,closeClassName:d})=>n.createElement("header",{className:a()("RE_ModalHeader",u)},n.createElement("div",{className:"RE_ModalHeader__content"},o&&i&&n.createElement("button",{className:"RE_ModalHeader__back",onClick:i},n.createElement("span",{className:"RE_ModalHeader__backIcon"},n.createElement(r.Icon28ChevronLeftOutline,null)),o),l&&n.createElement("h1",{className:"RE_ModalHeader__title"},l),c&&n.createElement("div",{className:"RE_ModalHeader__container"},c)),n.createElement("button",{className:a()("RE_ModalHeader__close",d),"aria-label":t,onClick:e},n.createElement(s.Icon24Cancel,null)))},964929:(e,t,o)=>{"use strict";o.d(t,{ModalPanel:()=>a});o(97839);var n=o(667294),r=o(294184),s=o.n(r),i=o(876620);const a=({children:e,className:t})=>{const{isFullScreen:o}=(0,n.useContext)(i.ModalConfigContext),r=s()("RE_ModalPanel",t,{"RE_ModalPanel--fullScreen":o});return n.createElement("article",{className:r},e)}},671324:(e,t,o)=>{"use strict";o.d(t,{ModalView:()=>c});o(628392);var n=o(667294),r=o(294184),s=o.n(r),i=o(355795),a=o(576241),l=o(346006);const c=({children:e,isHidden:t,onEscape:o,contextClass:r,portalTarget:c})=>{const u=(0,a.useLayer)(),d=s()("RE_ModalView",{"RE_ModalView--hidden":Boolean(t)}),{subscribeKeyDown:h}=(0,l.useModuleKeyBoardHandlers)({moduleName:l.Module.Modal}),p=(0,n.useCallback)(((e,t)=>{void 0!==o&&e("Escape")&&(t(),o())}),[o]);return(0,n.useEffect)((()=>{if(!t)return h(p)}),[h,p,t]),n.createElement(i.Portal,{portalClassName:r,portalTarget:c||u},n.createElement("div",{className:d},e))}},171656:(e,t,o)=>{"use strict";o.d(t,{ModalsProvider:()=>a,useModalContext:()=>l});var n=o(667294),r=o(89131),s=o(453934);const i=(0,n.createContext)(null),a=({children:e,modals:t,stacks:o})=>{const a=(0,n.useCallback)((e=>{let t=!0;if(Object.values(o).forEach((o=>{const n=o.currentElement;let r=0;if((null==n?void 0:n.groupId)===e){var s;for(t=!1;(null==(s=o.currentElement)?void 0:s.groupId)===e;)r+=1,o.goBack();o.pop(r)}})),t)throw Error("Пытаетесь закрыть группу модалок, которая закрыта")}),[o]),l=(0,n.useCallback)(((e,n)=>{const r=t.getModalParams(e),{groupId:s,isSubModal:i}=r,a=o[n];if(null!==a.findIndex(e))throw new Error("Пытаетесь открыть модалку, которая открыта");a.push({modalId:e,groupId:s,isSubModal:i})}),[o,t]),c=(0,n.useCallback)(((e,t)=>{const n=o[t],r=n.currentElement;if((null==r?void 0:r.modalId)!==e)throw Error("Пытаетесь закрыть модалку, которая закрыта");n.pop()}),[o]),u=(0,n.useCallback)(((e,t)=>{o[t].forcedRemove((t=>t.modalId===e))}),[o]),d=(0,n.useCallback)(((e,t)=>o[t].findIndex(e)),[o]),[h,p]=(0,n.useState)({rightPanel:[],popup:[]});(0,n.useLayoutEffect)((()=>{const e=Object.keys(o).map((e=>o[e].subscribe((t=>{const{action:o,payload:n}=t;switch(o){case"add":p((0,s.produce)((o=>{o[e]=t.payload.isSubModal?o[e].filter((e=>e!==n.modalId)):[],o[e].push(n.modalId)})));break;case"remove":p((0,s.produce)((t=>{const o=t[e].filter((e=>!n.find((t=>e===t.modalId))));o.length<t[e].length&&(t[e]=o)})));break;default:(0,r.exhaustivenessCheck)(o)}}))));return()=>e.forEach((e=>e()))}),[o]);const f=(0,n.useCallback)((e=>o[e].size),[o]),m=(0,n.useMemo)((()=>({openedModals:h,openModal:l,closeModal:c,closeModalForced:u,closeGroup:a,getModalGroup:t.getModalGroup,createModal:t.createModal,createGroup:t.createGroup,getStackSize:f,findIndexInStack:d})),[h,l,c,u,a,t.getModalGroup,t.createModal,t.createGroup,f,d]);return n.createElement(i.Provider,{value:m},e)};function l(){const e=(0,n.useContext)(i);if(!e)throw new Error("ModalContext не добавлен в дерево Реакта!");return e}},126528:(e,t,o)=>{"use strict";o.d(t,{OptimizedSpinner:()=>c});var n=o(434788),r=(o(241676),o(667294)),s=o(294184),i=o.n(s),a=o(86894),l=o(997650);const c=({className:e,size:t="small",intersectionOptions:o,onIntersection:s})=>{const{ref:c,inView:u}=(0,l.useInView)((0,n._)({},o,{threshold:.01}));return(0,r.useEffect)((()=>{u&&s&&s()}),[u]),r.createElement("div",{ref:c,className:i()("OptimizedSpinner",e)},u&&r.createElement(a.Spinner,{size:t}))}},293216:(e,t,o)=>{"use strict";o.d(t,{PhotoItem:()=>a});var n=o(667294),r=o(659397),s=o(780835),i=(o(848056),o(538839));const a=({src:e,alt:t,width:o,height:a,cover:l,showReload:c=!1,className:u,onLoad:d,onError:h})=>{const p=l?{width:o,height:a}:void 0,[f,m]=(0,n.useState)(1),[v,g]=(0,n.useState)((()=>{if(!e)return!1;const t=(0,i.isImageLoaded)(e);return t&&(null==d||d()),t})),[E,b]=(0,n.useState)(!1),y=(0,n.useCallback)((e=>{E&&c&&(e.preventDefault(),e.stopPropagation())}),[E,c]),w=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),m((e=>e+1))}),[]);return n.createElement("div",{className:(0,r.classNames)("PhotoItem",u),style:{width:o,height:a},onClick:y},n.createElement("div",{className:"PhotoItem__blur",style:{"--imageUrl":E?void 0:`url(${e})`}}),n.createElement("img",{key:f,src:e,alt:t,className:(0,r.classNames)("PhotoItem__img",{"PhotoItem__img--loaded":v}),style:p,onLoad:()=>{g(!0),b(!1),null==d||d()},onError:()=>{b(!0),null==h||h()}}),E&&n.createElement("div",{className:"PhotoItem__error"},c&&n.createElement("button",{type:"button",className:"PhotoItem__reload",onClick:w},n.createElement(s.Icon16Replay,{className:"PhotoItem__reloadIcon"}))))}},579957:(e,t,o)=>{"use strict";o.d(t,{ConvoAudiosPlaylistContext:()=>s,ConvoAudiosPlaylistProvider:()=>i});var n=o(667294),r=o(460554);const s=n.createContext((()=>{})),i=({convo:e,children:t})=>{const o=(0,n.useRef)(e);o.current=e;const i=(0,n.useCallback)((()=>{const e=(0,r.mapConvoToConvoAudioTrackList)(o.current),t={type:"temp",convoPeerId:o.current.peerId};return new r.ConvoAudiosPlaylist({list:e,meta:t})}),[]);return n.createElement(s.Provider,{value:i},t)}},837492:(e,t,o)=>{"use strict";o.d(t,{Popper:()=>h});var n=o(434788),r=o(820224),s=(o(833249),o(667294)),i=o(294184),a=o.n(i),l=o(355795),c=o(696023),u=o(15285),d=o(576241);const h=(0,s.forwardRef)(((e,t)=>{var{open:o=!0,position:i="auto",mode:h="side",align:E="auto",adaptation:b,content:y,portalClassName:w,children:x,portalTarget:C,cursor:k}=e,M=(0,r._)(e,["open","position","mode","align","adaptation","content","portalClassName","children","portalTarget","cursor"]);const R=(0,d.useLayer)(),[S,A]=(0,s.useState)(null),_=(0,c.useCombinedRefs)(t),[N,O]=(0,s.useState)(null),[P,L]=(0,s.useState)(null),[T,D]=(0,s.useState)(null),I=(0,s.useCallback)((e=>{e&&A(e)}),[]);return(0,s.useLayoutEffect)((()=>{if(o){if("side"===h&&_.current&&(0!==(e=_.current).offsetWidth||0!==e.offsetHeight)){const[e,t,o]=function(e,t,o,r,s,i){var a;let l="fixed",c=e.getBoundingClientRect(),{innerWidth:d,innerHeight:h}=window,E=window.scrollY||document.documentElement.scrollTop,b=window.scrollX||document.documentElement.scrollLeft;i&&(c=(0,u.getOffsetRect)(e,i),d=i.clientWidth,h=i.clientHeight,E=i.scrollTop,b=i.scrollLeft,l="absolute");const y=null==t?void 0:t.getBoundingClientRect(),w=(null==y?void 0:y.width)||0,x=(null==y?void 0:y.height)||0,C=w?Math.max(c.width,w):void 0,k=x?Math.max(c.height,x):void 0;if(o===p){o=v(c.top-E,E+h-c.top-c.height)}if(r===p){r=g(b+d/3,c.left+.5*c.width,b+2*d/3)}const M=u.browser.safari_mobile&&(null==(a=window.visualViewport)?void 0:a.pageTop)||0;let R=c.left,S=c.top+M;const A=R+c.width,_=S+c.height,N=.5*c.width,O=.5*w,P=.5*c.height,L=.5*x,T=c.width<w,D=c.height<x,I=S<x,H=_+x>h+E,W=i&&S-E<x,z=_<x,B=S+P<L,F=S+x>h+E,V=S+P+L>h+E,j=A-c.width<w,U=A+w>d+b,$=R+N<O,K=R+N+O>d+b,G="horizontal"===s,q="vertical"===s;q||(("top"===o&&I||"center"===r&&B||m.includes(r)&&z)&&(o="bottom"),("bottom"===o&&H||"center"===r&&V||m.includes(r)&&F)&&(o="top"));G||(f.includes(o)&&(m.includes(r)&&(j&&(r="left"),U&&(r="right")),"center"===r&&(K&&(r="right"),$&&(r="left"))),m.includes(o)&&(f.includes(r)&&(z&&(r="bottom"),F&&(r="top")),j&&(o="right",r="right"===r?"left":r),U&&(o="left",r="left"===r?"right":r)));let X={};switch(o){case"top":X={width:C,top:S-x};break;case"bottom":X={width:C,top:_};break;case"left":X={height:k,left:R-w};break;case"right":X={height:k,left:A}}f.includes(o)&&T&&("right"===r&&(X.left=A-w),"center"===r&&(X.left=R+N-O),G&&(("center"===r&&$||"right"===r&&j)&&(X.left=0),("center"===r&&K||"left"===r&&U)&&(X.left=d-w+b)));if(m.includes(o)&&D){switch(r){case"center":X.top=S+P-L;break;case"top":X.top=S-x+c.height}q&&(("center"===r&&B||m.includes(r)&&z)&&(X.top=0),W&&"center"===r&&(X.top=E),("center"===r&&V||m.includes(r)&&F)&&(X.top=h-x+E))}return[(0,n._)({top:S,left:R},X,{position:l}),r,o]}(_.current,S,i,E,b,(null==C?void 0:C.current)?C.current:void 0);O(e),L(t),D(o)}var e;if("cursor"===h&&k){const[e,t,o]=function(e,t,o,r){const{innerWidth:s,innerHeight:i}=window,{x:a,y:l}=e,c=null==t?void 0:t.getBoundingClientRect(),u=(null==c?void 0:c.width)||0,d=(null==c?void 0:c.height)||0,h=u||void 0,f=d||void 0;if(o===p){o=v(l,i-l)}if(r===p){r=g(a,a,s-a)}const E=l<d,b=i-l<d,y=l<d/2,w=i-l<d/2,x=a<u,C=s-a<u;("top"===o&&E||"center"===r&&y)&&(o="bottom");("bottom"===o&&b||"center"===r&&w)&&(o="top");m.includes(r)&&(x&&(r="left"),C&&(r="right"));let k={};switch(o){case"top":k.top=l-d;break;case"bottom":k.top=l}switch(r){case"left":k.left=a;break;case"right":k.left=a-u}return[(0,n._)({position:"fixed",left:a,top:l,height:f,width:h},k),r,o]}(k,S,i,E);O(e),L(t),D(o)}}}),[k,y,h,i,E,_,o,S,C,b]),s.createElement(s.Fragment,null,"cursor"!==h&&x&&s.cloneElement(x,(0,n._)({},x.props,{ref:_})),o&&s.createElement(l.Portal,(0,n._)({},M,{ref:I,className:a()("MEPopper","MEConfig",P&&`MEPopper--align${H=P,H.length>0?H.slice(0,1).toUpperCase()+H.slice(1):""}`,T&&`MEPopper--${T}`),"data-align":P,"data-position":T,portalClassName:w,style:N||void 0,portalTarget:(null==C?void 0:C.current)||R}),y));var H})),p="auto",f=["top","bottom"],m=["left","right"];function v(e,t){return t>e?"bottom":"top"}function g(e,t,o){return t>=e&&t<=o?"center":t>o?"right":"left"}},355795:(e,t,o)=>{"use strict";o.d(t,{Portal:()=>l});var n=o(434788),r=o(820224),s=o(667294),i=o(973935),a=o(696023);const l=(0,s.forwardRef)((function(e,t){var{children:o,portalClassName:l,portalTarget:c}=e,u=(0,r._)(e,["children","portalClassName","portalTarget"]);const[d,h]=(0,s.useState)(null),p=(0,a.usePrevious)(l);return(0,s.useEffect)((()=>{d&&(p&&d.classList.remove(...p.split(" ")),l&&d.classList.add(...l.split(" ")))}),[d,l,p]),(0,s.useLayoutEffect)((()=>{if(null===c)return;const e=function(e,t){const o=document.createElement("div");e&&o.classList.add(...e.split(" "));return(t||document.body).appendChild(o)}(l,c);return h(e),()=>{e.remove()}}),[c]),d?i.createPortal(s.createElement("div",(0,n._)({},u,{ref:t}),o),d):null}))},682930:(e,t,o)=>{"use strict";o.d(t,{Provider:()=>p});var n=o(434788),r=o(667294),s=o(96190),i=o(696023),a=o(171656),l=o(364705),c=o(200028),u=o(883950),d=o(294962),h=o(755534);const p=({children:e,env:t,featureFlags:o,state:p,dispatch:f,owner:m})=>{const v=(0,r.useCallback)((e=>{f((0,n._)({type:"CacheUpdateReceived"},e))}),[f]),g=s.safeGet(p.peers,p.viewer.id),E=(0,r.useMemo)((()=>(0,n._)({viewer:g},p.viewer)),[g,p.viewer]),b=(0,r.useMemo)((()=>({popup:t.modals.stack,rightPanel:new u.Stack})),[t.modals.stack]);return r.createElement(i.BrowserEnvProvider,{value:t},r.createElement(l.RouterProvider,null,r.createElement(a.ModalsProvider,{modals:t.modals.system,stacks:b},r.createElement(i.DispatchProvider,{value:f},r.createElement(d.RlottieQueueProvider,null,r.createElement(i.FeatureFlagsProvider,{value:o},r.createElement(i.HelpHintsProvider,{value:p.helpHints},r.createElement(i.OnlinesProvider,{value:p.onlines},r.createElement(i.TypingsProvider,{value:p.typings},r.createElement(i.PeersProvider,{value:p.peers},r.createElement(i.OwnerProvider,{value:m},r.createElement(h.StickersConfigProvider,null,r.createElement(i.ConvosProvider,{value:p.convos},r.createElement(i.ChannelsProvider,{value:p.channels},r.createElement(i.OrganisersProvider,{value:p.organisers},r.createElement(i.ConvosSearchIndexProvider,{value:p.convosSearchIndex},r.createElement(i.ViewerProvider,{value:E},r.createElement(i.InsertIntoCacheProvider,{value:v},r.createElement(c.ComposerDraftsProvider,{value:p.composerDrafts},r.createElement(c.ChannelComposerDraftsProvider,{value:p.channelComposerDrafts},r.createElement(i.VideoMessageShapesProvider,{value:p.videoMessageShapes},e)))))))))))))))))))))}},294962:(e,t,o)=>{"use strict";o.d(t,{RlottieQueueProvider:()=>a,useRlottieQueue:()=>l});var n=o(667294),r=o(272125),s=o(929332);const i=n.createContext(null),a=({children:e,externalQueue:t})=>{const o=(0,n.useRef)(null);return o.current||(r.LottieManager.init(),o.current=t||new s.LazyLoadQueue),n.createElement(i.Provider,{value:o.current},e)};function l(){const e=(0,n.useContext)(i);if(!e)throw new Error("RlottieQueueProvider не добавлен в дерево Реакта!");return e}},364705:(e,t,o)=>{"use strict";o.d(t,{RouterProvider:()=>a,useConvoRoute:()=>c,useRouter:()=>l});var n=o(696023),r=o(781982),s=o(667294);const i=(0,s.createContext)({}),a=({children:e})=>{const{router:t}=(0,n.useBrowserEnv)(),[o,a]=(0,s.useState)(t.currentRoute),[l,c]=(0,s.useState)(t.modalRoute?[t.modalRoute]:[]);(0,s.useLayoutEffect)((()=>{const e=t.subscribe(((e,t)=>{c((o=>{let n=[];if(r.IRouter.isModalRoute(e))switch(t){case"PUSH":n=o.concat(e);break;case"POP":n=o.slice(0,-1),0===o.length&&n.push(e);break;case"REPLACE":n=[...o.slice(0,-1),e]}return n})),a(e)}));return()=>e()}),[t]);const u=l.slice(-1)[0],d=(0,s.useMemo)((()=>({router:t,route:o,fromUrl:t.fromUrl,toUrl:t.toUrl,toRoute:t.fromProxyRoute,modalRoute:u||null,modalRoutes:l,screenRoute:t.screenRoute,runtimeRoute:t.runtimeRoute})),[t,o,u,l]);return s.createElement(i.Provider,{value:d},e)},l=()=>{const{route:e,router:t,screenRoute:o,modalRoute:n,runtimeRoute:r,modalRoutes:a,toUrl:l,toRoute:c,fromUrl:u}=(0,s.useContext)(i);return{route:e,screenRoute:o,modalRoute:n,runtimeRoute:r,modalRoutes:a,navigate:t.push,back:t.back,forward:t.forward,replace:t.replace,fromUrl:u,toUrl:l,toRoute:c}},c=()=>{const{screenRoute:e}=l();if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},755534:(e,t,o)=>{"use strict";o.d(t,{StickersConfigProvider:()=>l,useStickersConfig:()=>c});var n=o(11010),r=o(667294),s=o(478748),i=o(696023);const a=r.createContext(null),l=({children:e})=>{const{api:t}=(0,i.useBrowserEnv)(),o=(0,i.useOwner)(),l=(0,r.useRef)(),[c,u]=(0,r.useState)({}),d=(0,r.useCallback)(((e,o={})=>t.fetch(e,o,{timeout:3e4,retries:5})),[t]);return(0,r.useEffect)((()=>{l.current=new s.API({onAPIRequest:d,userId:o.id})}),[d,o.id]),(0,r.useEffect)((()=>{(0,n._)((function*(){if(!l.current)return;if(!(yield l.current.cache.reload()))return;const e=yield l.current.cache.getStickersImageConfigs();e&&u({items:e.items,id:e.default_id})}))()}),[]),r.createElement(a.Provider,{value:c},e)};function c(){const e=(0,r.useContext)(a);if(!e)throw new Error("StickersConfigProvider не добавлен в дерево Реакта!");return e}},943997:(e,t,o)=>{"use strict";o.d(t,{Tooltip:()=>c});o(126449);var n=o(667294),r=o(294184),s=o.n(r),i=o(837492),a=o(696023),l=o(966933);const c=({children:e,content:t,disabled:o=!1,open:r=!1,onOpen:c,onClose:u,delay:d=50,backgroundColor:h,pointerEvents:p="none",showOnTouch:f=!1,align:m="auto",position:v="auto"})=>{const g=(0,a.useFeatureFlags)(),E=(0,l.useDeviceData)(),[b,y]=(0,n.useState)(r?"opened":"closed"),w=h||"rgba(0, 0, 0, 0.72)",x=(0,n.useRef)(null),C=(0,n.useRef)(null),k=(0,n.useRef)(null),M=()=>{C.current&&clearTimeout(C.current),k.current&&clearTimeout(k.current),C.current=k.current=null},R=(0,n.useCallback)((()=>{y("closed"),u&&u()}),[u]),S=(0,n.useCallback)((()=>{"opened"===b?(y("is_closing"),k.current=window.setTimeout(R,200)):R()}),[b,R]),A=(0,n.useCallback)((()=>{M(),C.current=window.setTimeout((()=>{y("opened"),c&&c()}),d)}),[d,c]),_=(0,n.useCallback)((()=>{M(),C.current=window.setTimeout(S,0)}),[S]);(0,n.useEffect)((()=>{const e=x.current;return e&&(e.addEventListener("mouseenter",A),e.addEventListener("mouseleave",_)),()=>{e&&(e.removeEventListener("mouseenter",A),e.removeEventListener("mouseleave",_))}}),[A,_]),(0,n.useEffect)((()=>M),[]),(0,a.useDidUpdate)((()=>{r?A():_()}),[r]);const N=n.createElement("div",{className:s()("METooltip",{"METooltip--removed":"is_closing"===b}),style:{"--tooltip_dark_background":w,pointerEvents:p}},t);return g.me_fc_tooltips?!f&&E.isTouchOnly?e:n.createElement(i.Popper,{content:N,open:!o&&"closed"!==b,ref:x,portalClassName:"MEConfig",mode:"side",align:m,position:v},e):e}},538839:(e,t,o)=>{"use strict";o.d(t,{blobToImageUrl:()=>a,getFilesFromDataTransferItems:()=>r,getImageSizeByFile:()=>l,isImageLoaded:()=>c});var n=o(11010);function r(e){return s.apply(this,arguments)}function s(){return(s=(0,n._)((function*(e){const t=[];return yield Promise.all(Array.from(e).map((0,n._)((function*(e){if("file"!==e.kind)return;const o=e.webkitGetAsEntry();if(o){const n=yield function(e,t){return new Promise((o=>{let n=0;const r=[];function s(e){if(function(e){return e.isFile}(e)){n++;const s=t.getAsFile();e.file((e=>{n--,r.push(e),0===n&&o(r)}),(()=>{s&&(n--,r.push(s)),0===n&&o(r)}))}else(function(e){return e.isDirectory})(e)&&i(e.createReader())}function i(e){n++,e.readEntries((e=>{n--;for(const t of e)s(t);0===n&&o(r)}))}s(e)}))}(o,e);return void t.push(...n)}const n=e.getAsFile();n&&t.push(n)})))),t.map(i)}))).apply(this,arguments)}function i(e){if(e.type)return e;const t=e.name.split(".").pop();if(!t)return e;let o="";switch(t.toLowerCase()){case"mov":o="video/quicktime";break;case"3gp":o="video/3gpp"}return o?new File([e],e.name,{type:o}):e}function a({blob:e}){return URL.createObjectURL(e)}function l(e){return new Promise(((t,o)=>{const n=new Image,r=URL.createObjectURL(e);n.onload=()=>{t({width:n.width,height:n.height}),URL.revokeObjectURL(r)},n.onerror=e=>{o(e)},n.src=r}))}function c(e){const t=new Image;return t.src=e,t.complete||t.width+t.height>0}},747578:(e,t,o)=>{"use strict";o.d(t,{computeAttachePhotosLayout:()=>h});var n=o(434788),r=o(89131);function s(e){if((0,r.isNonEmptyArray)(e))return e;throw new Error("not an NonEmptyArray")}function i(e,t){const o=e/t.reduce(((e,t)=>e+t.width),0),r=t.map((e=>{const{height:t,width:r}=e;return(0,n._)({},e,{height:t*o,width:r*o})}));return s(r)}function a(e,t){const{height:o,width:r}=t,s=e/o;return(0,n._)({},t,{height:e,width:r*s})}function l(e){let t=0,o=0;const n=e[0];for(let e of n)o+=e.width;for(let o of e)o[0]&&(t+=o[0].height);return o/t}function c(e,t){let o=t[0];const n=[...t,e].sort(((e,t)=>e-t)),r=n.findIndex((t=>t===e)),s=n[r-1],i=n[r+1];if(!s&&i)o=i;else if(!i&&s)o=s;else if(i&&s){o=i/e>e/s?s:i}return o}function u(e,t){return s(e.map((e=>{const o=c(e.width/e.height,t);return e.width>e.height?(0,n._)({},e,{width:o*e.height}):(0,n._)({},e,{height:e.width/o})})))}function d(e,{minHeight:t},o){return s(o.reduceRight(((o,n)=>{const r=o[o.length-1],s=a(t,n),{width:i}=s,l=r?r.reduce(((e,t)=>e+t.width),0):0;return i+l<=e&&r?r.push(s):o.push([s]),o}),[]).reverse().map((e=>e.reverse())).map((t=>i(e,s(t)))))}function h(e,t,o,n){try{const{maxSingleHeight:r}=o,h=[],f={},m=[9/16,3/4,1,4/3,16/9],v=function(e,t){const{minHeight:o}=t,n=function(e,t,o){const n=[t];let r=e;do{r=n[n.length-1]-t*o,r<e&&(r=e),n.push(r)}while(r!==e);return n}(o,e,.05),r=[];for(let e=0;e<n.length;e++){const t=n[e];t&&r.push({minHeight:t})}return r}(t/e,o),g=u(n,m),E=n[0];if(1===n.length&&E)return function(e,t,o,n){if(u([o],t)[0]){const{width:t,height:r}=o;if(t>=r)return[i(e,[o])];const s=n||16/9*e,l=i(e,[o])[0];return l&&l.height<s?[[l]]:[[a(s,o)]]}return[[o]]}(t,m,E,r);for(let o of v){const n=p(d(t,o,g),e,t),r=l(n);h.push(r),f[r]=n}let b;const y=c(e,s(h));return b=y&&f[y],b||d(t,o,n)}catch(e){return[n]}}function p(e,t,o){return function(e,t){const o=1.75,n=l(e),r=n/t;if(r>o){const r=n/(o*t);return e.forEach((e=>e.forEach((e=>e.height=e.height*r)))),e}if(r<1/o){const r=n/(1/o*t);return e.forEach((e=>e.forEach((e=>e.height=e.height*r)))),e}return e}(function(e,t){return s(e.map((e=>{if(1===e.length&&e[0]){const o=e[0],r=o.width>o.height;return[(0,n._)({},o,{width:t,height:r?o.height>t/2?t/2:o.height:t})]}return e})))}(function(e){const t=e.length,o=s(e[e.length-1]),n=1===o.length;if(t<=2||!n)return e;const r=e[e.length-2];if(!r)return e;const l=null==r?void 0:r.reduce(((e,t)=>e+t.width),0);return r.push(o[0]),r.forEach((e=>a(1,e))),i(l,r),s(e.splice(0,e.length-1))}(e),o),t)}},65970:(e,t,o)=>{"use strict";o.d(t,{getKeyCombo:()=>h,isGlobalKeyCombo:()=>d,isModuleKeyCombo:()=>c});var n,r,s=o(15285);!function(e){e.Mod="Mod",e.Alt="Alt",e.Shift="Shift",e.Meta="Meta"}(n||(n={})),function(e){e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.Escape="Escape",e.Enter="Enter",e.Backspace="Backspace",e.Tab="Tab",e.Slash="/",e.PageDown="PageDown",e.PageUp="PageUp",e.Home="Home",e.End="End",e.Space="Space"}(r||(r={}));const i={" ":r.Space};var a;!function(e){e.F="F"}(a||(a={}));const l=[n.Shift,r.ArrowDown,r.ArrowUp,r.Enter,r.Escape,r.Backspace,`${n.Shift}+${r.Enter}`,`${n.Mod}+${r.Enter}`,r.ArrowLeft,r.ArrowRight,r.Tab,r.Space],c=e=>l.includes(e),u=[`${n.Mod}+${a.F}`,`${n.Mod}+${n.Shift}+${a.F}`,`${n.Mod}+${r.Slash}`],d=e=>u.includes(e),h=e=>{try{const o=[];var t;Object.values(n).forEach((t=>{p[t](e)&&o.push(t)}));const s=null!=(t=i[e.key])?t:e.key;return Object.values(r).forEach((e=>s===e&&o.push(e))),Object.values(a).forEach((t=>{s.toUpperCase()!==t?e.code.slice(3)===t&&o.push(t):o.push(t)})),o.join("+")}catch(e){return""}},p={[n.Mod]:e=>s.isMac?e.metaKey:e.ctrlKey,[n.Alt]:e=>e.altKey,[n.Shift]:e=>e.shiftKey,[n.Meta]:e=>s.isMac?e.ctrlKey:e.metaKey}},15285:(e,t,o)=>{"use strict";o.d(t,{browser:()=>l,enRuKeysMap:()=>p,formatPhoneNumber:()=>v,getAttachForwardIndent:()=>d,getExpectedAttachWidth:()=>h,getOffsetRect:()=>i,getOrganiserUid:()=>m,getPeersInlineNames:()=>f,isMac:()=>c,isWindows:()=>u});var n=o(11010),r=o(667294),s=o(89131);function i(e,t){if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};const o=e.getBoundingClientRect(),n=null==t?void 0:t.getBoundingClientRect(),r=document.body,s=document.documentElement,i=t?t.scrollTop:window.pageYOffset||s.scrollTop||r.scrollTop,a=(t?t.scrollLeft:window.pageXOffset)||s.scrollLeft||r.scrollLeft,l=s.clientTop||r.clientTop||0,c=s.clientLeft||r.clientLeft||0;return{top:o.top-((null==n?void 0:n.top)||0)+i-l,left:o.left-((null==n?void 0:n.left)||0)+a-c,width:o.width,height:o.height}}const a=navigator.userAgent.toLowerCase(),l={version:(a.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(a)&&/webkit|safari|khtml/i.test(a),safari_mobile:/iphone|ipod|ipad/i.test(a),ios:/.+(ipod|ipad|iphone.*os)/i.test(a),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext))},c="userAgentData"in window.navigator&&"platform"in window.navigator.userAgentData?0===window.navigator.userAgentData.platform.indexOf("mac"):0===window.navigator.platform.indexOf("Mac"),u=window.navigator.platform.toLowerCase().startsWith("win"),d=e=>e>0?22+10*(e-1):0;function h(e,t,o,n){const r=n+(t?0:8)-d(o);return[r,r*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}const p={q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж","'":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю","/":".",[c?"\\":"`"]:"ё"},f=(e,t,o,n)=>{const s=[];return e.forEach(((r,i)=>{s.push(o(r),(o=>o===e.length-1?"":t===e.length&&o===e.length-2?` ${n.use("me_chat_members_last_divider")} `:", ")(i))})),t>e.length&&(0===e.length?s.push(n.use("me_chat_members_count",{num:t-e.length})):s.push(n.use("me_chat_members_count_lots",{num:t-e.length,values:{names:""}}))),s.length>0?r.createElement(r.Fragment,null,s):null};function m(e){switch(e.kind){case"filters":return e.filter;case"folders":return e.id;default:(0,s.exhaustivenessCheck)(e)}}function v(e){return g.apply(this,arguments)}function g(){return(g=(0,n._)((function*(e){var t,n;const{parsePhoneNumber:r}=yield o.e(4387).then(o.bind(o,304387)),s=r(e.replace(/^(\+|)+/,"+"));var i,a;return{isValid:s.valid,international:null!=(i=null==(t=s.number)?void 0:t.international)?i:e,national:null!=(a=null==(n=s.number)?void 0:n.national)?a:e}}))).apply(this,arguments)}},559360:(e,t,o)=>{"use strict";o.d(t,{DONUT_DELAY:()=>c,SEND_OPTIONS:()=>u,TOPICS:()=>a,VISIBILITY:()=>i,empty:()=>s,getPostThemeIdFromKey:()=>l,validateRequiredFields:()=>d});var n=o(434788),r=o(839963);function s(){return{text:"",attaches:{},uploadsTrackIds:new Set,visibility:"all",donutDelay:-1,topic:"no_theme",sendOptions:{selected:[],disabled:[]},resetSendOptions:[]}}const i=["all","donut"],a=[["no_theme",0],["art",1],["it",7],["games",12],["music",16],["photo",19],["science",21],["sport",23],["tourism",25],["cinema",26],["humor",32],["style",43]],l=e=>{const t=a.find((t=>t[0]===e));if(!t)throw new Error(`Передан некорректный ключ ${e} для темы поста`);return t[1]},c=[-1,1,2,3,4,5,6,7],u=["close_comments","signed","mute_notifications","mark_as_ads"];function d(e){const t=s();return Object.entries(e).reduce(((e,[o,s])=>{const i=r.resolveId(+o);return e[i]=s,s.uploadsTrackIds instanceof Set||(e[i]=(0,n._)({},s,{uploadsTrackIds:t.uploadsTrackIds})),e}),{})}},400681:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_FORWARD_AUTHOR_HIDDEN:()=>a,empty:()=>i,getNormalForward:()=>u,hasActiveUploads:()=>c,isEmpty:()=>l,validateRequiredFields:()=>d});var n=o(434788),r=o(96190),s=o(89131);function i(){return{text:"",attaches:{},uploadsTrackIds:new Set}}const a=!1;function l(e,t){const o=0!==Object.keys(e.attaches).length;return 0===t.length&&!e.forward&&!o&&!c(e)}function c(e){return 0!==e.uploadsTrackIds.size}function u(e,t){if(!e.forward||e.forward.kind!==t)return;const o=[...e.forward.items].filter((e=>"Normal"===e.kind));return(0,s.isNonEmptyArray)(o)?o:void 0}function d(e){const t=i();return Object.entries(e).reduce(((e,[o,s])=>{if("kind"in s)return e;const i=r.resolveId(+o);return e[i]=s,s.uploadsTrackIds instanceof Set||(e[i]=(0,n._)({},s,{uploadsTrackIds:t.uploadsTrackIds})),e}),{})}},80497:(e,t,o)=>{"use strict";function n(e,t){return function(e,t){if(t.startsWith("/"))return!t.startsWith("//");t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t);try{const{hostname:o}=new URL(t);return[e,"vk.com","vk.ru","vk.me","vk.cc"].some((e=>o===e||o.endsWith("."+e)))}catch(e){return!1}}(e,t)||function(e){return e.startsWith("mailto:")}(t)?t:function(e,t){return`https://${e}/away.php?to=${encodeURIComponent(t)}&utf=1`}(e,t)}o.d(t,{prepareLink:()=>n})},781982:(e,t,o)=>{"use strict";o.d(t,{IRouter:()=>n});var n,r=o(89131);!function(e){let t;e.SettingsRouteSectionKeys=["main","account","folders","notifications","theme","about"],function(e){e[e.Message=0]="Message",e[e.Post=1]="Post",e[e.Composer=2]="Composer",e[e.Comment=3]="Comment",e[e.ChannelComposer=4]="ChannelComposer"}(t=e.RouteSourceKind||(e.RouteSourceKind={})),e.globalParamsKeys=["tab","folder","createPoll"],e.convoRouteExtraParamsKeys=["settings"],e.withExtraConvoParams=e=>"MainRoute"===e.kind||"ConvoRoute"===e.kind||"ChannelRoute"===e.kind||"ChannelsListRoute"===e.kind,e.isModalRoute=e=>{switch(e.kind){case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"MiniAppCatalogModalRoute":return!0;case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":case"SettingsRoute":return!1;default:(0,r.exhaustivenessCheck)(e)}},e.isProxyRoute=e=>{switch(e.kind){case"AttachProxyRoute":case"AttachMediaProxyRoute":case"HashtagProxyRoute":case"HashtagMentionProxyRoute":case"ScreenNameProxyRoute":return!0;case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":case"MiniAppCatalogModalRoute":case"SettingsRoute":return!1;default:(0,r.exhaustivenessCheck)(e)}},e.isRuntimeRoute=e=>{switch(e.kind){case"ModalMessageRuntimeRoute":case"EmptyRuntimeRoute":case"AudioRestrictionRuntimeRoute":return!0;case"PeerModalRoute":case"PhotoModalRoute":case"VideoModalRoute":case"MiniAppModalRoute":case"PollModalRoute":case"ImportantMessagesModalRoute":case"CallJoinRoute":case"ChannelRoute":case"ChannelsListRoute":case"ChatJoinRoute":case"ConvoRoute":case"MainRoute":case"NotFoundRoute":case"SettingsRoute":case"MiniAppCatalogModalRoute":return!1;default:(0,r.exhaustivenessCheck)(e)}}}(n||(n={}))},883950:(e,t,o)=>{"use strict";o.d(t,{Modals:()=>s,Stack:()=>r,resolveId:()=>i});var n=o(53416);class r{push(e){this.history.push(e),this.index=this.history.length-1,this.listeners.call({action:"add",payload:e})}goBack(e=1){this.index-=e}subscribe(e){return this.listeners.push(e)}get lastElement(){return this.history[this.history.length-1]||null}get currentElement(){return this.history[this.index]||null}findIndex(e){const t=this.history.findIndex((t=>t.modalId===e));return-1!==t?t:null}get size(){return this.history.length}onItemsRemove(e){this.index=this.history.length-1,this.listeners.call({action:"remove",payload:e}),this.lastElement&&this.listeners.call({action:"add",payload:this.lastElement})}constructor(){this.index=0,this.pop=(e=1)=>{const t=this.history.splice(-e,e);this.onItemsRemove(t)},this.forcedRemove=e=>{const t=this.history.reduce(((t,o)=>(e(o)?t.toRemove.push(o):t.actualHistory.push(o),t)),{actualHistory:[],toRemove:[]});this.history=t.actualHistory,this.onItemsRemove(t.toRemove)},this.history=[],this.listeners=function(){let e=[];return{get length(){return e.length},push:t=>(e.push(t),function(){e=e.filter((e=>e!==t))}),call(t){e.forEach((e=>e&&e(t)))}}}()}}class s{removeGroup(e){this.system.groups.delete(e)}removeModal(e){const{groupId:t}=this.getModalParams(e),o=this.system.groups.get(t);if(void 0!==o){const{group:t}=o,n=t.findIndex((t=>t.id===e));t.splice(n,1)}this.system.modals.delete(e)}constructor(){this.createGroup=()=>{const e=(0,n.nanoid)(),t={id:e,group:[]};return this.system.groups.set(e,t),{data:t,remove:this.removeGroup.bind(this,e)}},this.createModal=(e,t=!1,o)=>{const r=this.system.groups.get(e);if(!r)throw Error("Нет такого стека");const s=o||(0,n.nanoid)();return r.group.push({id:s}),this.system.modals.set(s,{groupId:r.id,isSubModal:t}),{id:s,remove:this.removeModal.bind(this,s)}},this.getModalGroup=e=>{const t=this.system.groups.get(e);if(!t)throw Error("Передан Id несуществующей группы модалок");return t},this.getModalParams=e=>{const t=this.system.modals.get(e);if(!t)throw Error("Попытка получить несуществующую модалку");return t},this.system={modals:new Map,groups:new Map}}}function i(e){return e}},348354:(e,t,o)=>{"use strict";o.d(t,{stickersEmojiKeyboard:()=>n});const n=(0,o(210929).createDomain)()},616912:(e,t,o)=>{"use strict";o.d(t,{$userEnv:()=>s,setUserEnv:()=>r});var n=o(348354);const r=n.stickersEmojiKeyboard.createEvent(),s=n.stickersEmojiKeyboard.createStore({}).on(r,((e,t)=>t))},617685:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(966092).default.Symbol},434492:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(617685),r=o(309432),s=o(380699),i=n.default?n.default.toStringTag:void 0;const a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?(0,r.default)(e):(0,s.default)(e)}},533404:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(537170),r=/^\s+/;const s=function(e){return e?e.slice(0,(0,n.default)(e)+1).replace(r,""):e}},313413:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},309432:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(617685),r=Object.prototype,s=r.hasOwnProperty,i=r.toString,a=n.default?n.default.toStringTag:void 0;const l=function(e){var t=s.call(e,a),o=e[a];try{e[a]=void 0;var n=!0}catch(e){}var r=i.call(e);return n&&(t?e[a]=o:delete e[a]),r}},380699:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=Object.prototype.toString;const r=function(e){return n.call(e)}},966092:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(313413),r="object"==typeof self&&self&&self.Object===Object&&self;const s=n.default||r||Function("return this")()},537170:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=/\s/;const r=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},453434:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(777226),r=o(425222),s=o(925742),i=Math.max,a=Math.min;const l=function(e,t,o){var l,c,u,d,h,p,f=0,m=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function E(t){var o=l,n=c;return l=c=void 0,f=t,d=e.apply(n,o)}function b(e){var o=e-p;return void 0===p||o>=t||o<0||v&&e-f>=u}function y(){var e=(0,r.default)();if(b(e))return w(e);h=setTimeout(y,function(e){var o=t-(e-p);return v?a(o,u-(e-f)):o}(e))}function w(e){return h=void 0,g&&l?E(e):(l=c=void 0,d)}function x(){var e=(0,r.default)(),o=b(e);if(l=arguments,c=this,p=e,o){if(void 0===h)return function(e){return f=e,h=setTimeout(y,t),m?E(e):d}(p);if(v)return clearTimeout(h),h=setTimeout(y,t),E(p)}return void 0===h&&(h=setTimeout(y,t)),d}return t=(0,s.default)(t)||0,(0,n.default)(o)&&(m=!!o.leading,u=(v="maxWait"in o)?i((0,s.default)(o.maxWait)||0,t):u,g="trailing"in o?!!o.trailing:g),x.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=p=c=h=void 0},x.flush=function(){return void 0===h?d:w((0,r.default)())},x}},777226:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},18533:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},72714:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(434492),r=o(18533);const s=function(e){return"symbol"==typeof e||(0,r.default)(e)&&"[object Symbol]"==(0,n.default)(e)}},425222:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(966092);const r=function(){return n.default.Date.now()}},300111:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(453434),r=o(777226);const s=function(e,t,o){var s=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,r.default)(o)&&(s="leading"in o?!!o.leading:s,i="trailing"in o?!!o.trailing:i),(0,n.default)(e,t,{leading:s,maxWait:t,trailing:i})}},925742:(e,t,o)=>{"use strict";o.d(t,{default:()=>u});var n=o(533404),r=o(777226),s=o(72714),i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;const u=function(e){if("number"==typeof e)return e;if((0,s.default)(e))return NaN;if((0,r.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,r.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,n.default)(e);var o=a.test(e);return o||l.test(e)?c(e.slice(2),o?2:8):i.test(e)?NaN:+e}},53416:(e,t,o)=>{"use strict";o.d(t,{nanoid:()=>n});let n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},269329:(e,t,o)=>{"use strict";o.d(t,{default:()=>C});var n=o(300111),r=o(453434),s=o(931807),i=function(){return i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},a=null,l=null;function c(){if(null===a){if("undefined"==typeof document)return a=0;var e=document.body,t=document.createElement("div");t.classList.add("simplebar-hide-scrollbar"),e.appendChild(t);var o=t.getBoundingClientRect().right;e.removeChild(t),a=o}return a}function u(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window}function d(e){return e&&e.ownerDocument?e.ownerDocument:document}s&&window.addEventListener("resize",(function(){l!==window.devicePixelRatio&&(l=window.devicePixelRatio,a=null)}));var h=function(e){return Array.prototype.reduce.call(e,(function(e,t){var o=t.name.match(/data-simplebar-(.+)/);if(o){var n=o[1].replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}));switch(t.value){case"true":e[n]=!0;break;case"false":e[n]=!1;break;case void 0:e[n]=!0;break;default:e[n]=t.value}}return e}),{})};function p(e,t){var o;e&&(o=e.classList).add.apply(o,t.split(" "))}function f(e,t){e&&t.split(" ").forEach((function(t){e.classList.remove(t)}))}function m(e){return".".concat(e.split(" ").join("."))}var v=Object.freeze({__proto__:null,getElementWindow:u,getElementDocument:d,getOptions:h,addClasses:p,removeClasses:f,classNamesToQuery:m}),g=u,E=d,b=h,y=p,w=f,x=m,C=function(){function e(t,o){void 0===o&&(o={});var s=this;if(this.removePreventClickId=null,this.minScrollbarWidth=20,this.stopScrollDelay=175,this.isScrolling=!1,this.isMouseEntering=!1,this.scrollXTicking=!1,this.scrollYTicking=!1,this.wrapperEl=null,this.contentWrapperEl=null,this.contentEl=null,this.offsetEl=null,this.maskEl=null,this.placeholderEl=null,this.heightAutoObserverWrapperEl=null,this.heightAutoObserverEl=null,this.rtlHelpers=null,this.scrollbarWidth=0,this.resizeObserver=null,this.mutationObserver=null,this.elStyles=null,this.isRtl=null,this.mouseX=0,this.mouseY=0,this.onMouseMove=function(){},this.onWindowResize=function(){},this.onStopScrolling=function(){},this.onMouseEntered=function(){},this.onScroll=function(){var e=g(s.el);s.scrollXTicking||(e.requestAnimationFrame(s.scrollX),s.scrollXTicking=!0),s.scrollYTicking||(e.requestAnimationFrame(s.scrollY),s.scrollYTicking=!0),s.isScrolling||(s.isScrolling=!0,y(s.el,s.classNames.scrolling)),s.showScrollbar("x"),s.showScrollbar("y"),s.onStopScrolling()},this.scrollX=function(){s.axis.x.isOverflowing&&s.positionScrollbar("x"),s.scrollXTicking=!1},this.scrollY=function(){s.axis.y.isOverflowing&&s.positionScrollbar("y"),s.scrollYTicking=!1},this._onStopScrolling=function(){w(s.el,s.classNames.scrolling),s.options.autoHide&&(s.hideScrollbar("x"),s.hideScrollbar("y")),s.isScrolling=!1},this.onMouseEnter=function(){s.isMouseEntering||(y(s.el,s.classNames.mouseEntered),s.showScrollbar("x"),s.showScrollbar("y"),s.isMouseEntering=!0),s.onMouseEntered()},this._onMouseEntered=function(){w(s.el,s.classNames.mouseEntered),s.options.autoHide&&(s.hideScrollbar("x"),s.hideScrollbar("y")),s.isMouseEntering=!1},this._onMouseMove=function(e){s.mouseX=e.clientX,s.mouseY=e.clientY,(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseMoveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseMoveForAxis("y")},this.onMouseLeave=function(){s.onMouseMove.cancel(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&s.onMouseLeaveForAxis("x"),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&s.onMouseLeaveForAxis("y"),s.mouseX=-1,s.mouseY=-1},this._onWindowResize=function(){s.scrollbarWidth=s.getScrollbarWidth(),s.hideNativeScrollbar()},this.onPointerEvent=function(e){var t,o;s.axis.x.track.el&&s.axis.y.track.el&&s.axis.x.scrollbar.el&&s.axis.y.scrollbar.el&&(s.axis.x.track.rect=s.axis.x.track.el.getBoundingClientRect(),s.axis.y.track.rect=s.axis.y.track.el.getBoundingClientRect(),(s.axis.x.isOverflowing||s.axis.x.forceVisible)&&(t=s.isWithinBounds(s.axis.x.track.rect)),(s.axis.y.isOverflowing||s.axis.y.forceVisible)&&(o=s.isWithinBounds(s.axis.y.track.rect)),(t||o)&&(e.stopPropagation(),"pointerdown"===e.type&&"touch"!==e.pointerType&&(t&&(s.axis.x.scrollbar.rect=s.axis.x.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.x.scrollbar.rect)?s.onDragStart(e,"x"):s.onTrackClick(e,"x")),o&&(s.axis.y.scrollbar.rect=s.axis.y.scrollbar.el.getBoundingClientRect(),s.isWithinBounds(s.axis.y.scrollbar.rect)?s.onDragStart(e,"y"):s.onTrackClick(e,"y")))))},this.drag=function(t){var o,n,r,i,a,l,c,u,d,h,p;if(s.draggedAxis&&s.contentWrapperEl){var f=s.axis[s.draggedAxis].track,m=null!==(n=null===(o=f.rect)||void 0===o?void 0:o[s.axis[s.draggedAxis].sizeAttr])&&void 0!==n?n:0,v=s.axis[s.draggedAxis].scrollbar,g=null!==(i=null===(r=s.contentWrapperEl)||void 0===r?void 0:r[s.axis[s.draggedAxis].scrollSizeAttr])&&void 0!==i?i:0,E=parseInt(null!==(l=null===(a=s.elStyles)||void 0===a?void 0:a[s.axis[s.draggedAxis].sizeAttr])&&void 0!==l?l:"0px",10);t.preventDefault(),t.stopPropagation();var b=("y"===s.draggedAxis?t.pageY:t.pageX)-(null!==(u=null===(c=f.rect)||void 0===c?void 0:c[s.axis[s.draggedAxis].offsetAttr])&&void 0!==u?u:0)-s.axis[s.draggedAxis].dragOffset,y=(b="x"===s.draggedAxis&&s.isRtl?(null!==(h=null===(d=f.rect)||void 0===d?void 0:d[s.axis[s.draggedAxis].sizeAttr])&&void 0!==h?h:0)-v.size-b:b)/(m-v.size)*(g-E);"x"===s.draggedAxis&&s.isRtl&&(y=(null===(p=e.getRtlHelpers())||void 0===p?void 0:p.isScrollingToNegative)?-y:y),s.contentWrapperEl[s.axis[s.draggedAxis].scrollOffsetAttr]=y}},this.onEndDrag=function(e){var t=E(s.el),o=g(s.el);e.preventDefault(),e.stopPropagation(),w(s.el,s.classNames.dragging),t.removeEventListener("mousemove",s.drag,!0),t.removeEventListener("mouseup",s.onEndDrag,!0),s.removePreventClickId=o.setTimeout((function(){t.removeEventListener("click",s.preventClick,!0),t.removeEventListener("dblclick",s.preventClick,!0),s.removePreventClickId=null}))},this.preventClick=function(e){e.preventDefault(),e.stopPropagation()},this.el=t,this.options=i(i({},e.defaultOptions),o),this.classNames=i(i({},e.defaultOptions.classNames),o.classNames),this.axis={x:{scrollOffsetAttr:"scrollLeft",sizeAttr:"width",scrollSizeAttr:"scrollWidth",offsetSizeAttr:"offsetWidth",offsetAttr:"left",overflowAttr:"overflowX",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}},y:{scrollOffsetAttr:"scrollTop",sizeAttr:"height",scrollSizeAttr:"scrollHeight",offsetSizeAttr:"offsetHeight",offsetAttr:"top",overflowAttr:"overflowY",dragOffset:0,isOverflowing:!0,forceVisible:!1,track:{size:null,el:null,rect:null,isVisible:!1},scrollbar:{size:null,el:null,rect:null,isVisible:!1}}},"object"!=typeof this.el||!this.el.nodeName)throw new Error("Argument passed to SimpleBar must be an HTML element instead of ".concat(this.el));this.onMouseMove=(0,n.default)(this._onMouseMove,64),this.onWindowResize=(0,r.default)(this._onWindowResize,64,{leading:!0}),this.onStopScrolling=(0,r.default)(this._onStopScrolling,this.stopScrollDelay),this.onMouseEntered=(0,r.default)(this._onMouseEntered,this.stopScrollDelay),this.init()}return e.getRtlHelpers=function(){if(e.rtlHelpers)return e.rtlHelpers;var t=document.createElement("div");t.innerHTML='<div class="simplebar-dummy-scrollbar-size"><div></div></div>';var o=t.firstElementChild,n=null==o?void 0:o.firstElementChild;if(!n)return null;document.body.appendChild(o),o.scrollLeft=0;var r=e.getOffset(o),s=e.getOffset(n);o.scrollLeft=-999;var i=e.getOffset(n);return document.body.removeChild(o),e.rtlHelpers={isScrollOriginAtZero:r.left!==s.left,isScrollingToNegative:s.left!==i.left},e.rtlHelpers},e.prototype.getScrollbarWidth=function(){try{return this.contentWrapperEl&&"none"===getComputedStyle(this.contentWrapperEl,"::-webkit-scrollbar").display||"scrollbarWidth"in document.documentElement.style||"-ms-overflow-style"in document.documentElement.style?0:c()}catch(e){return c()}},e.getOffset=function(e){var t=e.getBoundingClientRect(),o=E(e),n=g(e);return{top:t.top+(n.pageYOffset||o.documentElement.scrollTop),left:t.left+(n.pageXOffset||o.documentElement.scrollLeft)}},e.prototype.init=function(){s&&(this.initDOM(),this.rtlHelpers=e.getRtlHelpers(),this.scrollbarWidth=this.getScrollbarWidth(),this.recalculate(),this.initListeners())},e.prototype.initDOM=function(){var e,t;this.wrapperEl=this.el.querySelector(x(this.classNames.wrapper)),this.contentWrapperEl=this.options.scrollableNode||this.el.querySelector(x(this.classNames.contentWrapper)),this.contentEl=this.options.contentNode||this.el.querySelector(x(this.classNames.contentEl)),this.offsetEl=this.el.querySelector(x(this.classNames.offset)),this.maskEl=this.el.querySelector(x(this.classNames.mask)),this.placeholderEl=this.findChild(this.wrapperEl,x(this.classNames.placeholder)),this.heightAutoObserverWrapperEl=this.el.querySelector(x(this.classNames.heightAutoObserverWrapperEl)),this.heightAutoObserverEl=this.el.querySelector(x(this.classNames.heightAutoObserverEl)),this.axis.x.track.el=this.findChild(this.el,"".concat(x(this.classNames.track)).concat(x(this.classNames.horizontal))),this.axis.y.track.el=this.findChild(this.el,"".concat(x(this.classNames.track)).concat(x(this.classNames.vertical))),this.axis.x.scrollbar.el=(null===(e=this.axis.x.track.el)||void 0===e?void 0:e.querySelector(x(this.classNames.scrollbar)))||null,this.axis.y.scrollbar.el=(null===(t=this.axis.y.track.el)||void 0===t?void 0:t.querySelector(x(this.classNames.scrollbar)))||null,this.options.autoHide||(y(this.axis.x.scrollbar.el,this.classNames.visible),y(this.axis.y.scrollbar.el,this.classNames.visible))},e.prototype.initListeners=function(){var e,t=this,o=g(this.el);if(this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("pointerdown",this.onPointerEvent,!0),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mouseleave",this.onMouseLeave),null===(e=this.contentWrapperEl)||void 0===e||e.addEventListener("scroll",this.onScroll),o.addEventListener("resize",this.onWindowResize),this.contentEl){if(window.ResizeObserver){var n=!1,r=o.ResizeObserver||ResizeObserver;this.resizeObserver=new r((function(){n&&o.requestAnimationFrame((function(){t.recalculate()}))})),this.resizeObserver.observe(this.el),this.resizeObserver.observe(this.contentEl),o.requestAnimationFrame((function(){n=!0}))}this.mutationObserver=new o.MutationObserver((function(){o.requestAnimationFrame((function(){t.recalculate()}))})),this.mutationObserver.observe(this.contentEl,{childList:!0,subtree:!0,characterData:!0})}},e.prototype.recalculate=function(){if(this.heightAutoObserverEl&&this.contentEl&&this.contentWrapperEl&&this.wrapperEl&&this.placeholderEl){var e=g(this.el);this.elStyles=e.getComputedStyle(this.el),this.isRtl="rtl"===this.elStyles.direction;var t=this.contentEl.offsetWidth,o=this.heightAutoObserverEl.offsetHeight<=1,n=this.heightAutoObserverEl.offsetWidth<=1||t>0,r=this.contentWrapperEl.offsetWidth,s=this.elStyles.overflowX,i=this.elStyles.overflowY;this.contentEl.style.padding="".concat(this.elStyles.paddingTop," ").concat(this.elStyles.paddingRight," ").concat(this.elStyles.paddingBottom," ").concat(this.elStyles.paddingLeft),this.wrapperEl.style.margin="-".concat(this.elStyles.paddingTop," -").concat(this.elStyles.paddingRight," -").concat(this.elStyles.paddingBottom," -").concat(this.elStyles.paddingLeft);var a=this.contentEl.scrollHeight,l=this.contentEl.scrollWidth;this.contentWrapperEl.style.height=o?"auto":"100%",this.placeholderEl.style.width=n?"".concat(t||l,"px"):"auto",this.placeholderEl.style.height="".concat(a,"px");var c=this.contentWrapperEl.offsetHeight;this.axis.x.isOverflowing=0!==t&&l>t,this.axis.y.isOverflowing=a>c,this.axis.x.isOverflowing="hidden"!==s&&this.axis.x.isOverflowing,this.axis.y.isOverflowing="hidden"!==i&&this.axis.y.isOverflowing,this.axis.x.forceVisible="x"===this.options.forceVisible||!0===this.options.forceVisible,this.axis.y.forceVisible="y"===this.options.forceVisible||!0===this.options.forceVisible,this.hideNativeScrollbar();var u=this.axis.x.isOverflowing?this.scrollbarWidth:0,d=this.axis.y.isOverflowing?this.scrollbarWidth:0;this.axis.x.isOverflowing=this.axis.x.isOverflowing&&l>r-d,this.axis.y.isOverflowing=this.axis.y.isOverflowing&&a>c-u,this.axis.x.scrollbar.size=this.getScrollbarSize("x"),this.axis.y.scrollbar.size=this.getScrollbarSize("y"),this.axis.x.scrollbar.el&&(this.axis.x.scrollbar.el.style.width="".concat(this.axis.x.scrollbar.size,"px")),this.axis.y.scrollbar.el&&(this.axis.y.scrollbar.el.style.height="".concat(this.axis.y.scrollbar.size,"px")),this.positionScrollbar("x"),this.positionScrollbar("y"),this.toggleTrackVisibility("x"),this.toggleTrackVisibility("y")}},e.prototype.getScrollbarSize=function(e){var t,o;if(void 0===e&&(e="y"),!this.axis[e].isOverflowing||!this.contentEl)return 0;var n,r=this.contentEl[this.axis[e].scrollSizeAttr],s=null!==(o=null===(t=this.axis[e].track.el)||void 0===t?void 0:t[this.axis[e].offsetSizeAttr])&&void 0!==o?o:0,i=s/r;return n=Math.max(~~(i*s),this.options.scrollbarMinSize),this.options.scrollbarMaxSize&&(n=Math.min(n,this.options.scrollbarMaxSize)),n},e.prototype.positionScrollbar=function(t){var o,n,r;void 0===t&&(t="y");var s=this.axis[t].scrollbar;if(this.axis[t].isOverflowing&&this.contentWrapperEl&&s.el&&this.elStyles){var i=this.contentWrapperEl[this.axis[t].scrollSizeAttr],a=(null===(o=this.axis[t].track.el)||void 0===o?void 0:o[this.axis[t].offsetSizeAttr])||0,l=parseInt(this.elStyles[this.axis[t].sizeAttr],10),c=this.contentWrapperEl[this.axis[t].scrollOffsetAttr];c="x"===t&&this.isRtl&&(null===(n=e.getRtlHelpers())||void 0===n?void 0:n.isScrollOriginAtZero)?-c:c,"x"===t&&this.isRtl&&(c=(null===(r=e.getRtlHelpers())||void 0===r?void 0:r.isScrollingToNegative)?c:-c);var u=c/(i-l),d=~~((a-s.size)*u);d="x"===t&&this.isRtl?-d+(a-s.size):d,s.el.style.transform="x"===t?"translate3d(".concat(d,"px, 0, 0)"):"translate3d(0, ".concat(d,"px, 0)")}},e.prototype.toggleTrackVisibility=function(e){void 0===e&&(e="y");var t=this.axis[e].track.el,o=this.axis[e].scrollbar.el;t&&o&&this.contentWrapperEl&&(this.axis[e].isOverflowing||this.axis[e].forceVisible?(t.style.visibility="visible",this.contentWrapperEl.style[this.axis[e].overflowAttr]="scroll",this.el.classList.add("".concat(this.classNames.scrollable,"-").concat(e))):(t.style.visibility="hidden",this.contentWrapperEl.style[this.axis[e].overflowAttr]="hidden",this.el.classList.remove("".concat(this.classNames.scrollable,"-").concat(e))),this.axis[e].isOverflowing?o.style.display="block":o.style.display="none")},e.prototype.showScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&!this.axis[e].scrollbar.isVisible&&(y(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!0)},e.prototype.hideScrollbar=function(e){void 0===e&&(e="y"),this.axis[e].isOverflowing&&this.axis[e].scrollbar.isVisible&&(w(this.axis[e].scrollbar.el,this.classNames.visible),this.axis[e].scrollbar.isVisible=!1)},e.prototype.hideNativeScrollbar=function(){this.offsetEl&&(this.offsetEl.style[this.isRtl?"left":"right"]=this.axis.y.isOverflowing||this.axis.y.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px",this.offsetEl.style.bottom=this.axis.x.isOverflowing||this.axis.x.forceVisible?"-".concat(this.scrollbarWidth,"px"):"0px")},e.prototype.onMouseMoveForAxis=function(e){void 0===e&&(e="y");var t=this.axis[e];t.track.el&&t.scrollbar.el&&(t.track.rect=t.track.el.getBoundingClientRect(),t.scrollbar.rect=t.scrollbar.el.getBoundingClientRect(),this.isWithinBounds(t.track.rect)?(this.showScrollbar(e),y(t.track.el,this.classNames.hover),this.isWithinBounds(t.scrollbar.rect)?y(t.scrollbar.el,this.classNames.hover):w(t.scrollbar.el,this.classNames.hover)):(w(t.track.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)))},e.prototype.onMouseLeaveForAxis=function(e){void 0===e&&(e="y"),w(this.axis[e].track.el,this.classNames.hover),w(this.axis[e].scrollbar.el,this.classNames.hover),this.options.autoHide&&this.hideScrollbar(e)},e.prototype.onDragStart=function(e,t){var o;void 0===t&&(t="y");var n=E(this.el),r=g(this.el),s=this.axis[t].scrollbar,i="y"===t?e.pageY:e.pageX;this.axis[t].dragOffset=i-((null===(o=s.rect)||void 0===o?void 0:o[this.axis[t].offsetAttr])||0),this.draggedAxis=t,y(this.el,this.classNames.dragging),n.addEventListener("mousemove",this.drag,!0),n.addEventListener("mouseup",this.onEndDrag,!0),null===this.removePreventClickId?(n.addEventListener("click",this.preventClick,!0),n.addEventListener("dblclick",this.preventClick,!0)):(r.clearTimeout(this.removePreventClickId),this.removePreventClickId=null)},e.prototype.onTrackClick=function(e,t){var o,n,r,s,i=this;void 0===t&&(t="y");var a=this.axis[t];if(this.options.clickOnTrack&&a.scrollbar.el&&this.contentWrapperEl){e.preventDefault();var l=g(this.el);this.axis[t].scrollbar.rect=a.scrollbar.el.getBoundingClientRect();var c=null!==(n=null===(o=this.axis[t].scrollbar.rect)||void 0===o?void 0:o[this.axis[t].offsetAttr])&&void 0!==n?n:0,u=parseInt(null!==(s=null===(r=this.elStyles)||void 0===r?void 0:r[this.axis[t].sizeAttr])&&void 0!==s?s:"0px",10),d=this.contentWrapperEl[this.axis[t].scrollOffsetAttr],h=("y"===t?this.mouseY-c:this.mouseX-c)<0?-1:1,p=-1===h?d-u:d+u,f=function(){i.contentWrapperEl&&(-1===h?d>p&&(d-=40,i.contentWrapperEl[i.axis[t].scrollOffsetAttr]=d,l.requestAnimationFrame(f)):d<p&&(d+=40,i.contentWrapperEl[i.axis[t].scrollOffsetAttr]=d,l.requestAnimationFrame(f)))};f()}},e.prototype.getContentElement=function(){return this.contentEl},e.prototype.getScrollElement=function(){return this.contentWrapperEl},e.prototype.removeListeners=function(){var e=g(this.el);this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("pointerdown",this.onPointerEvent,!0),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mouseleave",this.onMouseLeave),this.contentWrapperEl&&this.contentWrapperEl.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onWindowResize),this.mutationObserver&&this.mutationObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.onMouseMove.cancel(),this.onWindowResize.cancel(),this.onStopScrolling.cancel(),this.onMouseEntered.cancel()},e.prototype.unMount=function(){this.removeListeners()},e.prototype.isWithinBounds=function(e){return this.mouseX>=e.left&&this.mouseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e.prototype.findChild=function(e,t){var o=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return Array.prototype.filter.call(e.children,(function(e){return o.call(e,t)}))[0]},e.rtlHelpers=null,e.defaultOptions={forceVisible:!1,clickOnTrack:!0,scrollbarMinSize:25,scrollbarMaxSize:0,ariaLabel:"scrollable content",classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging",scrolling:"simplebar-scrolling",scrollable:"simplebar-scrollable",mouseEntered:"simplebar-mouse-entered"},scrollableNode:null,contentNode:null,autoHide:!0},e.getOptions=b,e.helpers=v,e}()},24087:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(667294),r=o(269329),s=function(){return s=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};var i=n.forwardRef((function(e,t){var o=e.children,i=e.scrollableNodeProps,a=void 0===i?{}:i,l=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]])}return o}(e,["children","scrollableNodeProps"]),c=n.useRef(),u=n.useRef(),d=n.useRef(),h={},p={};Object.keys(l).forEach((function(e){Object.prototype.hasOwnProperty.call(r.default.defaultOptions,e)?h[e]=l[e]:p[e]=l[e]}));var f=s(s({},r.default.defaultOptions.classNames),h.classNames),m=s(s({},a),{className:"".concat(f.contentWrapper).concat(a.className?" ".concat(a.className):""),tabIndex:0,role:"region","aria-label":h.ariaLabel||r.default.defaultOptions.ariaLabel});return n.useEffect((function(){var e;return u.current=m.ref?m.ref.current:u.current,c.current&&(e=new r.default(c.current,s(s(s({},h),u.current&&{scrollableNode:u.current}),d.current&&{contentNode:d.current})),"function"==typeof t?t(e):t&&(t.current=e)),function(){null==e||e.unMount(),e=null,"function"==typeof t&&t(null)}}),[]),n.createElement("div",s({"data-simplebar":"init",ref:c},p),n.createElement("div",{className:f.wrapper},n.createElement("div",{className:f.heightAutoObserverWrapperEl},n.createElement("div",{className:f.heightAutoObserverEl})),n.createElement("div",{className:f.mask},n.createElement("div",{className:f.offset},"function"==typeof o?o({scrollableNodeRef:u,scrollableNodeProps:s(s({},m),{ref:u}),contentNodeRef:d,contentNodeProps:{className:f.contentEl,ref:d}}):n.createElement("div",s({},m),n.createElement("div",{className:f.contentEl},o)))),n.createElement("div",{className:f.placeholder})),n.createElement("div",{className:"".concat(f.track," simplebar-horizontal")},n.createElement("div",{className:f.scrollbar})),n.createElement("div",{className:"".concat(f.track," simplebar-vertical")},n.createElement("div",{className:f.scrollbar})))}));i.displayName="SimpleBar"}}]);try{stManager.done("dist/ddeda4e7b7efaf6cead78c93ee724ebf.c0b5d5a222db122466b8.js")}catch(e){}